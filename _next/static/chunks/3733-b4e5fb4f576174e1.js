"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3733],{17198:function(e,t,r){r.d(t,{o6:function(){return v}});var n=r(39521),a=r(70838).Buffer;function s(e,...t){try{return(r=e(...t))&&"function"==typeof r.then?r:Promise.resolve(r)}catch(e){return Promise.reject(e)}var r}function i(e){if(function(e){const t=typeof e;return null===e||"object"!==t&&"function"!==t}(e))return String(e);if(function(e){const t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}(e)||Array.isArray(e))return JSON.stringify(e);if("function"==typeof e.toJSON)return i(e.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function o(){if(void 0===a)throw new TypeError("[unstorage] Buffer is not supported!")}const u="base64:";function c(e){return e?e.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function m(...e){return c(e.join(":"))}function l(e){return(e=c(e))?e+":":""}const f=()=>{const e=new Map;return{name:"memory",getInstance:()=>e,hasItem(t){return e.has(t)},getItem(t){return e.get(t)??null},getItemRaw(t){return e.get(t)??null},setItem(t,r){e.set(t,r)},setItemRaw(t,r){e.set(t,r)},removeItem(t){e.delete(t)},getKeys(){return[...e.keys()]},clear(){e.clear()},dispose(){e.clear()}}};function v(e={}){const t={mounts:{"":e.driver||f()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=e=>{for(const r of t.mountpoints)if(e.startsWith(r))return{base:r,relativeKey:e.slice(r.length),driver:t.mounts[r]};return{base:"",relativeKey:e,driver:t.mounts[""]}},v=(e,r)=>t.mountpoints.filter((t=>t.startsWith(e)||r&&e.startsWith(t))).map((r=>({relativeBase:e.length>r.length?e.slice(r.length):void 0,mountpoint:r,driver:t.mounts[r]}))),p=(e,r)=>{if(t.watching){r=c(r);for(const n of t.watchListeners)n(e,r)}},y=async()=>{if(t.watching){for(const e in t.unwatch)await t.unwatch[e]();t.unwatch={},t.watching=!1}},g=(e,t,n)=>{const a=new Map,s=e=>{let t=a.get(e.base);return t||(t={driver:e.driver,base:e.base,items:[]},a.set(e.base,t)),t};for(const n of e){const e="string"==typeof n,a=c(e?n:n.key),i=e?void 0:n.value,o=e||!n.options?t:{...t,...n.options},u=r(a);s(u).items.push({key:a,value:i,relativeKey:u.relativeKey,options:o})}return Promise.all([...a.values()].map((e=>n(e)))).then((e=>e.flat()))},d={hasItem(e,t={}){e=c(e);const{relativeKey:n,driver:a}=r(e);return s(a.hasItem,n,t)},getItem(e,t={}){e=c(e);const{relativeKey:a,driver:i}=r(e);return s(i.getItem,a,t).then((e=>(0,n.ZP)(e)))},getItems(e,t){return g(e,t,(e=>e.driver.getItems?s(e.driver.getItems,e.items.map((e=>({key:e.relativeKey,options:e.options}))),t).then((t=>t.map((t=>({key:m(e.base,t.key),value:(0,n.ZP)(t.value)}))))):Promise.all(e.items.map((t=>s(e.driver.getItem,t.relativeKey,t.options).then((e=>({key:t.key,value:(0,n.ZP)(e)}))))))))},getItemRaw(e,t={}){e=c(e);const{relativeKey:n,driver:i}=r(e);return i.getItemRaw?s(i.getItemRaw,n,t):s(i.getItem,n,t).then((e=>function(e){return"string"!=typeof e?e:e.startsWith(u)?(o(),a.from(e.slice(u.length),"base64")):e}(e)))},async setItem(e,t,n={}){if(void 0===t)return d.removeItem(e);e=c(e);const{relativeKey:a,driver:o}=r(e);o.setItem&&(await s(o.setItem,a,i(t),n),o.watch||p("update",e))},async setItems(e,t){await g(e,t,(async e=>{if(e.driver.setItems)return s(e.driver.setItems,e.items.map((e=>({key:e.relativeKey,value:i(e.value),options:e.options}))),t);e.driver.setItem&&await Promise.all(e.items.map((t=>s(e.driver.setItem,t.relativeKey,i(t.value),t.options))))}))},async setItemRaw(e,t,n={}){if(void 0===t)return d.removeItem(e,n);e=c(e);const{relativeKey:i,driver:m}=r(e);if(m.setItemRaw)await s(m.setItemRaw,i,t,n);else{if(!m.setItem)return;await s(m.setItem,i,function(e){if("string"==typeof e)return e;o();const t=a.from(e).toString("base64");return u+t}(t),n)}m.watch||p("update",e)},async removeItem(e,t={}){"boolean"==typeof t&&(t={removeMeta:t}),e=c(e);const{relativeKey:n,driver:a}=r(e);a.removeItem&&(await s(a.removeItem,n,t),(t.removeMeta||t.removeMata)&&await s(a.removeItem,n+"$",t),a.watch||p("remove",e))},async getMeta(e,t={}){"boolean"==typeof t&&(t={nativeOnly:t}),e=c(e);const{relativeKey:a,driver:i}=r(e),o=Object.create(null);if(i.getMeta&&Object.assign(o,await s(i.getMeta,a,t)),!t.nativeOnly){const e=await s(i.getItem,a+"$",t).then((e=>(0,n.ZP)(e)));e&&"object"==typeof e&&("string"==typeof e.atime&&(e.atime=new Date(e.atime)),"string"==typeof e.mtime&&(e.mtime=new Date(e.mtime)),Object.assign(o,e))}return o},setMeta(e,t,r={}){return this.setItem(e+"$",t,r)},removeMeta(e,t={}){return this.removeItem(e+"$",t)},async getKeys(e,t={}){e=l(e);const r=v(e,!0);let n=[];const a=[];for(const e of r){const r=await s(e.driver.getKeys,e.relativeBase,t);for(const t of r){const r=e.mountpoint+c(t);n.some((e=>r.startsWith(e)))||a.push(r)}n=[e.mountpoint,...n.filter((t=>!t.startsWith(e.mountpoint)))]}return e?a.filter((t=>t.startsWith(e)&&"$"!==t[t.length-1])):a.filter((e=>"$"!==e[e.length-1]))},async clear(e,t={}){e=l(e),await Promise.all(v(e,!1).map((async e=>{if(e.driver.clear)return s(e.driver.clear,e.relativeBase,t);if(e.driver.removeItem){const r=await e.driver.getKeys(e.relativeBase||"",t);return Promise.all(r.map((r=>e.driver.removeItem(r,t))))}})))},async dispose(){await Promise.all(Object.values(t.mounts).map((e=>w(e))))},async watch(e){return await(async()=>{if(!t.watching){t.watching=!0;for(const e in t.mounts)t.unwatch[e]=await h(t.mounts[e],p,e)}})(),t.watchListeners.push(e),async()=>{t.watchListeners=t.watchListeners.filter((t=>t!==e)),0===t.watchListeners.length&&await y()}},async unwatch(){t.watchListeners=[],await y()},mount(e,r){if((e=l(e))&&t.mounts[e])throw new Error(`already mounted at ${e}`);return e&&(t.mountpoints.push(e),t.mountpoints.sort(((e,t)=>t.length-e.length))),t.mounts[e]=r,t.watching&&Promise.resolve(h(r,p,e)).then((r=>{t.unwatch[e]=r})).catch(console.error),d},async unmount(e,r=!0){(e=l(e))&&t.mounts[e]&&(t.watching&&e in t.unwatch&&(t.unwatch[e](),delete t.unwatch[e]),r&&await w(t.mounts[e]),t.mountpoints=t.mountpoints.filter((t=>t!==e)),delete t.mounts[e])},getMount(e=""){e=c(e)+":";const t=r(e);return{driver:t.driver,base:t.base}},getMounts(e="",t={}){e=c(e);return v(e,t.parents).map((e=>({driver:e.driver,base:e.mountpoint})))},keys:(e,t={})=>d.getKeys(e,t),get:(e,t={})=>d.getItem(e,t),set:(e,t,r={})=>d.setItem(e,t,r),has:(e,t={})=>d.hasItem(e,t),del:(e,t={})=>d.removeItem(e,t),remove:(e,t={})=>d.removeItem(e,t)};return d}function h(e,t,r){return e.watch?e.watch(((e,n)=>t(e,r+n))):()=>{}}async function w(e){"function"==typeof e.dispose&&await s(e.dispose)}},15725:function(e,t,r){r.d(t,{Nr:function(){return s},O_:function(){return i},m9:function(){return a}});var n=r(93889);r(89351);"undefined"!=typeof window?n.useLayoutEffect:n.useEffect;function a(){const[e,t]=(0,n.useState)(null);return[e,(0,n.useCallback)((async e=>{if(!(null==navigator?void 0:navigator.clipboard))return console.warn("Clipboard not supported"),!1;try{return await navigator.clipboard.writeText(e),t(e),!0}catch(e){return console.warn("Copy failed",e),t(null),!1}}),[])]}function s(e,t){const[r,a]=(0,n.useState)(e);return(0,n.useEffect)((()=>{const r=setTimeout((()=>{a(e)}),t??500);return()=>{clearTimeout(r)}}),[e,t]),r}function i(){const[e,t]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{t(!0)}),[]),e}}}]);
//# sourceMappingURL=3733-b4e5fb4f576174e1.js.map