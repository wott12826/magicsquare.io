"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3733],{17198:function(e,t,n){n.d(t,{o6:function(){return v}});var r=n(39521),o=n(70838).Buffer;function a(e,...t){try{return(n=e(...t))&&"function"==typeof n.then?n:Promise.resolve(n)}catch(e){return Promise.reject(e)}var n}function s(e){if(function(e){const t=typeof e;return null===e||"object"!==t&&"function"!==t}(e))return String(e);if(function(e){const t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}(e)||Array.isArray(e))return JSON.stringify(e);if("function"==typeof e.toJSON)return s(e.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function i(){if(void 0===o)throw new TypeError("[unstorage] Buffer is not supported!")}const u="base64:";function c(e){return e?e.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function l(...e){return c(e.join(":"))}function f(e){return(e=c(e))?e+":":""}const m=()=>{const e=new Map;return{name:"memory",getInstance:()=>e,hasItem(t){return e.has(t)},getItem(t){return e.get(t)??null},getItemRaw(t){return e.get(t)??null},setItem(t,n){e.set(t,n)},setItemRaw(t,n){e.set(t,n)},removeItem(t){e.delete(t)},getKeys(){return[...e.keys()]},clear(){e.clear()},dispose(){e.clear()}}};function v(e={}){const t={mounts:{"":e.driver||m()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=e=>{for(const n of t.mountpoints)if(e.startsWith(n))return{base:n,relativeKey:e.slice(n.length),driver:t.mounts[n]};return{base:"",relativeKey:e,driver:t.mounts[""]}},v=(e,n)=>t.mountpoints.filter((t=>t.startsWith(e)||n&&e.startsWith(t))).map((n=>({relativeBase:e.length>n.length?e.slice(n.length):void 0,mountpoint:n,driver:t.mounts[n]}))),y=(e,n)=>{if(t.watching){n=c(n);for(const r of t.watchListeners)r(e,n)}},g=async()=>{if(t.watching){for(const e in t.unwatch)await t.unwatch[e]();t.unwatch={},t.watching=!1}},d=(e,t,r)=>{const o=new Map,a=e=>{let t=o.get(e.base);return t||(t={driver:e.driver,base:e.base,items:[]},o.set(e.base,t)),t};for(const r of e){const e="string"==typeof r,o=c(e?r:r.key),s=e?void 0:r.value,i=e||!r.options?t:{...t,...r.options},u=n(o);a(u).items.push({key:o,value:s,relativeKey:u.relativeKey,options:i})}return Promise.all([...o.values()].map((e=>r(e)))).then((e=>e.flat()))},p={hasItem(e,t={}){e=c(e);const{relativeKey:r,driver:o}=n(e);return a(o.hasItem,r,t)},getItem(e,t={}){e=c(e);const{relativeKey:o,driver:s}=n(e);return a(s.getItem,o,t).then((e=>(0,r.ZP)(e)))},getItems(e,t){return d(e,t,(e=>e.driver.getItems?a(e.driver.getItems,e.items.map((e=>({key:e.relativeKey,options:e.options}))),t).then((t=>t.map((t=>({key:l(e.base,t.key),value:(0,r.ZP)(t.value)}))))):Promise.all(e.items.map((t=>a(e.driver.getItem,t.relativeKey,t.options).then((e=>({key:t.key,value:(0,r.ZP)(e)}))))))))},getItemRaw(e,t={}){e=c(e);const{relativeKey:r,driver:s}=n(e);return s.getItemRaw?a(s.getItemRaw,r,t):a(s.getItem,r,t).then((e=>function(e){return"string"!=typeof e?e:e.startsWith(u)?(i(),o.from(e.slice(u.length),"base64")):e}(e)))},async setItem(e,t,r={}){if(void 0===t)return p.removeItem(e);e=c(e);const{relativeKey:o,driver:i}=n(e);i.setItem&&(await a(i.setItem,o,s(t),r),i.watch||y("update",e))},async setItems(e,t){await d(e,t,(async e=>{if(e.driver.setItems)return a(e.driver.setItems,e.items.map((e=>({key:e.relativeKey,value:s(e.value),options:e.options}))),t);e.driver.setItem&&await Promise.all(e.items.map((t=>a(e.driver.setItem,t.relativeKey,s(t.value),t.options))))}))},async setItemRaw(e,t,r={}){if(void 0===t)return p.removeItem(e,r);e=c(e);const{relativeKey:s,driver:l}=n(e);if(l.setItemRaw)await a(l.setItemRaw,s,t,r);else{if(!l.setItem)return;await a(l.setItem,s,function(e){if("string"==typeof e)return e;i();const t=o.from(e).toString("base64");return u+t}(t),r)}l.watch||y("update",e)},async removeItem(e,t={}){"boolean"==typeof t&&(t={removeMeta:t}),e=c(e);const{relativeKey:r,driver:o}=n(e);o.removeItem&&(await a(o.removeItem,r,t),(t.removeMeta||t.removeMata)&&await a(o.removeItem,r+"$",t),o.watch||y("remove",e))},async getMeta(e,t={}){"boolean"==typeof t&&(t={nativeOnly:t}),e=c(e);const{relativeKey:o,driver:s}=n(e),i=Object.create(null);if(s.getMeta&&Object.assign(i,await a(s.getMeta,o,t)),!t.nativeOnly){const e=await a(s.getItem,o+"$",t).then((e=>(0,r.ZP)(e)));e&&"object"==typeof e&&("string"==typeof e.atime&&(e.atime=new Date(e.atime)),"string"==typeof e.mtime&&(e.mtime=new Date(e.mtime)),Object.assign(i,e))}return i},setMeta(e,t,n={}){return this.setItem(e+"$",t,n)},removeMeta(e,t={}){return this.removeItem(e+"$",t)},async getKeys(e,t={}){e=f(e);const n=v(e,!0);let r=[];const o=[];for(const e of n){const n=await a(e.driver.getKeys,e.relativeBase,t);for(const t of n){const n=e.mountpoint+c(t);r.some((e=>n.startsWith(e)))||o.push(n)}r=[e.mountpoint,...r.filter((t=>!t.startsWith(e.mountpoint)))]}return e?o.filter((t=>t.startsWith(e)&&"$"!==t[t.length-1])):o.filter((e=>"$"!==e[e.length-1]))},async clear(e,t={}){e=f(e),await Promise.all(v(e,!1).map((async e=>{if(e.driver.clear)return a(e.driver.clear,e.relativeBase,t);if(e.driver.removeItem){const n=await e.driver.getKeys(e.relativeBase||"",t);return Promise.all(n.map((n=>e.driver.removeItem(n,t))))}})))},async dispose(){await Promise.all(Object.values(t.mounts).map((e=>h(e))))},async watch(e){return await(async()=>{if(!t.watching){t.watching=!0;for(const e in t.mounts)t.unwatch[e]=await w(t.mounts[e],y,e)}})(),t.watchListeners.push(e),async()=>{t.watchListeners=t.watchListeners.filter((t=>t!==e)),0===t.watchListeners.length&&await g()}},async unwatch(){t.watchListeners=[],await g()},mount(e,n){if((e=f(e))&&t.mounts[e])throw new Error(`already mounted at ${e}`);return e&&(t.mountpoints.push(e),t.mountpoints.sort(((e,t)=>t.length-e.length))),t.mounts[e]=n,t.watching&&Promise.resolve(w(n,y,e)).then((n=>{t.unwatch[e]=n})).catch(console.error),p},async unmount(e,n=!0){(e=f(e))&&t.mounts[e]&&(t.watching&&e in t.unwatch&&(t.unwatch[e](),delete t.unwatch[e]),n&&await h(t.mounts[e]),t.mountpoints=t.mountpoints.filter((t=>t!==e)),delete t.mounts[e])},getMount(e=""){e=c(e)+":";const t=n(e);return{driver:t.driver,base:t.base}},getMounts(e="",t={}){e=c(e);return v(e,t.parents).map((e=>({driver:e.driver,base:e.mountpoint})))},keys:(e,t={})=>p.getKeys(e,t),get:(e,t={})=>p.getItem(e,t),set:(e,t,n={})=>p.setItem(e,t,n),has:(e,t={})=>p.hasItem(e,t),del:(e,t={})=>p.removeItem(e,t),remove:(e,t={})=>p.removeItem(e,t)};return p}function w(e,t,n){return e.watch?e.watch(((e,r)=>t(e,n+r))):()=>{}}async function h(e){"function"==typeof e.dispose&&await a(e.dispose)}},15725:function(e,t,n){n.d(t,{Nr:function(){return m},O_:function(){return y},Yz:function(){return u},_:function(){return f},m9:function(){return i},nj:function(){return h}});var r=n(93889),o=n(89351);var a="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;function s(e,t,n,o){const s=(0,r.useRef)(t);a((()=>{s.current=t}),[t]),(0,r.useEffect)((()=>{const t=(null==n?void 0:n.current)??window;if(!t||!t.addEventListener)return;const r=e=>{s.current(e)};return t.addEventListener(e,r,o),()=>{t.removeEventListener(e,r,o)}}),[e,n,o])}function i(){const[e,t]=(0,r.useState)(null);return[e,(0,r.useCallback)((async e=>{if(!(null==navigator?void 0:navigator.clipboard))return console.warn("Clipboard not supported"),!1;try{return await navigator.clipboard.writeText(e),t(e),!0}catch(e){return console.warn("Copy failed",e),t(null),!1}}),[])]}function u(e,t){const n=(0,r.useRef)(e);a((()=>{n.current=e}),[e]),(0,r.useEffect)((()=>{if(null===t)return;const e=setInterval((()=>{n.current()}),t);return()=>{clearInterval(e)}}),[t])}function c(e){const t=(0,r.useRef)((()=>{throw new Error("Cannot call an event handler while rendering.")}));return a((()=>{t.current=e}),[e]),(0,r.useCallback)(((...e)=>t.current(...e)),[t])}var l="undefined"==typeof window;function f(e,t,n={}){const{initializeWithValue:o=!0}=n,a=(0,r.useCallback)((e=>n.serializer?n.serializer(e):JSON.stringify(e)),[n]),i=(0,r.useCallback)((e=>{if(n.deserializer)return n.deserializer(e);if("undefined"===e)return;const r=t instanceof Function?t():t;let o;try{o=JSON.parse(e)}catch(e){return console.error("Error parsing JSON:",e),r}return o}),[n,t]),u=(0,r.useCallback)((()=>{const n=t instanceof Function?t():t;if(l)return n;try{const t=window.localStorage.getItem(e);return t?i(t):n}catch(t){return console.warn(`Error reading localStorage key “${e}”:`,t),n}}),[t,e,i]),[f,m]=(0,r.useState)((()=>o?u():t instanceof Function?t():t)),v=c((t=>{l&&console.warn(`Tried setting localStorage key “${e}” even though environment is not a client`);try{const n=t instanceof Function?t(u()):t;window.localStorage.setItem(e,a(n)),m(n),window.dispatchEvent(new StorageEvent("local-storage",{key:e}))}catch(t){console.warn(`Error setting localStorage key “${e}”:`,t)}}));(0,r.useEffect)((()=>{m(u())}),[e]);const w=(0,r.useCallback)((t=>{(null==t?void 0:t.key)&&t.key!==e||m(u())}),[e,u]);return s("storage",w),s("local-storage",w),[f,v]}function m(e,t){const[n,o]=(0,r.useState)(e);return(0,r.useEffect)((()=>{const n=setTimeout((()=>{o(e)}),t??500);return()=>{clearTimeout(n)}}),[e,t]),n}function v(e){const t=(0,r.useRef)(e);t.current=e,(0,r.useEffect)((()=>()=>{t.current()}),[])}function w(e,t=500,n){const a=(0,r.useRef)();v((()=>{a.current&&a.current.cancel()}));const s=(0,r.useMemo)((()=>{const r=o(e,t,n),s=(...e)=>r(...e);return s.cancel=()=>{r.cancel()},s.isPending=()=>!!a.current,s.flush=()=>r.flush(),s}),[e,t,n]);return(0,r.useEffect)((()=>{a.current=o(e,t,n)}),[e,t,n]),s}function h(e,t,n){const o=(null==n?void 0:n.equalityFn)??((e,t)=>e===t),a=e instanceof Function?e():e,[s,i]=(0,r.useState)(a),u=(0,r.useRef)(a),c=w(i,t,n);return o(u.current,a)||(c(a),u.current=a),[s,c]}function y(){const[e,t]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{t(!0)}),[]),e}}}]);
//# sourceMappingURL=3733-1f076b85d0f08830.js.map