(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8767],{58767:function(e,t,n){e.exports=function(){const e=n(62086),t=n(11603),r="parser.js: ",a=this;let s;this.ast=null,this.stats=null,this.trace=null,this.callbacks=[];let o,h,i,l,c=null,u=null,p=0,f=0,g=0,d=null,T=null,w=null,b=null,m=null,M=0,E=1/0,A=1/0;const k=function(t,n,a){const o=`${r}evaluateRule(): `;if(t>=w.length)throw new Error(`${o}rule index: ${t} out of range`);if(n>=i)throw new Error(`${o}phrase index: ${n} out of range`);const{length:h}=c;c.push({type:e.RNM,index:t}),s(h,n,a),c.pop()},L=function(t,n,a){const o=`${r}evaluateUdt(): `;if(t>=b.length)throw new Error(`${o}udt index: ${t} out of range`);if(n>=i)throw new Error(`${o}phrase index: ${n} out of range`);const{length:h}=c;c.push({type:e.UDT,empty:b[t].empty,index:t}),s(h,n,a),c.pop()},C=function(){p=0,f=0,g=0,M=0,l=[{lookAround:e.LOOKAROUND_NONE,anchor:0,charsEnd:0,charsLength:0}],w=null,b=null,u=null,o=0,h=0,i=0,d=null,T=null,m=null,c=null},$=function(){const e=[];this.push=function(){e.push(function(){const t=e[e.length-1],n={};for(const e in t)n[e]=t[e];return n}())},this.pop=function(t){let n=t;if(n||(n=e.length-1),n<1||n>e.length)throw new Error(`${r}backRef.pop(): bad length: ${n}`);return e.length=n,e[e.length-1]},this.length=function(){return e.length},this.savePhrase=function(t,n,r){e[e.length-1][t]={phraseIndex:n,phraseLength:r}},this.getPhrase=function(t){return e[e.length-1][t]},function(){const t={};w.forEach((e=>{e.isBkr&&(t[e.lower]=null)})),b.length>0&&b.forEach((e=>{e.isBkr&&(t[e.lower]=null)})),e.push(t)}()},O=function(){const t=this;this.state=e.ACTIVE,this.phraseLength=0,this.ruleIndex=0,this.udtIndex=0,this.lookAround=l[l.length-1],this.uFrame=new $,this.pFrame=new $,this.evaluateRule=k,this.evaluateUdt=L,this.refresh=function(){t.state=e.ACTIVE,t.phraseLength=0,t.lookAround=l[l.length-1]}},N=function(){return l[l.length-1]},H=function(){return l.length>1},x=function(e,n,a){const s=`${r}initializeInputChars(): `;let l=e,c=n,p=a;if(void 0===l)throw new Error(`${s}input string is undefined`);if(null===l)throw new Error(`${s}input string is null`);if("string"==typeof l)l=t.stringToChars(l);else if(!Array.isArray(l))throw new Error(`${s}input string is not a string or array`);if(l.length>0&&"number"!=typeof l[0])throw new Error(`${s}input string not an array of integers`);if("number"!=typeof c)c=0;else if(c=Math.floor(c),c<0||c>l.length)throw new Error(`${s}input beginning index out of range: ${c}`);if("number"!=typeof p)p=l.length-c;else if(p=Math.floor(p),p<0||p>l.length-c)throw new Error(`${s}input length out of range: ${p}`);u=l,o=c,h=p,i=o+h};this.setMaxTreeDepth=function(e){if("number"!=typeof e)throw new Error(`parser: max tree depth must be integer > 0: ${e}`);if(E=Math.floor(e),E<=0)throw new Error(`parser: max tree depth must be integer > 0: ${e}`)},this.setMaxNodeHits=function(e){if("number"!=typeof e)throw new Error(`parser: max node hits must be integer > 0: ${e}`);if(A=Math.floor(e),A<=0)throw new Error(`parser: max node hits must be integer > 0: ${e}`)};const F=function(t,n,l){let p;const E=`${r}parse(): `;!function(e){const t=`${r}initializeGrammar(): `;if(!e)throw new Error(`${t}grammar object undefined`);if("grammarObject"!==e.grammarObject)throw new Error(`${t}bad grammar object`);w=e.rules,b=e.udts}(t);const A=function(e){const t=`${r}initializeStartRule(): `;let n=null;if("number"==typeof e){if(e>=w.length)throw new Error(`${t}start rule index too large: max: ${w.length}: index: ${e}`);n=e}else{if("string"!=typeof e)throw new Error(`${t}type of start rule '${typeof e}' not recognized`);{const r=e.toLowerCase();for(let e=0;e<w.length;e+=1)if(r===w[e].lower){n=w[e].index;break}if(null===n)throw new Error(`${t}start rule name '${e}' not recognized`)}}return n}(n);!function(){const e=`${r}initializeCallbacks(): `;let t,n;for(d=[],T=[],t=0;t<w.length;t+=1)d[t]=null;for(t=0;t<b.length;t+=1)T[t]=null;const s=[];for(t=0;t<w.length;t+=1)s.push(w[t].lower);for(t=0;t<b.length;t+=1)s.push(b[t].lower);for(const r in a.callbacks){if(t=s.indexOf(r.toLowerCase()),t<0)throw new Error(`${e}syntax callback '${r}' not a rule or udt name`);if(n=a.callbacks[r],n||(n=null),"function"!=typeof n&&null!==n)throw new Error(`${e}syntax callback[${r}] must be function reference or 'false' (false/null/undefined/etc.)`);t<w.length?d[t]=n:T[t-w.length]=n}for(t=0;t<b.length;t+=1)if(null===T[t])throw new Error(`${e}all UDT callbacks must be defined. UDT callback[${b[t].lower}] not a function reference`)}(),function(){const e=`${r}initializeTrace(): `;for(;;){if(void 0===a.trace){a.trace=null;break}if(null===a.trace)break;if("traceObject"!==a.trace.traceObject)throw new Error(`${e}trace object not recognized`);break}null!==a.trace&&a.trace.init(w,b,u)}(),function(){const e=`${r}initializeStats(): `;for(;;){if(void 0===a.stats){a.stats=null;break}if(null===a.stats)break;if("statsObject"!==a.stats.statsObject)throw new Error(`${e}stats object not recognized`);break}null!==a.stats&&a.stats.init(w,b)}(),function(){const e=`${r}initializeAst(): `;for(;;){if(void 0===a.ast){a.ast=null;break}if(null===a.ast)break;if("astObject"!==a.ast.astObject)throw new Error(`${e}ast object not recognized`);break}null!==a.ast&&a.ast.init(w,b,u)}();const k=new O;switch(null!=l&&(m=l),c=[{type:e.RNM,index:A}],s(0,o,k),c=null,k.state){case e.ACTIVE:throw new Error(`${E}final state should never be 'ACTIVE'`);case e.NOMATCH:p=!1;break;case e.EMPTY:case e.MATCH:p=k.phraseLength===h;break;default:throw new Error("unrecognized state")}return{success:p,state:k.state,length:h,matched:k.phraseLength,maxMatched:M,maxTreeDepth:f,nodeHits:g,inputLength:u.length,subBegin:o,subEnd:i,subLength:h}};this.parseSubstring=function(e,t,n,r,a,s){return C(),x(n,r,a),F(e,t,s)},this.parse=function(e,t,n,r){return C(),x(n,0,n.length),F(e,t,r)};const P=function(t,n,r){const a=c[t];for(let t=0;t<a.children.length&&(s(a.children[t],n,r),r.state===e.NOMATCH);t+=1);},D=function(t,n,a,s){if(n.phraseLength>a){let e=`${r}opRNM(${t.name}): callback function error: `;throw e+=`sysData.phraseLength: ${n.phraseLength}`,e+=` must be <= remaining chars: ${a}`,new Error(e)}switch(n.state){case e.ACTIVE:if(!0!==s)throw new Error(`${r}opRNM(${t.name}): callback function return error. ACTIVE state not allowed.`);break;case e.EMPTY:n.phraseLength=0;break;case e.MATCH:0===n.phraseLength&&(n.state=e.EMPTY);break;case e.NOMATCH:n.phraseLength=0;break;default:throw new Error(`${r}opRNM(${t.name}): callback function return error. Unrecognized return state: ${n.state}`)}},y=function(t,n,r){let o,h,l,p,f,g;const T=c[t],b=w[T.index],M=d[b.index],E=!H();if(E&&(h=a.ast&&a.ast.ruleDefined(T.index),h&&(o=a.ast.getLength(),a.ast.down(T.index,w[T.index].name)),p=r.uFrame.length(),f=r.pFrame.length(),r.uFrame.push(),r.pFrame.push(),g=r.pFrame,r.pFrame=new $),null===M)l=c,c=b.opcodes,s(0,n,r),c=l;else{const t=i-n;r.ruleIndex=b.index,M(r,u,n,m),D(b,r,t,!0),r.state===e.ACTIVE&&(l=c,c=b.opcodes,s(0,n,r),c=l,r.ruleIndex=b.index,M(r,u,n,m),D(b,r,t,!1))}E&&(h&&(r.state===e.NOMATCH?a.ast.setLength(o):a.ast.up(T.index,b.name,n,r.phraseLength)),r.pFrame=g,r.state===e.NOMATCH?(r.uFrame.pop(p),r.pFrame.pop(f)):b.isBkr&&(r.pFrame.savePhrase(b.lower,n,r.phraseLength),r.uFrame.savePhrase(b.lower,n,r.phraseLength)))},Y=function(t,n,s){let o,h,l,p,f,g;const d=c[t],M=b[d.index];s.UdtIndex=M.index;const E=!H();E&&(l=a.ast&&a.ast.udtDefined(d.index),l&&(h=w.length+d.index,o=a.ast.getLength(),a.ast.down(h,M.name)),p=s.uFrame.length(),f=s.pFrame.length(),s.uFrame.push(),s.pFrame.push(),g=s.pFrame,s.pFrame=new $);const A=i-n;T[d.index](s,u,n,m),function(t,n,a){if(n.phraseLength>a){let e=`${r}opUDT(${t.name}): callback function error: `;throw e+=`sysData.phraseLength: ${n.phraseLength}`,e+=` must be <= remaining chars: ${a}`,new Error(e)}switch(n.state){case e.ACTIVE:throw new Error(`${r}opUDT(${t.name}): callback function return error. ACTIVE state not allowed.`);case e.EMPTY:if(!1===t.empty)throw new Error(`${r}opUDT(${t.name}): callback function return error. May not return EMPTY.`);n.phraseLength=0;break;case e.MATCH:if(0===n.phraseLength){if(!1===t.empty)throw new Error(`${r}opUDT(${t.name}): callback function return error. May not return EMPTY.`);n.state=e.EMPTY}break;case e.NOMATCH:n.phraseLength=0;break;default:throw new Error(`${r}opUDT(${t.name}): callback function return error. Unrecognized return state: ${n.state}`)}}(M,s,A),E&&(l&&(s.state===e.NOMATCH?a.ast.setLength(o):a.ast.up(h,M.name,n,s.phraseLength)),s.pFrame=g,s.state===e.NOMATCH?(s.uFrame.pop(p),s.pFrame.pop(f)):M.isBkr&&(s.pFrame.savePhrase(M.lower,n,s.phraseLength),s.uFrame.savePhrase(M.lower,n,s.phraseLength)))},R=function(t,n,r){l.push({lookAround:e.LOOKAROUND_AHEAD,anchor:n,charsEnd:i,charsLength:h}),i=u.length,h=u.length-o,s(t+1,n,r);const a=l.pop();switch(i=a.charsEnd,h=a.charsLength,r.phraseLength=0,r.state){case e.EMPTY:case e.MATCH:r.state=e.EMPTY;break;case e.NOMATCH:r.state=e.NOMATCH;break;default:throw new Error(`opAND: invalid state ${r.state}`)}},B=function(t,n,r){l.push({lookAround:e.LOOKAROUND_AHEAD,anchor:n,charsEnd:i,charsLength:h}),i=u.length,h=u.length-o,s(t+1,n,r);const a=l.pop();switch(i=a.charsEnd,h=a.charsLength,r.phraseLength=0,r.state){case e.EMPTY:case e.MATCH:r.state=e.NOMATCH;break;case e.NOMATCH:r.state=e.EMPTY;break;default:throw new Error(`opNOT: invalid state ${r.state}`)}},I=function(t,n,r){r.state=e.NOMATCH,r.phraseLength=0,r.state=0===n?e.EMPTY:e.NOMATCH},v=function(t,n,r){r.state=e.NOMATCH,r.phraseLength=0,r.state=n===u.length?e.EMPTY:e.NOMATCH},U=function(t,n,r){switch(l.push({lookAround:e.LOOKAROUND_BEHIND,anchor:n}),s(t+1,n,r),l.pop(),r.phraseLength=0,r.state){case e.EMPTY:case e.MATCH:r.state=e.EMPTY;break;case e.NOMATCH:r.state=e.NOMATCH;break;default:throw new Error(`opBKA: invalid state ${r.state}`)}},K=function(t,n,r){switch(l.push({lookAround:e.LOOKAROUND_BEHIND,anchor:n}),s(t+1,n,r),l.pop(),r.phraseLength=0,r.state){case e.EMPTY:case e.MATCH:r.state=e.NOMATCH;break;case e.NOMATCH:r.state=e.EMPTY;break;default:throw new Error(`opBKN: invalid state ${r.state}`)}};s=function(t,n,r){let o=!0;const h=c[t];if(g+=1,g>A)throw new Error(`parser: maximum number of node hits exceeded: ${A}`);if(p+=1,p>f&&(f=p,f>E))throw new Error(`parser: maximum parse tree depth exceeded: ${E}`);if(r.refresh(),null!==a.trace){const e=N();a.trace.down(h,r.state,n,r.phraseLength,e.anchor,e.lookAround)}if(l[l.length-1].lookAround===e.LOOKAROUND_BEHIND)switch(h.type){case e.ALT:P(t,n,r);break;case e.CAT:!function(t,n,r){let o,h,i,l;const u=c[t],p=r.uFrame.length(),f=r.pFrame.length();a.ast&&(h=a.ast.getLength()),o=!0,i=n,l=0;for(let t=u.children.length-1;t>=0;t-=1)if(s(u.children[t],i,r),i-=r.phraseLength,l+=r.phraseLength,r.state===e.NOMATCH){o=!1;break}o?(r.state=0===l?e.EMPTY:e.MATCH,r.phraseLength=l):(r.state=e.NOMATCH,r.phraseLength=0,r.uFrame.pop(p),r.pFrame.pop(f),a.ast&&a.ast.setLength(h))}(t,n,r);break;case e.REP:!function(t,n,r){let o,h,i,l;const u=c[t];h=n,i=0,l=0;const p=r.uFrame.length(),f=r.pFrame.length();for(a.ast&&(o=a.ast.getLength());!(h<=0)&&(s(t+1,h,r),r.state!==e.NOMATCH)&&r.state!==e.EMPTY&&(l+=1,i+=r.phraseLength,h-=r.phraseLength,l!==u.max););r.state===e.EMPTY||l>=u.min?(r.state=0===i?e.EMPTY:e.MATCH,r.phraseLength=i):(r.state=e.NOMATCH,r.phraseLength=0,r.uFrame.pop(p),r.pFrame.pop(f),a.ast&&a.ast.setLength(o))}(t,n,r);break;case e.RNM:y(t,n,r);break;case e.UDT:Y(t,n,r);break;case e.AND:R(t,n,r);break;case e.NOT:B(t,n,r);break;case e.TRG:!function(t,n,r){const a=c[t];if(r.state=e.NOMATCH,r.phraseLength=0,n>0){const t=u[n-1];a.min<=t&&t<=a.max&&(r.state=e.MATCH,r.phraseLength=1)}}(t,n,r);break;case e.TBS:!function(t,n,r){let a;const s=c[t];r.state=e.NOMATCH;const o=s.string.length,h=n-o;if(h>=0){for(a=0;a<o;a+=1)if(u[h+a]!==s.string[a])return;r.state=e.MATCH,r.phraseLength=o}}(t,n,r);break;case e.TLS:!function(t,n,r){let a;const s=c[t];r.state=e.NOMATCH;const o=s.string.length;if(0===o)return void(r.state=e.EMPTY);const h=n-o;if(h>=0){for(let e=0;e<o;e+=1)if(a=u[h+e],a>=65&&a<=90&&(a+=32),a!==s.string[e])return;r.state=e.MATCH,r.phraseLength=o}}(t,n,r);break;case e.BKR:!function(t,n,r){let a,s,o,h;const i=c[t];r.state=e.NOMATCH,r.phraseLength=0,h=i.index<w.length?w[i.index].lower:b[i.index-w.length].lower;const l=i.bkrMode===e.BKR_MODE_PM?r.pFrame.getPhrase(h):r.uFrame.getPhrase(h),p=i.bkrCase===e.BKR_MODE_CI;if(null===l)return;const f=l.phraseIndex,g=l.phraseLength;if(0===g)return r.state=e.EMPTY,void(r.phraseLength=0);const d=n-g;if(d>=0){if(p){for(a=0;a<g;a+=1)if(s=u[d+a],o=u[f+a],s>=65&&s<=90&&(s+=32),o>=65&&o<=90&&(o+=32),s!==o)return;r.state=e.MATCH,r.phraseLength=g}else for(a=0;a<g;a+=1)if(s=u[d+a],o=u[f+a],s!==o)return;r.state=e.MATCH,r.phraseLength=g}}(t,n,r);break;case e.BKA:U(t,n,r);break;case e.BKN:K(t,n,r);break;case e.ABG:I(0,n,r);break;case e.AEN:v(0,n,r);break;default:o=!1}else switch(h.type){case e.ALT:P(t,n,r);break;case e.CAT:!function(t,n,r){let o,h,i,l;const u=c[t],p=r.uFrame.length(),f=r.pFrame.length();a.ast&&(h=a.ast.getLength()),o=!0,i=n,l=0;for(let t=0;t<u.children.length;t+=1){if(s(u.children[t],i,r),r.state===e.NOMATCH){o=!1;break}i+=r.phraseLength,l+=r.phraseLength}o?(r.state=0===l?e.EMPTY:e.MATCH,r.phraseLength=l):(r.state=e.NOMATCH,r.phraseLength=0,r.uFrame.pop(p),r.pFrame.pop(f),a.ast&&a.ast.setLength(h))}(t,n,r);break;case e.REP:!function(t,n,r){let o,h,l,u;const p=c[t];if(0===p.max)return r.state=e.EMPTY,void(r.phraseLength=0);h=n,l=0,u=0;const f=r.uFrame.length(),g=r.pFrame.length();for(a.ast&&(o=a.ast.getLength());!(h>=i)&&(s(t+1,h,r),r.state!==e.NOMATCH)&&r.state!==e.EMPTY&&(u+=1,l+=r.phraseLength,h+=r.phraseLength,u!==p.max););r.state===e.EMPTY||u>=p.min?(r.state=0===l?e.EMPTY:e.MATCH,r.phraseLength=l):(r.state=e.NOMATCH,r.phraseLength=0,r.uFrame.pop(f),r.pFrame.pop(g),a.ast&&a.ast.setLength(o))}(t,n,r);break;case e.RNM:y(t,n,r);break;case e.UDT:Y(t,n,r);break;case e.AND:R(t,n,r);break;case e.NOT:B(t,n,r);break;case e.TRG:!function(t,n,r){const a=c[t];r.state=e.NOMATCH,n<i&&a.min<=u[n]&&u[n]<=a.max&&(r.state=e.MATCH,r.phraseLength=1)}(t,n,r);break;case e.TBS:!function(t,n,r){let a;const s=c[t],o=s.string.length;if(r.state=e.NOMATCH,n+o<=i){for(a=0;a<o;a+=1)if(u[n+a]!==s.string[a])return;r.state=e.MATCH,r.phraseLength=o}}(t,n,r);break;case e.TLS:!function(t,n,r){let a,s;const o=c[t];r.state=e.NOMATCH;const h=o.string.length;if(0!==h){if(n+h<=i){for(a=0;a<h;a+=1)if(s=u[n+a],s>=65&&s<=90&&(s+=32),s!==o.string[a])return;r.state=e.MATCH,r.phraseLength=h}}else r.state=e.EMPTY}(t,n,r);break;case e.BKR:!function(t,n,r){let a,s,o,h;const l=c[t];r.state=e.NOMATCH,h=l.index<w.length?w[l.index].lower:b[l.index-w.length].lower;const p=l.bkrMode===e.BKR_MODE_PM?r.pFrame.getPhrase(h):r.uFrame.getPhrase(h),f=l.bkrCase===e.BKR_MODE_CI;if(null===p)return;const g=p.phraseIndex,d=p.phraseLength;if(0!==d){if(n+d<=i){if(f){for(a=0;a<d;a+=1)if(s=u[n+a],o=u[g+a],s>=65&&s<=90&&(s+=32),o>=65&&o<=90&&(o+=32),s!==o)return;r.state=e.MATCH,r.phraseLength=d}else for(a=0;a<d;a+=1)if(s=u[n+a],o=u[g+a],s!==o)return;r.state=e.MATCH,r.phraseLength=d}}else r.state=e.EMPTY}(t,n,r);break;case e.BKA:U(t,n,r);break;case e.BKN:K(t,n,r);break;case e.ABG:I(0,n,r);break;case e.AEN:v(0,n,r);break;default:o=!1}if(!H()&&n+r.phraseLength>M&&(M=n+r.phraseLength),null!==a.stats&&a.stats.collect(h,r),null!==a.trace){const e=N();a.trace.up(h,r.state,n,r.phraseLength,e.anchor,e.lookAround)}return p-=1,o}}}}]);
//# sourceMappingURL=8767-440c8c68eb3312a1.js.map