(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1877],{70056:function(e,t,n){Promise.resolve().then(n.t.bind(n,82417,23)),Promise.resolve().then(n.bind(n,62564)),Promise.resolve().then(n.bind(n,22726)),Promise.resolve().then(n.bind(n,94972)),Promise.resolve().then(n.bind(n,85938)),Promise.resolve().then(n.t.bind(n,19933,23)),Promise.resolve().then(n.bind(n,83573)),Promise.resolve().then(n.t.bind(n,77256,23)),Promise.resolve().then(n.t.bind(n,14400,23)),Promise.resolve().then(n.bind(n,56991)),Promise.resolve().then(n.bind(n,59318)),Promise.resolve().then(n.bind(n,79006)),Promise.resolve().then(n.bind(n,41916)),Promise.resolve().then(n.bind(n,53896)),Promise.resolve().then(n.bind(n,78400)),Promise.resolve().then(n.t.bind(n,10979,23)),Promise.resolve().then(n.t.bind(n,40558,23))},29822:function(e,t,n){"use strict";n.d(t,{d:function(){return r}});var i=n(10308);const a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return["WEB3_STAKING_QUERY_KEY",...t]};var s=n(99147);const r=e=>{let{settingId:t,amount:n}=e;return(0,i.useQuery)({queryKey:a("get-staking-karma",t,n),queryFn:()=>(async e=>{let{settingId:t,amount:n}=e;return s.Z.get("v2/karma/staking/".concat(t,"/karma-reward-estimate"),{searchParams:{tokenAmount:n}}).json()})({settingId:t,amount:n}),enabled:Boolean(n)&&Number(n)>0})}},94972:function(e,t,n){"use strict";n.d(t,{MySQRStakingHistorySection:function(){return B}});var i=n(39804),a=n(43519),s=n(10376),r=n(55559),o=n.n(r),l=n(53321),c=n(52338),d=n(94173),u=n(23026),m=n(44302),h=n(33269),p=n(25951);const k=()=>{const{data:e}=(0,l.ckX)(),{data:t}=(0,u.Z)(),{data:n}=(0,d.Z)();return(0,i.jsx)("div",{style:{width:"100%"},children:(0,i.jsxs)(m.X,{slideWidth:1/3,spacing:"8px",centerSlides:!1,breakpoints:{SMALL:{slideWidth:.96}},children:[(0,i.jsx)(m.X.Slide,{children:(0,i.jsx)(p.r,{caption:"SQR Staking Amount",tooltip:"Amount of tokens you locked in Staking Pools",children:(0,i.jsx)(h.$,{value:(0,c.K$)(t||0,{options:{minimumFractionDigits:2}})})})}),(0,i.jsx)(m.X.Slide,{children:(0,i.jsx)(p.r,{caption:"Locked for Membership",tooltip:"Amount of SQR you locked to get Membership on MagicStore",children:(0,i.jsx)(h.$,{value:(0,c.K$)((null==n?void 0:n.data.attributes.membership)||0,{options:{minimumFractionDigits:2}})})})}),(0,i.jsx)(m.X.Slide,{children:(0,i.jsx)(p.r,{caption:"SQRv Balance",tooltip:"This is your Total Voting Power (TVP), expressed in SQRv points, calculated as TVP = BVP + TSVP. BVP is the number of SQR tokens you hold, and TSVP depends on how many SQR tokens you stake and the duration of your stake (Not real-time, 1-hour delay).",children:(0,i.jsx)(h.$,{value:(0,c.K$)((null==e?void 0:e.score)||0,{options:{minimumFractionDigits:2}})})})})]})})};var w=n(93889),b=n(2267),v=n(36172),g=n(79781),x=n(95230),y=n(77689);const S=e=>{let{claimableAmount:t,withdrawn:n}=e;const i=n?0:t;return 0===i?"0 SQR":i>0&&i<.01?"<0.01":"".concat((0,c.K$)(i,{options:{minimumFractionDigits:2}})," SQR")};var P=n(6843),j=n(43513),A=n(27779),f=n(67330),_=n(91818),D=n(8325),Q=n(71287),R=n(94619),C=n(19753),T=n(56901),I=n(14092),N=n(94095),E=n(87471),Z=n.n(E);const M=e=>{let{claimableAmount:t,withdrawn:n,endDate:a,stakeId:s,stakingTypeId:r}=e;const{refetch:o}=(0,Q.Z)(),{data:l}=(0,R.Z)(),{mutateAsync:c,isPending:d}=(0,D.X)(),{mutateAsync:u,isPending:m}=(0,C.D)(),h=new Date(a),p=new Date>=h,k=n,w=k?0:t,b=w>0,v=p,g=d||m,x=null==l?void 0:l.find((e=>e.id===r)),y=(0,_.UO)(f.VQ.id,null==x?void 0:x.contractAddress);return(0,i.jsxs)("div",{className:Z().container,children:[!k&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(T.z,{disabled:g||!b,onClick:async()=>{try{if(!x)throw new Error("Unable to get staking type. Please contract support.");const{success:e}=await c({stakeType:x,stakeId:s});e&&P.toast.success("Successfully claimed ".concat((0,A.w)(w)," SQR")),await o()}catch(e){P.toast.error((0,N.e)(e))}},minWidth:116,children:"Claim Reward"}),(0,i.jsx)(T.z,{disabled:g||!v,onClick:async()=>{try{if(!x)throw new Error("Unable to get staking type. Please contract support.");const{success:e}=await u({stakeId:s,stakeType:x});e&&P.toast.success("Successfully closed"),await o()}catch(e){P.toast.error((0,N.e)(e))}},variant:"secondary",minWidth:116,children:"Unstake"})]}),(0,i.jsx)(I.u,{side:"top",caption:"View Contract",trigger:(0,i.jsx)("span",{children:(0,i.jsx)(T.z,{href:y,variant:"secondary",target:"_blank","aria-label":y,children:(0,i.jsx)(j.Z,{className:Z().icon})})})})]})};var V=n(53733),W=n(79253),F=n.n(W);const K=e=>{let{stakedAmount:t,withdrawn:n,endDate:a}=e;const s="".concat((0,c.K$)(t,{options:{minimumFractionDigits:2}})," SQR"),r=((e,t)=>{if(e)return"Unstaked";if(t){const e=new Date,n=new Date(t);return e>n?"Unlocked":"Locked until ".concat((0,V.O)(n.getTime()))}return""})(n,a);return(0,i.jsxs)("div",{className:F().container,title:"".concat(s," ").concat(r),children:[(0,i.jsx)(y.Z,{variant:"caption-s-strong",isEllipsis:!0,noWrap:!0,title:s,children:s}),(0,i.jsx)(y.Z,{variant:"caption-s",color:"tertiary",isEllipsis:!0,noWrap:!0,title:r,children:r})]})},L=[{name:"stakedAmount",label:"SQR Staking Amount",render:e=>{let{row:t}=e;return(0,i.jsx)(K,{stakedAmount:t.stakedAmount,withdrawn:t.withdrawn,endDate:t.endDate})}},{name:"claimableAmount",label:"Claimable SQR",render:e=>{let{row:t}=e;return(0,i.jsx)(S,{claimableAmount:t.claimableAmount,withdrawn:t.withdrawn})}},{name:"apr",label:"APR",render:e=>{let{row:t}=e;return(0,v.T3)(t.apr/1e3,{minimumFractionDigits:2})}},{name:"lockPeriodInSeconds",label:"Lock Period",render:e=>{let{row:t}=e;return(0,b.h)(t.lockPeriodInSeconds)}},{name:"",label:"",render:e=>{let{row:t}=e;return(0,i.jsx)(M,{claimableAmount:t.claimableAmount,withdrawn:t.withdrawn,endDate:t.endDate,stakeId:t.stakeId,stakingTypeId:t.stakingTypeId})},contentPadding:"none"}],$=(0,i.jsx)(y.Z,{variant:"caption-s",color:"tertiary",textAlign:"center",children:"No stakes yet."}),U=()=>{var e;const[t,n]=(0,w.useState)(0),{isLoading:s,userEvmWallet:r}=(0,a.useAuth)(),o=null==r||null===(e=r.attributes)||void 0===e?void 0:e.address,{data:l=[],isLoading:c}=(0,g.Z)({walletAddress:o}),d=s||c,u=(0,w.useMemo)((()=>[...l].sort(((e,t)=>{if(e.withdrawn!==t.withdrawn)return e.withdrawn?1:-1;const n=e.claimableAmount>0;return n===t.claimableAmount>0?0:n?-1:1}))),[l]),m=(0,w.useMemo)((()=>u.slice(0,5*(t+1))),[u,t]),h=u.length>m.length,p=u.length-m.length;return(0,i.jsx)(x.i,{columns:L,data:m,isLoading:d,emptyStateComponent:$,gridTemplateColumns:"200px 148px repeat(2, minmax(96px, 140px)) 284px",showNextConfig:{isVisible:h,isDisabled:d,onClick:()=>{n((e=>e+1))},count:Math.min(5,p)}})},B=()=>{var e;const{userEvmWallet:t}=(0,a.useAuth)();if(null==t||null===(e=t.attributes)||void 0===e?void 0:e.address)return(0,i.jsx)(s.N,{title:"My SQR Staking History",children:(0,i.jsxs)("div",{className:o().container,children:[(0,i.jsx)(k,{}),(0,i.jsx)(U,{})]})})}},55559:function(e){e.exports={container:"MySQRStakingHistorySection_container__wt_WK"}},87471:function(e){e.exports={container:"ControlsCell_container__A8TZz",icon:"ControlsCell_icon__LvB7y"}},79253:function(e){e.exports={container:"StakingAmountCell_container__m1Fhs"}}}]);