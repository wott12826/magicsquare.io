"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1633,60067],{212777:function(e,t,n){n.d(t,{Z:function(){return r}});var s=n(939804),a=n(206843),o=n(347177),i=n.n(o);function r(e){let{children:t,size:n="md",variant:o="filled",minWidth:r,toastId:c,onClick:l,closeOnClick:d=!0,className:u,...w}=e;const g={sm:"text-[10px]",md:"text-xs",lg:"text-sm"}[n],h={outlined:"border border-[#005ab9]",ghost:"border-none bg-none text-primary-600",filled:""}[o];return(0,s.jsx)("button",{type:"button",onClick:()=>{d&&a.toast.dismiss(c),l()},className:i()("flex items-center justify-center gap-2 rounded text-neutral-50","py-2 px-4 transition whitespace-nowrap font-semibold",{"bg-[#005ab9]":"filled"===o},g,h,u),...w,children:t})}},535276:function(e,t,n){n.d(t,{z:function(){return r}});var s=n(939804),a=n(183941),o=n(637796),i=n(661238);const r={UNPAID_GAS_FEES:"UNPAID_GAS_FEES",SIGN_MESSAGE_REQUEST:"SIGN_MESSAGE_REQUEST"};t.Z=e=>{let{error:t,justReturnHandledMessage:n,unknownExceptionReplaceMessage:c,details:l}=e;return(0,i.Z)({error:t,replaceErrorMessageCallback:e=>{var n,i,d;if(e.includes("null is not an object (evaluating"))return{newMessage:"Browser probably blocked opening that link.\nPlease allow pop-ups in your browser's settings"};if(e===a.T1.REFLECT_GET_CALLED_ON_NON_OBJECT)return(null==l?void 0:l.walletType)?{newMessage:(i=l.walletType,d?(0,s.jsxs)("span",{children:["To run ",(0,s.jsx)("b",{children:i}),", please turn off ",(0,s.jsx)("b",{children:d})," extension"]}):(0,s.jsxs)("span",{children:["Please install the ",(0,s.jsx)("b",{children:i})," extension!"]}))}:{newMessage:"Unsuccessful text replacement: ".concat(e)};if(e===a.T1.RESOURCE_UNAVAILABLE||e.includes(a.T1.RESOURCE_UNAVAILABLE2))return{newMessage:"Failed to reach your wallet provider/extension. \n Please check it out manually and try again."};if(e===a.dT.PLEASE_CONNECT_TO_PROCEED)return{newMessage:e,toastOptions:{type:"info"}};if(e===a.T1.AN_INTERNAL_ERROR_HAS_OCCURRED)return{newMessage:"Looks like you don't have wallets installed in your browser, download any EVM wallet"};if(e===a.dT.INVALID_TOKEN_DATA)return{newMessage:"Wallet connection failed"};if(e.toLowerCase().includes("insufficient funds"))return{newMessage:"You do not have enough native tokens to cover the gas fees for this transaction. Please add funds to your wallet and try again."};if(/user rejected the request|user rejected request/i.test(e))return(null==l?void 0:l.scope)===r.SIGN_MESSAGE_REQUEST?{newMessage:"You declined the sign message request. Please start the process again"}:(null==l?void 0:l.scope)===r.UNPAID_GAS_FEES?{newMessage:"Transaction failed due to unpaid gas fees. Please try again"}:{newMessage:"User rejected the request"};if(e.includes("user rejected transaction"))return{newMessage:"User rejected the transaction"};if((0,o.k0)(t)&&"HAS_GITCOIN_SCORE"===(null===(n=t.data)||void 0===n?void 0:n.type))return{newMessage:a.T1.WALLET_HAS_GITCOIN_SCORE};if(e.includes("transaction underpriced"))return{newMessage:"This transaction cannot be processed because the fee is too low. To fix this, either try again later, possibly when the network is less busy, or increase the gas fee manually in the transaction settings.",toastOptions:{autoClose:3e4}};if(e.includes("invalid address or ENS name"))return{newMessage:"Invalid address or ENS name"};for(const t of(null==l?void 0:l.customReplaceMessageSet)||[]){const[n,s]=Object.entries(t)[0];if(null==e?void 0:e.toLowerCase().includes(null==n?void 0:n.toLowerCase()))return{newMessage:s}}return c?(console.debug({error:t}),{newMessage:c}):{newMessage:e}},justReturnHandledMessage:n})}},891818:function(e,t,n){n.d(t,{xz:function(){return r},fN:function(){return a},sl:function(){return E},o$:function(){return f.o}});var s=n(981395);const a=e=>{const t=s.g.chains.find((t=>t.id===e));var n;return t?null!==(n=t.name.split(" ").at(0))&&void 0!==n?n:"":"Unknown Network"};var o=n(308744),i=n(183941);const r=e=>Object.values(o).find((t=>t.id===e))||i.VQ;var c=n(233552),l=n(206843),d=n(706560),u=n(964072),w=n(661238),g=n(4197),h=n(308411);const E=async e=>{const{targetChain:t=i.VQ,walletType:n,address:a,requiredSqrAmount:o}=e,{chainId:r}=(0,d.D)(s.g),f=s.g.chains.find((e=>e.id===r));if(void 0===f)throw new Error(i.dT.RECONNECT_REQUEST);const m=(0,g.Z)(t,o);if(f.id!==t.id){const o=(new Date).getTime();try{return await Promise.race([(0,u.c)(s.g,{chainId:t.id}),(0,h.Z)({walletType:n,address:a,toastId:o,title:"Waiting for the user to switch the chain...",showExtraInfo:!c.isDesktop})]),l.toast.dismiss(o),await E(e)}catch(t){l.toast.dismiss(o);const n=(0,w.S)(t);if(n.message===i.dT.RETRY)return E(e);if(n.message===m.nativeBalance)throw t;throw new Error(m.chain)}}return m};var f=n(682078)},682078:function(e,t,n){n.d(t,{o:function(){return l}});var s=n(893889),a=n(964072),o=n(530661),i=n(904373),r=n(981395),c=n(535276);const l=()=>{const{disconnectAsync:e}=(0,o.useDisconnect)(),{chain:t}=(0,i.useAccount)(),[n,l]=(0,s.useState)(!1);return{switchChain:(0,s.useCallback)((async n=>{let{destChainId:s,catchErrors:o=!1,terminateConnectionOnError:i=!0}=n;try{s&&(null==t?void 0:t.id)&&t.id!==s&&(l(!0),await(0,a.c)(r.g,{chainId:s}))}catch(t){if(i&&await e(),!o)throw t;(0,c.Z)({error:t})}finally{l(!1)}}),[e,null==t?void 0:t.id]),activeChain:null==t?void 0:t.id,isSwitching:n}}},760067:function(e,t,n){n.r(t);const s={isEvmExtensionActive:()=>Boolean(void 0!==window.ethereum),isTrustWalletExtensionActive:()=>Boolean(void 0!==window.ethereum&&window.ethereum.isTrust),isOKXWalletExtensionActive:()=>Boolean(void 0!==window.okxwallet),isMetamaskExtensionActive:()=>Boolean(void 0!==window.ethereum&&window.ethereum.isMetaMask),getProvider:()=>window.ethereum};t.default=s},4197:function(e,t,n){n.d(t,{N:function(){return a}});var s=n(183941);const a=.002;t.Z=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.VQ,t=arguments.length>1?arguments[1]:void 0;return{chain:'Ensure you are using the "'.concat(e.name,'" network.'),nativeBalance:"Your wallet must have at least ".concat(a," BNB for transaction gas fees."),...t?{sqrBalance:"Insufficient SQR balance. Should not be less than ".concat(t,".")}:{}}}},596164:function(e,t){t.Z=e=>({isSimpleSign:"simple"===e,isSIWE:"SIWE"===e,isSimpleWithNonce:"simple-with-nonce"===e})},75967:function(e,t,n){var s=n(939804),a=n(183941);t.Z=e=>{const t=a.Id[e];return(0,s.jsx)("span",{className:"icon",children:(0,s.jsx)(t,{})})}},124952:function(e,t){t.Z=e=>{const t={borderRadius:"8px",background:"#130e3a",color:"#fff"},n={WalletConnect:{...t,background:"linear-gradient(270deg, #47a1ff 0%, #0059c3 100%)"},WalletConnect2:{...t,background:"linear-gradient(270deg, #47a1ff 0%, #0059c3 100%)"},Phantom:{...t,background:"linear-gradient(90deg, #926ccf 0%, #523fc1 100%)"},Metamask:{...t,background:"linear-gradient(90deg, #F6851B 0%, #f9a461 100%)"},OKX:{...t,background:"linear-gradient(90deg, #000000 0%, #000000b3 100%)"},Trust:{...t,background:"linear-gradient(90deg, #0500ff 0%, #45f899 100%)"},Passkey:t,EVM:t,SOLANA:t};return t||n[e]}},334269:function(e,t){t.Z=e=>{var t;return null!==(t={Metamask:"bg-[#fa7a02] hover:bg-[#de6c00]",WalletConnect:"",WalletConnect2:"",OKX:"",Phantom:"",Trust:"",EVM:"",Passkey:"",SOLANA:""}[e])&&void 0!==t?t:""}},677915:function(e,t){t.Z=e=>({isEVM:"EVM"===e,isMetamask:"Metamask"===e,isOKX:"OKX"===e,isPhantom:"Phantom"===e,isTrust:"Trust"===e,isWalletConnect:"WalletConnect"===e,isPasskey:"Passkey"===e,isWalletConnect2:"WalletConnect2"===e})},1633:function(e,t,n){n.d(t,{Z:function(){return V}});var s=n(893889),a=n(206843),o=n(706560),i=n(367781),r=n(181199),c=n(904373),l=n(948848),d=n(530661),u=n(349391),w=n(553321),g=n(720319),h=n(981395),E=n(183941),f=n(661238),m=n(535276),T=n(891818),p=n(233552),C=n(760067),y=n(121261);var v=e=>{switch(e){case"EVM":return{isReady:!!p.isDesktop&&C.default.isEvmExtensionActive(),errorMessage:"To use this feature, you need an EVM wallet extension (e.g., Metamask) installed in your browser or connect using WalletConnect."};case"Phantom":return{isReady:!!p.isDesktop&&y.default.isPhantomWalletInstalled(),errorMessage:"To proceed, please install the Phantom wallet extension in your browser."};case"Trust":return{isReady:!!p.isDesktop&&C.default.isTrustWalletExtensionActive(),errorMessage:"To proceed, please install the Trust wallet extension in your browser."};case"Metamask":return{isReady:!!p.isDesktop&&C.default.isMetamaskExtensionActive(),errorMessage:"To proceed, please install the Metamask extension in your browser."};case"OKX":return{isReady:!!p.isDesktop&&C.default.isOKXWalletExtensionActive(),errorMessage:"To proceed, please install the OKX wallet extension in your browser."};default:return{isReady:!0,errorMessage:""}}},S=n(162814),N=n(375173);var _=e=>{if(!e)throw new Error(E.dT.EMPTY_ADDRESS);return(0,N.getAddress)(e)},M=n(596164),A=n(75967),b=n(124952),k=n(677915);var x=()=>{const e="WALLETCONNECT_DEEPLINK_CHOICE",t={"https://link.trustwallet.com/wc":{name:"Trust Wallet",href:"trust://"},"https://metamask.app.link/wc":{name:"Metamask",href:"metamask://"}},n=window.localStorage.getItem(e);if(n)try{const{href:s}=JSON.parse(n);if((["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document)&&s in t){const n=t[s];window.localStorage.setItem(e,JSON.stringify(n))}}catch(e){console.error("CustomError: WalletConnect force redirect error",e)}},O=n(610512);let R=null;var I=()=>{const{open:e}=(0,O.Ig)(),{disconnectAsync:t}=(0,d.useDisconnect)(),{open:n}=(0,O.Tg)(),{address:a,chain:o}=(0,c.useAccount)();return(0,s.useEffect)((()=>{!n&&R&&(R(a?{address:a,chain:o}:null),R=null)}),[a,o,n]),(0,s.useCallback)((async()=>(await t(),await e({view:"Connect"}),new Promise((e=>{R=e})))),[e,t])},P=n(308411);var D=async e=>{let{walletType:t,isDesktop:n}=e;if(n||"WalletConnect"!==t)return;const s=(0,b.Z)(t),o=(new Date).getTime(),i=new Promise((e=>{a.toast.loading("Loading...",{toastId:o,style:s});const t=()=>{document.hidden||setTimeout((()=>{a.toast.dismiss(o),e(null),window.removeEventListener("visibilitychange",t)}),1e3)};window.addEventListener("visibilitychange",t)}));document.hidden&&await i},L=n(888908),W=n(980461),Z=n(569720),j=n(778037);var U=async e=>{let{address:t,signature:n,message:s,signType:a,nonce:o}=e;if(!(Z.verifyMessage(s,n).toLowerCase()===t.toLowerCase()))throw new Error("Signature verification failed: Address does not match");const{isSIWE:i}=(0,M.Z)(a);if(i)try{const e=new r.SiweMessage(s);if((await e.verify({signature:n})).data.nonce!==o)throw new Error("Signature verification failed: Invalid nonce.")}catch(e){throw(0,j.R)("isDev")&&console.debug(e),new Error("Signature verification failed: Invalid Message.")}};function V(){const e=(0,c.useAccount)(),{open:t}=(0,O.Ig)(),{open:n}=(0,O.Tg)(),{connectAsync:p,connectors:C}=(0,l.useConnect)(),{disconnectAsync:N}=(0,d.useDisconnect)(),{signMessageAsync:R}=(0,u.useSignMessage)(),{isDesktop:Z}=(0,g.M)(),[j,V]=(0,s.useState)(!1),{mutateAsync:Q}=(0,w.ntg)(),B=(0,s.useRef)(null),G=I();(0,s.useEffect)((()=>{var t;!n&&e.address&&(null===(t=B.current)||void 0===t||t.call(B,e.address),B.current=null)}),[n,e.address]);const Y=async()=>{await N(),(0,S.Z)()},q=async n=>{let{walletType:s,disabledCache:a,chainId:o=E.VQ.id,shouldWaitWeb3Modal:r,shouldReconnect:c}=n;const{isPhantom:l,isWalletConnect:d,isWalletConnect2:u,isPasskey:w}=(0,k.Z)(s);if(l)try{return await y.default.getAddress()}catch(e){throw new Error("An error occurred while connecting to Solana")}if(w){if(!c&&e.address)return e.address;const t=C.find((e=>"network.passkeys"===e.id));if(!t)throw new Error("Passkey is not available");const n=(await p({connector:t})).accounts[0];if(!n)throw new Error(E.dT.PLEASE_CONNECT_TO_PROCEED);return n}if(u){if(!c&&e.address)return e.address;const t=await G();if(!(null==t?void 0:t.address))throw new Error(E.dT.PLEASE_CONNECT_TO_PROCEED);return t.address}if(d){if(e.address)return e.address;if(await t({view:"Connect"}),!r)throw new Error(E.dT.PLEASE_CONNECT_TO_PROCEED);const n=await new Promise((e=>{B.current=e}));if(!n)throw new Error(E.dT.PLEASE_CONNECT_TO_PROCEED);return n}if(!a&&i.Z.get(E.mJ.MSQ_CONNECTED_WALLET_ADDRESS)&&i.Z.get(E.mJ.MSQ_CONNECTED_WALLET_TYPE)===s)return i.Z.get(E.mJ.MSQ_CONNECTED_WALLET_ADDRESS);const g=e.connector||C[0];return(await p({chainId:o,connector:g})).accounts[0]},K=async e=>{const{walletType:t,targetAddress:n,hideToasts:s=!1,disabledCache:o,chainId:i,shouldWaitWeb3Modal:r,shouldReconnect:c}=e,l=(new Date).getTime();try{const{isPhantom:e}=(0,k.Z)(t),d=(0,A.Z)("EVM"),u=(0,b.Z)("EVM");if(!s){const e=n?"Connecting to ".concat((0,W.Z)(n)):"Connecting...";a.toast.loading(e,{toastId:l,icon:d,style:u,closeOnClick:!0})}const w=await q({walletType:t,disabledCache:o,chainId:i,shouldWaitWeb3Modal:r,shouldReconnect:c});if(!w)throw new Error(E.dT.EMPTY_ADDRESS);let g=e?w:_(w);return n&&n.toLowerCase()!==g.toLowerCase()&&(g=await q({walletType:t,disabledCache:o,chainId:i,shouldWaitWeb3Modal:r,shouldReconnect:!0})),a.toast.update(l,{type:a.toast.TYPE.INFO,render:"Connected",icon:d,style:u,autoClose:3e3,isLoading:!1}),(0,L.Z)(g,t),g}catch(t){a.toast.dismiss(l);if((0,f.S)(t).message===E.dT.CONNECTOR_ALREADY_CONNECTED)return await Y(),K(e);throw t}};return{connectWallet:K,requestSign:async function t(n){const{walletType:s,shouldVerifyChain:i=!1,message:c,skipConnectStep:l,targetAddress:d,hideConnectToasts:u,hideConfirmToast:w,signType:g="simple",nonce:p,shouldReconnect:C}=n;let N=g;const{isPhantom:A,isWalletConnect:O,isWalletConnect2:I}=(0,k.Z)(s),{isReady:L,errorMessage:j}=v(s),{isSimpleSign:V,isSIWE:B,isSimpleWithNonce:G}=(0,M.Z)(N);if(A&&!V&&(N="simple"),!L)throw new Error(j);let q=null!=p?p:"";try{let t,n;const g=e.address&&e.isConnected;if(t=l&&g?_(e.address):await K({walletType:s,targetAddress:d,hideToasts:u,shouldReconnect:C}),!B&&!G||q||A||(q=await Q()),i){if(!await(0,T.sl)({address:t,walletType:s}))throw new Error("Failed to switch the chain. Please to it manually or try again later.")}O&&x(),w||await D({walletType:s,isDesktop:Z});const E=await(async e=>{let{address:t,message:n,nonce:s}=e;const a=t?"".concat(n,": ").concat((0,W.Z)(t)):n;switch(N){case"simple":return a;case"simple-with-nonce":return"".concat(a,"\nNonce: ").concat(s);case"SIWE":{if(!s)throw new Error("Getting a nonce failed");const{chainId:e}=(0,o.D)(h.H.wagmiConfig);try{return new r.SiweMessage({domain:window.location.host,address:t,statement:a,uri:window.location.origin,version:"1",chainId:e,nonce:s}).prepareMessage()}catch(e){throw console.debug(e),new Error("SIWE Message creation failed")}}}})({address:t,message:c,signType:N,nonce:q}),f=(0,b.Z)("EVM"),m=(new Date).getTime();if(!n){const e=O||I&&!Z;n=await Promise.race([(F=E,A?y.default.signMessage(F):R({message:F})),(0,P.Z)({walletType:s,address:t,toastId:m,showExtraInfo:e})])}A||await U({address:t,message:E,signature:n,signType:N,nonce:q}),a.toast.dismiss(m);const p="Message signed";return a.toast.success(p,{toastId:p,style:f}),{walletType:s,address:A?t:t.toLowerCase(),network:A?"SOLANA":"EVM",message:E,signature:n,v2:B}}catch(e){a.toast.dismiss();const o=(0,f.S)(e),i={...n,nonce:q};if(o.message===E.dT.CONNECTOR_NOT_FOUND)return(0,S.Z)(),t({...i,hideConfirmToast:!0});if(o.message===E.dT.RECONNECT_REQUEST)return await Y(),t(i);if(o.message===E.dT.RETRY)return t(i);(0,m.Z)({error:e,details:{walletType:s,scope:m.z.SIGN_MESSAGE_REQUEST}})}var F},isLoading:j,setIsLoading:V,web3Account:e}}},308411:function(e,t,n){var s=n(939804),a=n(206843),o=n(212777),i=n(183941),r=n(75967),c=n(124952),l=n(334269),d=n(980461);t.Z=e=>{let{address:t,title:n="Please approve the 'Sign In' request in your wallet...",description:u,toastId:w,walletType:g,showExtraInfo:h,hideRetryButton:E}=e;return new Promise(((e,f)=>{const m=(0,r.Z)(g),T=(0,c.Z)(g),p=(0,l.Z)(g),C=(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center gap-14",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center gap-6",children:[(0,s.jsx)("b",{className:"text-center",children:n}),h&&(0,s.jsxs)("p",{className:"text-center text-sm font-medium",children:["Request has been sent to your wallet app/extension.",(0,s.jsx)("br",{}),t&&(0,s.jsx)("i",{children:(0,d.Z)(t,{start:7})})]}),u&&(0,s.jsx)("span",{className:"text-center text-sm font-medium",children:u})]}),h&&(0,s.jsxs)(s.Fragment,{children:[!E&&(0,s.jsxs)(o.Z,{size:"lg",onClick:()=>{f(new Error(i.dT.RETRY))},toastId:w,minWidth:175,className:p,children:[m,"Try again"]}),(0,s.jsx)(o.Z,{size:"lg",onClick:()=>{f(new Error(i.dT.REQUEST_CANCELLED))},toastId:w,variant:"ghost",className:"opacity-60 hover:opacity-100 !text-neutral-50 bg-transparent",children:"Cancel"})]})]}),y={toastId:w,style:{...T,paddingBlock:h?"32px 16px":""},icon:!1};a.toast.loading(C,y)}))}},888908:function(e,t,n){var s=n(367781),a=n(183941);t.Z=(e,t)=>{s.Z.set(a.mJ.MSQ_CONNECTED_WALLET_ADDRESS,e),s.Z.set(a.mJ.MSQ_CONNECTED_WALLET_TYPE,t)}},121261:function(e,t,n){var s=n(367781),a=n(183941);const o=()=>{if(!window.solana)throw new Error("Solana is not available");return window.solana},i=()=>o().connect(),r={isPhantomWalletInstalled:()=>Boolean(window.solana&&window.solana.isPhantom),getProvider:o,connect:i,signMessage:async e=>{const t=o(),n=(new TextEncoder).encode(e),{signature:s}=await t.signMessage(n,"utf8");return(e=>{let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return window.btoa(t)})(s)},getAddress:async()=>{if(!window.solana)throw new Error("Solana is not available");return(await window.solana.connect()).publicKey.toString()},subscribeToAccountChanges:()=>{o().on("accountChanged",(()=>{var e,t;"Phantom"===s.Z.get(a.mJ.MSQ_CONNECTED_WALLET_TYPE)&&window&&"__logoutClient"in window&&(null===(e=(t=window).__logoutClient)||void 0===e||e.call(t))}))},sendTransaction:async e=>{const t=o();await i();const{signature:n}=await t.request({method:"signAndSendTransaction",params:{message:e,options:{skipPreflight:!0}}});return n}};t.default=r},980461:function(e,t){t.Z=function(e){let{start:t=6,end:n=4,ellipsis:s="..."}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.length<=t+n?e:"".concat(e.slice(0,t)).concat(s).concat(e.slice(-n))}}}]);
//# sourceMappingURL=1633-6f6b58d87567bc5f.js.map