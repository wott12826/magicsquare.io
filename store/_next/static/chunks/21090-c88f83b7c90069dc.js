"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[21090],{389960:function(t,e,n){n.d(e,{k:function(){return r}});class r extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const e=super.get(t);return super.has(t)&&void 0!==e&&(this.delete(t),super.set(t,e)),e}set(t,e){if(super.set(t,e),this.maxSize&&this.size>this.maxSize){const t=this.keys().next().value;t&&this.delete(t)}return this}}},975951:function(t,e,n){n.d(e,{S:function(){return a}});const r=new Map;function a({fn:t,id:e,shouldSplitBatch:n,wait:a=0,sort:s}){const o=async()=>{const e=c();i();const n=e.map((({args:t})=>t));0!==n.length&&t(n).then((t=>{s&&Array.isArray(t)&&t.sort(s);for(let n=0;n<e.length;n++){const{resolve:r}=e[n];r?.([t[n],t])}})).catch((t=>{for(let n=0;n<e.length;n++){const{reject:r}=e[n];r?.(t)}}))},i=()=>r.delete(e),c=()=>r.get(e)||[],u=t=>r.set(e,[...c(),t]);return{flush:i,async schedule(t){const{promise:e,resolve:r,reject:s}=function(){let t=()=>{},e=()=>{};return{promise:new Promise(((n,r)=>{t=n,e=r})),resolve:t,reject:e}}(),i=n?.([...c().map((({args:t})=>t)),t]);i&&o();return c().length>0?(u({args:t,resolve:r,reject:s}),e):(u({args:t,resolve:r,reject:s}),setTimeout(o,a),e)}}}},899896:function(t,e,n){n.d(e,{$:function(){return a}});const r=new(n(389960).k)(8192);function a(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(r.get(n))return r.get(n);const a=t().finally((()=>r.delete(n)));return r.set(n,a),a}},40545:function(t,e,n){n.d(e,{J:function(){return a}});var r=n(247230);function a(t,{delay:e=100,retryCount:n=2,shouldRetry:a=()=>!0}={}){return new Promise(((s,o)=>{const i=async({count:c=0}={})=>{try{const e=await t();s(e)}catch(t){if(c<n&&await a({count:c,error:t}))return(async({error:t})=>{const n="function"==typeof e?e({count:c,error:t}):e;n&&await(0,r.D)(n),i({count:c+1})})({error:t});o(t)}};i()}))}},334820:function(t,e,n){n.d(e,{x:function(){return i}});var r=n(686172);var a=n(240520);function s(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const o=s();function i(t,e={}){return{async request(n){const{body:s,onRequest:i=e.onRequest,onResponse:c=e.onResponse,timeout:u=e.timeout??1e4}=n,d={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:l,method:f,signal:m}=d;try{const e=await function(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise(((a,s)=>{(async()=>{let o;try{const i=new AbortController;n>0&&(o=setTimeout((()=>{r?i.abort():s(e)}),n)),a(await t({signal:i?.signal||null}))}catch(t){"AbortError"===t?.name&&s(e),s(t)}finally{clearTimeout(o)}})()}))}((async({signal:e})=>{const n={...d,body:Array.isArray(s)?(0,a.P)(s.map((t=>({jsonrpc:"2.0",id:t.id??o.take(),...t})))):(0,a.P)({jsonrpc:"2.0",id:s.id??o.take(),...s}),headers:{"Content-Type":"application/json",...l},method:f||"POST",signal:m||(u>0?e:null)},r=new Request(t,n),c=await(i?.(r,n))??{...n,url:t};return await fetch(c.url??t,c)}),{errorInstance:new r.W5({body:s,url:t}),timeout:u,signal:!0});let n;if(c&&await c(e),e.headers.get("Content-Type")?.startsWith("application/json"))n=await e.json();else{n=await e.text();try{n=JSON.parse(n||"{}")}catch(t){if(e.ok)throw t;n={error:n}}}if(!e.ok)throw new r.Gg({body:s,details:(0,a.P)(n.error)||e.statusText,headers:e.headers,status:e.status,url:t});return n}catch(e){if(e instanceof r.Gg)throw e;if(e instanceof r.W5)throw e;throw new r.Gg({body:s,cause:e,url:t})}}}}},240520:function(t,e,n){n.d(e,{P:function(){return r}});const r=(t,e,n)=>JSON.stringify(t,((t,n)=>{const r="bigint"==typeof n?n.toString():n;return"function"==typeof e?e(t,r):r}),n)},642541:function(t,e,n){n.d(e,{D:function(){return G},d:function(){return B}});var r=n(454693),a=n(302068),s=n(134209),o=n(923486),i=n(957012),c=n(86769),u=n(216814),d=n(113007),l=n(625606),f=n(618529),m=n(296521),h=n(69408),y=n(409796),p=n(842562),x=n(775633),g=n(967559),b=n(165167),w=n(382248),P=n(795315),v=n(541062),N=n(160170);function I(t){const{chainId:e,maxPriorityFeePerGas:n,maxFeePerGas:r,to:a}=t;if(e<=0)throw new g.hJ({chainId:e});if(a&&!(0,w.U)(a))throw new y.b({address:a});if(r&&r>h.zL)throw new b.Hh({maxFeePerGas:r});if(n&&r&&n>r)throw new b.cs({maxFeePerGas:r,maxPriorityFeePerGas:n})}function C(t){if(!t||0===t.length)return[];const e=[];for(let n=0;n<t.length;n++){const{address:a,storageKeys:s}=t[n];for(let t=0;t<s.length;t++)if(s[t].length-2!=64)throw new r.JC({storageKey:s[t]});if(!(0,w.U)(a,{strict:!1}))throw new y.b({address:a});e.push([a,s])}return e}function G(t,e){const n=function(t){if(t.type)return t.type;if(void 0!==t.authorizationList)return"eip7702";if(void 0!==t.blobs||void 0!==t.blobVersionedHashes||void 0!==t.maxFeePerBlobGas||void 0!==t.sidecars)return"eip4844";if(void 0!==t.maxFeePerGas||void 0!==t.maxPriorityFeePerGas)return"eip1559";if(void 0!==t.gasPrice)return void 0!==t.accessList?"eip2930":"legacy";throw new r.j3({transaction:t})}(t);return"eip1559"===n?function(t,e){const{chainId:n,gas:r,nonce:a,to:s,value:o,maxFeePerGas:i,maxPriorityFeePerGas:u,accessList:f,data:m}=t;I(t);const h=C(f),y=[(0,d.NC)(n),a?(0,d.NC)(a):"0x",u?(0,d.NC)(u):"0x",i?(0,d.NC)(i):"0x",r?(0,d.NC)(r):"0x",s??"0x",o?(0,d.NC)(o):"0x",m??"0x",h,...B(t,e)];return(0,c.SM)(["0x02",(0,l.LV)(y)])}(t,e):"eip2930"===n?function(t,e){const{chainId:n,gas:r,data:a,nonce:s,to:o,value:i,accessList:u,gasPrice:f}=t;!function(t){const{chainId:e,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:a,to:s}=t;if(e<=0)throw new g.hJ({chainId:e});if(s&&!(0,w.U)(s))throw new y.b({address:s});if(n||a)throw new p.G("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(r&&r>h.zL)throw new b.Hh({maxFeePerGas:r})}(t);const m=C(u),x=[(0,d.NC)(n),s?(0,d.NC)(s):"0x",f?(0,d.NC)(f):"0x",r?(0,d.NC)(r):"0x",o??"0x",i?(0,d.NC)(i):"0x",a??"0x",m,...B(t,e)];return(0,c.SM)(["0x01",(0,l.LV)(x)])}(t,e):"eip4844"===n?function(t,e){const{chainId:n,gas:r,nonce:u,to:f,value:h,maxFeePerBlobGas:y,maxFeePerGas:p,maxPriorityFeePerGas:g,accessList:b,data:w}=t;!function(t){const{blobVersionedHashes:e}=t;if(e){if(0===e.length)throw new x.RX;for(const t of e){const e=(0,P.d)(t),n=(0,N.ly)((0,v.tP)(t,0,1));if(32!==e)throw new x.xd({hash:t,size:e});if(n!==m.l)throw new x.cJ({hash:t,version:n})}}I(t)}(t);let G=t.blobVersionedHashes,L=t.sidecars;if(t.blobs&&(void 0===G||void 0===L)){const e="string"==typeof t.blobs[0]?t.blobs:t.blobs.map((t=>(0,d.ci)(t))),n=t.kzg,r=(0,a.P)({blobs:e,kzg:n});if(void 0===G&&(G=(0,o.C)({commitments:r})),void 0===L){const t=(0,s.y)({blobs:e,commitments:r,kzg:n});L=(0,i.j)({blobs:e,commitments:r,proofs:t})}}const F=C(b),S=[(0,d.NC)(n),u?(0,d.NC)(u):"0x",g?(0,d.NC)(g):"0x",p?(0,d.NC)(p):"0x",r?(0,d.NC)(r):"0x",f??"0x",h?(0,d.NC)(h):"0x",w??"0x",F,y?(0,d.NC)(y):"0x",G??[],...B(t,e)],T=[],k=[],z=[];if(L)for(let t=0;t<L.length;t++){const{blob:e,commitment:n,proof:r}=L[t];T.push(e),k.push(n),z.push(r)}return(0,c.SM)(["0x03",L?(0,l.LV)([S,T,k,z]):(0,l.LV)(S)])}(t,e):"eip7702"===n?function(t,e){const{authorizationList:n,chainId:r,gas:a,nonce:s,to:o,value:i,maxFeePerGas:u,maxPriorityFeePerGas:m,accessList:h,data:p}=t;!function(t){const{authorizationList:e}=t;if(e)for(const t of e){const{contractAddress:e,chainId:n}=t;if(!(0,w.U)(e))throw new y.b({address:e});if(n<0)throw new g.hJ({chainId:n})}I(t)}(t);const x=C(h),b=(0,f.W)(n);return(0,c.SM)(["0x04",(0,l.LV)([(0,d.NC)(r),s?(0,d.NC)(s):"0x",m?(0,d.NC)(m):"0x",u?(0,d.NC)(u):"0x",a?(0,d.NC)(a):"0x",o??"0x",i?(0,d.NC)(i):"0x",p??"0x",x,b,...B(t,e)])])}(t,e):function(t,e){const{chainId:n=0,gas:a,data:s,nonce:o,to:i,value:c,gasPrice:f}=t;!function(t){const{chainId:e,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:a,to:s}=t;if(s&&!(0,w.U)(s))throw new y.b({address:s});if(void 0!==e&&e<=0)throw new g.hJ({chainId:e});if(n||a)throw new p.G("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(r&&r>h.zL)throw new b.Hh({maxFeePerGas:r})}(t);let m=[o?(0,d.NC)(o):"0x",f?(0,d.NC)(f):"0x",a?(0,d.NC)(a):"0x",i??"0x",c?(0,d.NC)(c):"0x",s??"0x"];if(e){const t=(()=>{if(e.v>=35n){return(e.v-35n)/2n>0?e.v:27n+(35n===e.v?0n:1n)}if(n>0)return BigInt(2*n)+BigInt(35n+e.v-27n);const t=27n+(27n===e.v?0n:1n);if(e.v!==t)throw new r.vl({v:e.v});return t})(),a=(0,u.f)(e.r),s=(0,u.f)(e.s);m=[...m,(0,d.NC)(t),"0x00"===a?"0x":a,"0x00"===s?"0x":s]}else n>0&&(m=[...m,(0,d.NC)(n),"0x","0x"]);return(0,l.LV)(m)}(t,e)}function B(t,e){const n=e??t,{v:r,yParity:a}=n;if(void 0===n.r)return[];if(void 0===n.s)return[];if(void 0===r&&void 0===a)return[];const s=(0,u.f)(n.r),o=(0,u.f)(n.s);return["number"==typeof a?a?(0,d.NC)(1):"0x":0n===r?"0x":1n===r?(0,d.NC)(1):27n===r?"0x":(0,d.NC)(1),"0x00"===s?"0x":s,"0x00"===o?"0x":o]}},854321:function(t,e,n){n.d(e,{h:function(){return o}});const r=256;let a,s=r;function o(t=11){if(!a||s+t>2*r){a="",s=0;for(let t=0;t<r;t++)a+=(256+256*Math.random()|0).toString(16).substring(1)}return a.substring(s,s+++t)}},475698:function(t,e,n){n.d(e,{d:function(){return s}});var r=n(430214),a=n(892231);function s(t,e="wei"){return(0,a.b)(t,r.ez[e])}},53381:function(t,e,n){n.d(e,{o:function(){return s}});var r=n(430214),a=n(892231);function s(t,e="wei"){return(0,a.b)(t,r.Zn[e])}},892231:function(t,e,n){function r(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[a,s]=[n.slice(0,n.length-e),n.slice(n.length-e)];return s=s.replace(/(0+)$/,""),`${r?"-":""}${a||"0"}${s?`.${s}`:""}`}n.d(e,{b:function(){return r}})},247230:function(t,e,n){async function r(t){return new Promise((e=>setTimeout(e,t)))}n.d(e,{D:function(){return r}})},442714:function(t,e,n){n.d(e,{i:function(){return T}});var r=n(160170),a=n(232362),s=n(113007),o=n(964911),i=n(534534),c=n(160348),u=n(953099),d=n(839978),l=n(69408);const f=50000n,m=32n*l.rU,h={block:(0,o.G)({format(t){const e=t.transactions?.map((t=>{if("string"==typeof t)return t;const e=h.transaction?.format(t);return"0x71"===e.typeHex?e.type="eip712":"0xff"===e.typeHex&&(e.type="priority"),e}));return{l1BatchNumber:t.l1BatchNumber?(0,r.y_)(t.l1BatchNumber):null,l1BatchTimestamp:t.l1BatchTimestamp?(0,r.y_)(t.l1BatchTimestamp):null,transactions:e}}}),transaction:(0,c.y_)({format(t){const e={};return"0x71"===t.type?e.type="eip712":"0xff"===t.type&&(e.type="priority"),{...e,l1BatchNumber:t.l1BatchNumber?(0,r.y_)(t.l1BatchNumber):null,l1BatchTxIndex:t.l1BatchTxIndex?(0,r.y_)(t.l1BatchTxIndex):null}}}),transactionReceipt:(0,u.dI)({format(t){return{l1BatchNumber:t.l1BatchNumber?(0,r.y_)(t.l1BatchNumber):null,l1BatchTxIndex:t.l1BatchTxIndex?(0,r.y_)(t.l1BatchTxIndex):null,logs:t.logs.map((t=>({...(0,i.U)(t),l1BatchNumber:t.l1BatchNumber?(0,r.y_)(t.l1BatchNumber):null,transactionLogIndex:(0,r.ly)(t.transactionLogIndex),logType:t.logType}))),l2ToL1Logs:t.l2ToL1Logs.map((t=>({blockNumber:(0,r.y_)(t.blockHash),blockHash:t.blockHash,l1BatchNumber:t.l1BatchNumber?(0,r.y_)(t.l1BatchNumber):null,transactionIndex:(0,r.y_)(t.transactionIndex),shardId:(0,r.y_)(t.shardId),isService:t.isService,sender:t.sender,key:t.key,value:t.value,transactionHash:t.transactionHash,logIndex:(0,r.y_)(t.logIndex)})))}}}),transactionRequest:(0,d.iy)({exclude:["customSignature","factoryDeps","gasPerPubdata","paymaster","paymasterInput"],format(t){return t.gasPerPubdata||t.paymaster&&t.paymasterInput||t.factoryDeps||t.customSignature?{eip712Meta:{...t.gasPerPubdata?{gasPerPubdata:(0,s.NC)(t.gasPerPubdata)}:{gasPerPubdata:(0,s.NC)(f)},...t.paymaster&&t.paymasterInput?{paymasterParams:{paymaster:t.paymaster,paymasterInput:Array.from((0,a.nr)(t.paymasterInput))}}:{},...t.factoryDeps?{factoryDeps:t.factoryDeps.map((t=>Array.from((0,a.nr)(t))))}:{},...t.customSignature?{customSignature:Array.from((0,a.nr)(t.customSignature))}:{}},type:"0x71"}:{}}})};var y=n(86769),p=n(625606),x=n(642541),g=n(409796),b=n(842562),w=n(967559),P=n(382248);class v extends b.G{constructor(){super(["Transaction is not an EIP712 transaction.","","Transaction must:",'  - include `type: "eip712"`',"  - include one of the following: `customSignature`, `paymaster`, `paymasterInput`, `gasPerPubdata`, `factoryDeps`"].join("\n"),{name:"InvalidEip712TransactionError"})}}function N(t){return"eip712"===t.type||!!("customSignature"in t&&t.customSignature||"paymaster"in t&&t.paymaster||"paymasterInput"in t&&t.paymasterInput||"gasPerPubdata"in t&&"bigint"==typeof t.gasPerPubdata||"factoryDeps"in t&&t.factoryDeps)}function I(t){const{chainId:e,to:n,from:r,paymaster:a,paymasterInput:s}=t;if(!N(t))throw new v;if(!e||e<=0)throw new w.hJ({chainId:e});if(n&&!(0,P.U)(n))throw new g.b({address:n});if(r&&!(0,P.U)(r))throw new g.b({address:r});if(a&&!(0,P.U)(a))throw new g.b({address:a});if(a&&!s)throw new b.G("`paymasterInput` must be provided when `paymaster` is defined");if(!a&&s)throw new b.G("`paymaster` must be provided when `paymasterInput` is defined")}const C={transaction:function(t,e){return N(t)?function(t){const{chainId:e,gas:n,nonce:r,to:a,from:o,value:i,maxFeePerGas:c,maxPriorityFeePerGas:u,customSignature:d,factoryDeps:l,paymaster:m,paymasterInput:h,gasPerPubdata:x,data:g}=t;I(t);const b=[r?(0,s.NC)(r):"0x",u?(0,s.NC)(u):"0x",c?(0,s.NC)(c):"0x",n?(0,s.NC)(n):"0x",a??"0x",i?(0,s.NC)(i):"0x",g??"0x0",(0,s.NC)(e),(0,s.NC)(""),(0,s.NC)(""),(0,s.NC)(e),o??"0x",x?(0,s.NC)(x):(0,s.NC)(f),l??[],d??"0x",m&&h?[m,h]:[]];return(0,y.SM)(["0x71",(0,p.LV)(b)])}(t):(0,x.D)(t,e)}};var G=n(163161),B=n(725537);class L extends b.G{constructor({givenLength:t,maxBytecodeSize:e}){super(`Bytecode cannot be longer than ${e} bytes. Given length: ${t}`,{name:"BytecodeLengthExceedsMaxSizeError"})}}class F extends b.G{constructor({givenLengthInWords:t}){super(`Bytecode length in 32-byte words must be odd. Given length in words: ${t}`,{name:"BytecodeLengthInWordsMustBeOddError"})}}class S extends b.G{constructor({givenLength:t}){super(`The bytecode length in bytes must be divisible by 32. Given length: ${t}`,{name:"BytecodeLengthMustBeDivisibleBy32Error"})}}const T={formatters:h,serializers:C,custom:{getEip712Domain:t=>{I(t);const e=function(t){const{gas:e,nonce:n,to:r,from:o,value:i,maxFeePerGas:c,maxPriorityFeePerGas:u,factoryDeps:d,paymaster:l,paymasterInput:h,gasPerPubdata:y,data:p}=t;return{txType:113n,from:BigInt(o),to:r?BigInt(r):0n,gasLimit:e??0n,gasPerPubdataByteLimit:y??f,maxFeePerGas:c??0n,maxPriorityFeePerGas:u??0n,paymaster:l?BigInt(l):0n,nonce:n?BigInt(n):0n,value:i??0n,data:p||"0x0",factoryDeps:d?.map((t=>(0,s.NC)(function(t){const e=(0,a.O0)(t);if(e.length%32!=0)throw new S({givenLength:e.length});if(e.length>m)throw new L({givenLength:e.length,maxBytecodeSize:m});const n=(0,B.J)(e),r=(0,a.O0)(n),s=e.length/32;if(s%2==0)throw new F({givenLengthInWords:s});const o=(0,a.O0)(s),i=(0,G.vk)(o,{size:2}),c=new Uint8Array([1,0]);return r.set(c,0),r.set(i,2),r}(t))))??[],paymasterInput:h||"0x"}}(t);return{domain:{name:"zkSync",version:"2",chainId:t.chainId},types:{Transaction:[{name:"txType",type:"uint256"},{name:"from",type:"uint256"},{name:"to",type:"uint256"},{name:"gasLimit",type:"uint256"},{name:"gasPerPubdataByteLimit",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymaster",type:"uint256"},{name:"nonce",type:"uint256"},{name:"value",type:"uint256"},{name:"data",type:"bytes"},{name:"factoryDeps",type:"bytes32[]"},{name:"paymasterInput",type:"bytes"}]},primaryType:"Transaction",message:e}}}}}}]);
//# sourceMappingURL=21090-c88f83b7c90069dc.js.map