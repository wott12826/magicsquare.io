"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[24714],{637796:function(e,t,r){r.d(t,{Pk:function(){return y},c:function(){return f},k0:function(){return p},tf:function(){return d}});var n=r(417806),i=r.n(n),a=r(869560),u=r.n(a),s=r(516563),o=r.n(s),l=r(550058);class c extends Error{constructor(e,t,r,n,i){super(e),this.message=e,this.code=t,this.type=r,this.data=n,this.raw=i,this.name="ApiError"}}const d=async e=>{let t={type:"UNKNOWN_TYPE",code:e.response.status,message:e.message};try{const r=await e.response.json();t=(null==r?void 0:r.errors)&&Array.isArray(null==r?void 0:r.errors)&&(null==r?void 0:r.errors[0])?{...t,...r.errors[0],message:r.errors[0].message||r.errors[0].title||""}:{...t,...r}}catch(e){}return new c(t.message,t.code,t.type,t.data,t)},p=e=>u()(e)&&"message"in e&&"code"in e&&"type"in e,y=(e,t)=>void 0===e?{...t}:Array.isArray(e)?[...e,...i()(t)]:e instanceof Headers?(i()(t).forEach((t=>{let[r,n]=t;return e.set(r,n)})),e):o()({},e,t),f=e=>async t=>{let{headers:r,...n}=t;const i=await(0,l.pL)({});return e({...n,headers:y(r,{Nonce:i})})}},494934:function(e,t,r){r.d(t,{O_:function(){return s},zG:function(){return l}});var n=r(911768),i=r(900900);const a=["/v2/store/page","/v2/store/application","/v1/main/store/app","/v2/hot-offers/how-to-get/:offerId","/v1/main/store/see-all","/v2/store/creator"],u=(0,i.Z)(),s=e=>{if(404!==e.response.status)return!1;const t=new URL(u).pathname,r=new URL(e.response.url).pathname.replace(t,"");return a.some((e=>(0,n.ss)(e,r)))},o=()=>null,l=async(e,t)=>{(e=>{let{code:t,message:r}=e;var n,i;return![401].includes(t)&&"INVALID_TOKEN"!==r||"function"!=typeof(null===(n=window)||void 0===n?void 0:n.__logoutClient)?o:null===(i=window)||void 0===i?void 0:i.__logoutClient})(t)(e,t)}},542373:function(e,t,r){r.d(t,{B1:function(){return s},UC:function(){return a}});var n=r(367781),i=r(778037);const a="turnstile-container",u=async e=>{const t=await function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"unnamed_action";const t="#".concat(a);return new Promise(((r,n)=>(window.turnstile||n(new Error("Turnstile is not initialized. Please contact support.")),window.turnstile.ready((()=>{window.turnstile.render(t,{action:e,sitekey:"0x4AAAAAAAJXm3gxYL4NABDV",callback(e){e?r(e):n(new Error("No token received after Turnstile execution."))}})})))))}(e);return{headerName:"x-cf-token",token:t}},s=(e,t,r)=>async a=>{const s=a||{};if(!r)return e(s);const o=(0,i.R)("isDev"),l=(0,i.R)("isLocalEnv");if(o&&n.Z.get("cf-skip-cap")||l)return s.headers={...s.headers,"cf-skip-turnstile":"rusik-TRUSIK.lol.captcha-DISABLER-23423423"},e(s);const{headerName:c,token:d}=await u(t);return d?(s.headers={...s.headers,[c]:d},e(s)):Promise.reject(new Error("Captcha challenge failed. Try again or contact site admin for help."))}},661238:function(e,t,r){r.d(t,{S:function(){return a}});var n=r(206843);const i=r(183941).T1.DEFAULT,a=e=>{let t;if("string"==typeof e?t=e:"object"==typeof e&&null!==e&&("message"in e?t=e.message:"shortMessage"in e&&(t=e.shortMessage)),t)try{const e=JSON.parse(t);(null==e?void 0:e.message)&&(t=e.message)}catch(e){}return t||(t=i),new Error(t)};t.Z=e=>{let t,{error:r,replaceErrorMessageCallback:u,justReturnHandledMessage:s}=e,o={};const{message:l}=a(r);if(u){const{newMessage:e,toastOptions:r}=u(l);t=e,r&&(o=r)}else t=l.includes(i)?l:"".concat(i," ").concat(l);return s||n.toast.error(t,{toastId:l,...o}),t}},900900:function(e,t,r){var n=r(301323);t.Z=()=>{var e,t,r;return void 0!==n&&(null===(t=n)||void 0===n?void 0:null!==(e=t.env)&&void 0!==e||void 0)?"https://magicsquare.io/api":(null===(r={})||void 0===r?void 0:r.env.VITE_API_URL)?(void 0).VITE_API_URL:""}},818325:function(e,t,r){r.d(t,{v:function(){return c}});r(100423);var n=r(407901),i=r.n(n);const a=(e,t)=>{let{id:r,type:n,...i}=e;return{...i,...t.find((e=>e.id===r&&e.type===n))}},u=(e,t,r)=>{if(e[t]=[],e.relationships){for(const n of e.relationships[t].data)e[t].push(a(n,r));delete e.relationships[t]}},s=(e,t,r)=>{e[t]={},e[t]=a(e.relationships[t].data,r),delete e.relationships[t]},o=e=>Array.isArray(e)?e.some((e=>(null==e?void 0:e.relationships)&&Object.keys(null==e?void 0:e.relationships).length>0)):(null==e?void 0:e.constructor)===Object&&((null==e?void 0:e.relationships)&&Object.keys(null==e?void 0:e.relationships).length>0),l=(e,t)=>{const{relationships:r}=e;for(const a in r){var n;if(Array.isArray(r[a].data)){if(u(e,a,t),o(e[a]))if(Array.isArray(e[a]))for(const r of e[a])l(r,t);else(null===(n=e[a])||void 0===n?void 0:n.constructor)===Object&&l(e[a],t)}else if(r[a].data){var i;if(s(e,a,t),o(e[a]))if(o(e[a]))if(Array.isArray(e[a]))for(const r of e[a])l(r,t);else(null===(i=e[a])||void 0===i?void 0:i.constructor)===Object&&l(e[a],t)}}delete e.relationships},c=(e,t)=>{var r;const n=JSON.parse(JSON.stringify(e));i()(n.data)&&(e=>{for(const r of e.data){var t;(null==r?void 0:r.relationships)&&Object.keys(null==r?void 0:r.relationships).length>0&&l(r,null!==(t=e.included)&&void 0!==t?t:[])}})(n),(null==n?void 0:n.included)&&!i()(n.data)&&(null===(r=n.data)||void 0===r?void 0:r.relationships)&&l(n.data,n.included);let a=n.meta?{...n.data,meta:JSON.parse(JSON.stringify(n.meta))}:n.data;return t&&(a={...a,included:n.included}),a}},911768:function(e,t,r){r.d(t,{O8:function(){return a},Y$:function(){return n},ss:function(){return i}});const n=e=>{const t=(e=>/^https?:\/\//.test(e)?e:"http://".concat(e))(e);if(!(e=>{try{return!!new URL(e)}catch(e){return!1}})(t))return t;const r=new URL(t);return r.searchParams.set("utm_source","MagicStore"),r.toString()},i=(e,t)=>{const r=e.split("/"),n=t.split("/");return r.length===n.length&&r.every(((e,t)=>{if(e.startsWith(":"))return!0;return e===n[t]}))},a=()=>window.location.href},162814:function(e,t,r){r.d(t,{Z:function(){return a}});var n=r(367781),i=r(990426);var a=()=>{n.Z.remove(i.Z.MSQ_CONNECTED_WALLET_ADDRESS),n.Z.remove(i.Z.MSQ_CONNECTED_WALLET_TYPE)}},579571:function(e,t,r){r.d(t,{En:function(){return o},Q:function(){return y},SD:function(){return l},bJ:function(){return c},e0:function(){return d},xV:function(){return s},xb:function(){return p}});var n=r(910308),i=r(278394),a=r(730121),u=r(869009);const s={status:["aiAssistantStatus"],quotas:["aiAssistantQuotas"],history:["aiAssistantHistory"],dialog:["aiAssistantDialog"],dialogsList:["aiAssistantDialogsList"],createNewDialog:["createNewDialog"]},o=e=>{let{enabled:t}=e;return(0,n.useQuery)({queryKey:s.status,queryFn:()=>(0,u.ysf)(),enabled:t,staleTime:0})},l=e=>{let{enabled:t}=e;return(0,n.useQuery)({queryKey:s.quotas,queryFn:()=>(0,u.r0K)(),enabled:t})},c=e=>{let{enabled:t,staleTime:r}=e;return(0,n.useQuery)({queryKey:s.history,queryFn:()=>(0,u.gz3)(),enabled:t,staleTime:r})},d=e=>{let{enabled:t,dialogId:r}=e;return(0,n.useQuery)({queryKey:[s.dialog,r],queryFn:()=>(0,u.Fyb)(r),enabled:t,staleTime:0})},p=e=>{let{enabled:t}=e;return(0,n.useQuery)({queryKey:s.dialogsList,queryFn:()=>(0,u.bFI)(),enabled:t,staleTime:0})},y=()=>{const e=(0,i.useQueryClient)();return(0,a.useMutation)({mutationFn:u.Nl3,onSuccess:()=>e.refetchQueries({queryKey:s.dialogsList})})}},887637:function(e,t,r){r.d(t,{B_:function(){return m},Hc:function(){return g},IA:function(){return c},Ij:function(){return v},Qr:function(){return f},RV:function(){return q},Z2:function(){return w},dq:function(){return b},fY:function(){return y},gO:function(){return P},mZ:function(){return I},qd:function(){return Q},ty:function(){return h},xE:function(){return p},zR:function(){return d}});var n=r(910308),i=r(185151),a=r(730121),u=r(278394),s=r(869009),o=r(821242),l=r(32578);const c={app:e=>[l.MD,"app",e],appValidation:e=>["appValidation",e],appListing:e=>["appListing",e],appCurrentUserMeta:e=>[o.f,"appCurrentUserMeta",e],appInfiniteReviewList:e=>[l.MD,"appInfiniteReviewList",e],appValidationInfiniteVoterList:e=>["appValidationInfiniteVoterList",e]},d=(e,t)=>(0,n.useQuery)({queryKey:c.app(e),queryFn:()=>(0,s.MqJ)({searchParams:{appId:e}}),...t}),p=(e,t)=>(0,n.useQuery)({queryKey:c.appListing(e),queryFn:()=>(0,s.ut$)(e),...t}),y=(e,t)=>(0,n.useQuery)({queryKey:c.appValidation(e),queryFn:()=>(0,s.bFR)(e),...t}),f=e=>{let{id:t}=e;return(0,i.useInfiniteQuery)({queryKey:c.appValidationInfiniteVoterList(t),queryFn:e=>{let{pageParam:r}=e;return(0,s.bFR)(t,{searchParams:{offset:(null==r?void 0:r.nextOffset)||0}})},initialPageParam:{nextOffset:0},getNextPageParam:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var r;return(null===(r=e.votes)||void 0===r?void 0:r.length)===s.yN$?{nextOffset:t.length*s.yN$}:void 0},staleTime:3e4})},v=()=>(0,a.useMutation)({mutationFn:e=>(0,s.E3D)({json:e})}),m=()=>(0,a.useMutation)({mutationFn:e=>{let{appId:t,data:r}=e;return(0,s.rfo)(t,{json:r})}}),g=(e,t)=>(0,n.useQuery)({queryKey:c.appCurrentUserMeta(e),queryFn:()=>(0,s.Eod)(e),...t}),h=()=>{const e=(0,u.useQueryClient)();return(0,a.useMutation)({mutationFn:async e=>{let{appId:t,like:r}=e;r?await(0,s.Sq2)({appId:t}):await(0,s.W08)({appId:t})},onMutate:async t=>{let{like:r,appLink:n}=t;const i=c.appCurrentUserMeta(n);await e.cancelQueries({queryKey:i});const a=e.getQueryData(i);return e.setQueryData(i,(e=>e?{...e,attributes:{...e.attributes,liked:r}}:e)),{previousLike:a}},onError:(t,r,n)=>{const i=c.appCurrentUserMeta(r.appLink);e.setQueryData(i,null==n?void 0:n.previousLike)}})},w=()=>{const e=(0,u.useQueryClient)();return(0,a.useMutation)({mutationFn:e=>{let{id:t,trustLevel:r,title:n,text:i}=e;return(0,s.WK5)({json:{id:t,review_rating:r,review_title:n,review_text:i}})},onSuccess:async(t,r)=>{let{user:n,appId:i,trustLevel:a,title:u,text:s}=r;const o=c.app(i);await e.cancelQueries({queryKey:o}),e.setQueryData(o,(e=>{if(!e)return e;const r={id:t.id,type:"TRUST_REVIEW",attributes:{rating:a.toString(),text:s,title:u,timestamp:t.create_time,userName:n.attributes.name},user:{id:n.id,type:"PUBLIC_USER",attributes:{icon:n.attributes.icon,karma:n.attributes.karma,description:n.attributes.description,uuid:n.attributes.uuid,magicId:n.attributes.name,name:n.attributes.displayedName,appsCount:0}}};return{...e,trustReviews:[r,...e.trustReviews||[]]}}))}})},D=10,I=e=>{let{appId:t,limit:r=D}=e;return(0,i.useInfiniteQuery)({queryKey:c.appInfiniteReviewList({appId:t,limit:r}),queryFn:e=>{let{pageParam:n}=e;return(0,s.Nvx)({searchParams:{appId:t,limit:r,offset:r*n}})},initialPageParam:0,getNextPageParam:function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).length===r?e.length:void 0}})},b=()=>{const e=(0,u.useQueryClient)();return(0,a.useMutation)({mutationFn:e=>{let{id:t,rating:r,title:n,text:i}=e;return(0,s.a_V)({json:{id:t,review_rating:r,review_title:n,review_text:i}})},onMutate:async t=>{let{user:r,appId:n,rating:i,title:a,text:u}=t;const s=c.appInfiniteReviewList({appId:n,limit:D});await e.cancelQueries({queryKey:s});const o=e.getQueryData(s);return e.setQueryData(s,(e=>{if(!e)return e;const t={id:Date.now(),type:"REVIEW",attributes:{rating:i,text:u,title:a,funnyVotes:0,negativeVotes:0,positiveVotes:0,userVote:0,userFunnyVote:!1,timestamp:(new Date).toISOString(),userName:r.attributes.name},user:{id:r.id,type:"PUBLIC_USER",attributes:{icon:r.attributes.icon,karma:r.attributes.karma,description:r.attributes.description,uuid:r.attributes.uuid,magicId:r.attributes.name,name:r.attributes.displayedName,appsCount:0}}},[n,...s]=e.pages;return{...e,pages:n?[[t,...n],...s]:[[t]]}})),{previousData:o}},onSuccess:(t,r)=>{let{appId:n}=r;e.invalidateQueries({queryKey:c.appInfiniteReviewList({appId:n,limit:D})})},onError:(t,r,n)=>{let{appId:i}=r;const a=c.appInfiniteReviewList({appId:i,limit:D});e.setQueryData(a,null==n?void 0:n.previousData)}})},q=()=>{const e=(0,u.useQueryClient)();return(0,a.useMutation)({mutationFn:e=>{let{id:t,title:r,text:n}=e;return(0,s.j$3)({json:{id:t,suggestion_title:r,suggestion_text:n}})},onMutate:async t=>{let{user:r,appId:n,title:i,text:a}=t;const u=c.app(n);await e.cancelQueries({queryKey:u});const s=e.getQueryData(u);return e.setQueryData(u,(e=>{if(!e)return e;const t={id:Date.now(),type:"SUGGESTION",attributes:{text:a,title:i,timestamp:(new Date).toISOString(),userName:r.attributes.name},user:{id:r.id,type:"PUBLIC_USER",attributes:{icon:r.attributes.icon,karma:r.attributes.karma,description:r.attributes.description,uuid:r.attributes.uuid,magicId:r.attributes.name,name:r.attributes.displayedName,appsCount:0}}};return{...e,suggestion:[t,...e.suggestion||[]]}})),{previousData:s}},onError:(t,r,n)=>{const i=c.app(r.appId);e.setQueryData(i,null==n?void 0:n.previousData)}})},P=e=>(0,a.useMutation)({mutationFn:e=>{let{reviewType:t,reviewId:r,vote:n}=e;return(0,s.wd0)({id:r,type:t},{json:{vote:n}})},...e}),Q=e=>(0,a.useMutation)({mutationFn:e=>{let{reviewId:t,reviewType:r,like:n}=e;return(0,s._mF)({id:t,type:r},{json:{funny:n}})},...e})},387502:function(e,t,r){r.d(t,{Ei:function(){return l},J7:function(){return o}});var n=r(185151),i=r(910308),a=r(869009),u=r(821242);const s={myApps:e=>[u.f,"myApps",e],categories:["categories"]},o=(e,t)=>(0,n.useInfiniteQuery)({queryKey:s.myApps(e),queryFn:t=>{let{pageParam:r}=t;return(0,a.XeS)({searchParams:{...e,limit:null==e?void 0:e.limit,offset:(null==r?void 0:r.nextOffset)||0}})},initialPageParam:{nextOffset:0},getNextPageParam:(t,r)=>{var n;return(null===(n=t.data)||void 0===n?void 0:n.length)===(null==e?void 0:e.limit)?{nextOffset:(null==r?void 0:r.length)*(null==e?void 0:e.limit)}:void 0},...t}),l=e=>(0,i.useQuery)({queryKey:s.categories,queryFn:()=>(0,a.pED)({searchParams:e})})},273085:function(e,t,r){r(869009)},56359:function(e,t,r){r.d(t,{$:function(){return I},$V:function(){return f},EP:function(){return w},Hx:function(){return g},J7:function(){return q},Ov:function(){return m},S9:function(){return y},ZD:function(){return p},eC:function(){return D},fU:function(){return b},jl:function(){return h}});var n=r(910308),i=r(278394),a=r(730121),u=r(185151),s=r(869009),o=r(661238),l=r(821242),c=r(106403);const d={currentDeveloperProfile:[l.f,"currentUserDeveloperInfo"],currentDeveloperApps:[l.f,"currentUserDeveloperApps"],developerProfile:e=>{let{developerId:t,isCurrentDeveloper:r}=e;return r?d.currentDeveloperProfile:["developerProfile",t]},developerTeamMembers:e=>["developerTeamMembers",e],developerApps:e=>{let{developerId:t,isCurrentDeveloper:r}=e;return r?d.currentDeveloperApps:["developerApps",t]},developerTokens:e=>["developerTokens",e],listCampain:e=>["infiniteCampainList",e]},p=()=>(0,n.useQuery)({queryKey:d.currentDeveloperProfile,queryFn:()=>(0,s.UM3)()}),y=e=>{let{developerId:t,isCurrentDeveloper:r}=e;return(0,n.useQuery)({queryKey:d.developerProfile({developerId:t,isCurrentDeveloper:r}),queryFn:()=>r?(0,s.UM3)():(0,s.nYG)(t)})},f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,n.useQuery)({queryKey:d.developerTeamMembers(e),queryFn:()=>(0,s.ovI)({searchParams:{creator_id:e}}),enabled:Boolean(e)})},v=e=>{let{total_apps:t,data:r}=e;return{count:t,rows:r}},m=e=>{let{developerId:t,isCurrentDeveloper:r}=e;return(0,n.useQuery)({queryKey:d.developerApps({developerId:t,isCurrentDeveloper:r}),queryFn:async()=>{if(r){const e=await(0,s._h8)();return v(e)}return(0,s.T8D)({searchParams:{creator_id:t}})}})},g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,n.useQuery)({queryKey:d.developerTokens(e),queryFn:()=>(0,s.Y_r)({searchParams:{creator_id:e}}),enabled:Boolean(e)})},h=()=>{const e=(0,i.useQueryClient)();return(0,a.useMutation)({mutationFn:async e=>{await(0,s.x32)({json:e});const t=await(0,s.isw)();return{developerProfile:await(0,s.UM3)(),user:t}},onMutate:async t=>{await e.cancelQueries({queryKey:d.currentDeveloperProfile});const r=e.getQueryData(d.currentDeveloperProfile);return e.setQueryData(d.currentDeveloperProfile,(e=>e?{...e,...t}:e)),{previousDeveloperProfile:r}},onSuccess:t=>{let{developerProfile:r,user:n}=t;(0,c.aJ)(e,n),e.setQueryData(d.currentDeveloperProfile,r)},onError:(t,r,n)=>{n&&e.setQueryData(d.currentDeveloperProfile,n.previousDeveloperProfile)},onSettled:()=>{e.invalidateQueries({queryKey:d.currentDeveloperProfile})}})},w=()=>{const e=(0,i.useQueryClient)();return(0,a.useMutation)({mutationFn:async e=>{await(0,s.hrn)({json:e});const t=await(0,s.isw)();return{developerProfile:await(0,s.UM3)(),user:t}},onSuccess:t=>{let{developerProfile:r,user:n}=t;(0,c.aJ)(e,n),e.setQueryData(d.currentDeveloperProfile,r)}})},D=()=>(0,n.useQuery)({queryKey:d.currentDeveloperProfile,queryFn:()=>(0,s.tnf)(),staleTime:0}),I=e=>(0,u.useInfiniteQuery)({queryKey:d.listCampain(e),queryFn:async t=>{let{pageParam:r}=t;try{return await(0,s.Uk4)({searchParams:{...e,offset:r}})}catch(e){const t=e;var n;if(Array.isArray(null==t?void 0:t.data))(0,o.Z)({error:null===(n=t.data[0])||void 0===n?void 0:n.message});throw new Error("Something went wrong")}},initialPageParam:0,getNextPageParam:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.length===s.UZ?s.UZ*t.length:void 0},staleTime:0,gcTime:0}),b=(e,t)=>(0,n.useQuery)({queryKey:[l.f,"sendVerificationCode",e],queryFn:()=>(0,s.lVx)({json:{email:e}}),...t}),q=()=>(0,a.useMutation)({mutationFn:async e=>(0,s.rUg)({json:{...e,code:Number(e.code)}})})},608512:function(e,t,r){r.d(t,{SS:function(){return s},XX:function(){return u}});var n=r(910308),i=r(869009);const a={server:["featureToggles"],client:["clientFeatureToggles"]},u=e=>(0,n.useQuery)({queryKey:a.server,queryFn:()=>(0,i.LBM)(),...e}),s=e=>(0,n.useQuery)({queryKey:a.client,queryFn:()=>(0,i.LBM)(),...e})},940875:function(e,t,r){r.d(t,{Y:function(){return a}});var n=r(730121),i=r(869009);const a=()=>(0,n.useMutation)({mutationFn:e=>(0,i.cTq)(e)})}}]);
//# sourceMappingURL=24714-42b589e98731a99e.js.map