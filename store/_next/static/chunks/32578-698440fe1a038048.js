"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[32578],{32578:function(e,n,t){t.d(n,{$A:function(){return X},AD:function(){return te},AG:function(){return j},Ag:function(){return b},DX:function(){return N},GF:function(){return _},ID:function(){return K},LF:function(){return O},Lc:function(){return Z},MD:function(){return p},MZ:function(){return C},Mz:function(){return T},Np:function(){return x},P:function(){return G},Q3:function(){return D},R5:function(){return g},UE:function(){return R},WC:function(){return P},av:function(){return Q},c:function(){return q},cv:function(){return S},dh:function(){return H},fq:function(){return E},hD:function(){return ee},hf:function(){return ne},jB:function(){return W},ko:function(){return k},l3:function(){return A},lM:function(){return L},mC:function(){return $},nQ:function(){return V},ob:function(){return Y},ow:function(){return F},qf:function(){return J},r2:function(){return I},sd:function(){return B},tN:function(){return U},tw:function(){return re},yp:function(){return z}});var r=t(893889),u=t(910308),s=t(278394),i=t(730121),a=t(185151),o=t(367781),c=t(869009),l=t(405766),y=t(550058),f=t(990426),m=t(849631),d=t(94095),h=t(161564),v=t(821242),w=t(106403);const p="authUserInvalidation",g={session:[v.r],publicUser:e=>[p,"publicUser",e],votedApps:(e,n)=>["votedApps",e,n],followedApps:(e,n)=>["followedApps",e,n],reviews:function(e){let{limit:n=y.yT,type:t="all",period:r="all"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return["userReviews",e,{limit:n,type:t,period:r}]},review:(e,n)=>[p,"userReview",e,n],humanityScore:[v.f,"humanityScore"],checkMagicIDNecessaryData:e=>[v.f,"checkMagicIDNecessaryData",e],referralUrl:(e,n)=>[v.f,"referralUrl",e,n],faceLivenessSession:[v.f,"faceLivenessSession"],faceLivenessSessionResult:e=>[v.f,"faceLivenessSession",e],xLoginUrl:e=>[v.f,"xLoginUrl",e],discordLoginUrl:e=>[v.f,"discordLoginUrl",e]},F=e=>(0,u.useQuery)({queryKey:g.publicUser(e.searchParams.id),queryFn:()=>(0,c.etS)(e)}),q=()=>{const e=(0,s.useQueryClient)();return(0,i.useMutation)({mutationFn:()=>(0,c.Red)(),onSuccess:()=>{e.invalidateQueries({queryKey:[g.session]})}})},P=e=>{let{limit:n=20,id:t}=e;return(0,a.useInfiniteQuery)({queryKey:g.followedApps(t,n),queryFn:e=>{let{pageParam:r}=e;return(0,c._y)({searchParams:{id:t,limit:n,offset:r}})},getNextPageParam:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.length===n?n*t.length:void 0},initialPageParam:0})},S=e=>{let{limit:n=20,id:t}=e;return(0,a.useInfiniteQuery)({queryKey:g.votedApps(t,n),queryFn:e=>{let{pageParam:r}=e;return(0,c.NDh)({searchParams:{id:t,limit:n,offset:r}})},initialPageParam:0,getNextPageParam:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.length===n?n*t.length:void 0}})},Q=(e,n)=>(0,a.useInfiniteQuery)({queryKey:g.reviews(e,n),queryFn:t=>{let{pageParam:r}=t;return(0,c.Dys)(e,{searchParams:{...n,offset:r}})},initialPageParam:0,getNextPageParam:function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(null==e?void 0:e.length)===y.yT?y.yT*n.length:void 0}}),C=e=>{let{id:n,type:t}=e;return(0,u.useQuery)({queryKey:g.review(n,t),queryFn:()=>(0,c.Eqp)({searchParams:{id:n,type:t}})})},M=e=>()=>{const n=(0,s.useQueryClient)();return(0,i.useMutation)({mutationFn:async n=>{const t=o.Z.get(f.Z.REFERRAL),r=await e({json:{...n,referredBy:t}});return{...await(0,c.isw)(),isNewUser:r.newUser}},onSuccess:e=>{o.Z.remove(f.Z.REFERRAL),(0,w.aJ)(n,e)}})},b=(M(c.bLH),M(c.wkY),M(c.bq_),M(c.nEx)),E=M((e=>(0,c.jbP)(e))),L=(M(c.WTo),M(c.o1R),()=>{const e=(0,s.useQueryClient)();return(0,i.useMutation)({mutationFn:async e=>{let{address:n,signature:t,network:r,message:u,walletType:s,v2:i}=e;const a=await(0,c.Dkb)({json:{pub_key:n,signature:t,network:r,message:u,wallet:s.toUpperCase()},...i?{headers:{"x-sign-in":"v2"}}:{}});if(a.error)throw new Error("Login failed");const y=o.Z.get(f.Z.REFERRAL);if((await(0,l.z7)({json:{network:r,pub_key:n,wallet:s,referredBy:y}})).error)throw new Error("Connect failed");return{user:await(0,c.isw)(),isNewUser:a.newUser}},onSuccess:n=>{e.invalidateQueries({queryKey:[v.f]}),(0,w.aJ)(e,n.user)}})}),R=()=>{const e=(0,s.useQueryClient)();return(0,i.useMutation)({mutationFn:async e=>(await(0,c.AlN)({json:{avatar:e}}),(0,c.isw)()),onSuccess:n=>{(0,w.aJ)(e,n)}})},U=()=>{const e=(0,s.useQueryClient)();return(0,i.useMutation)({mutationFn:async e=>(await(0,y.ry)({json:e}),(0,c.isw)()),onSuccess:n=>{(0,w.aJ)(e,n)}})},N=(e,n)=>(0,u.useQuery)({queryKey:g.checkMagicIDNecessaryData(e),queryFn:()=>(0,y.vL)({searchParams:e}),staleTime:0,gcTime:0,...n}),A=()=>(0,i.useMutation)({mutationFn:async e=>(0,y.vL)({searchParams:e})}),T=(e,n,t)=>(0,u.useQuery)({queryKey:g.referralUrl(e,n),queryFn:()=>((e,n)=>"app"===n?(0,c.hcA)(e):"hot-offer"===n?(0,c.WHz)(e):(0,c.hqu)(e))(e,n),...t}),k=()=>{const e=(0,s.useQueryClient)();return(0,i.useMutation)({mutationFn:async e=>(await(0,c.eYl)({json:{name:e}}),e),onSuccess:n=>{(0,w._e)(e,{attributes:{name:n}})}})},D=e=>(0,u.useQuery)({queryKey:["checkUserName",e],queryFn:async()=>{if(!e)return{message:"Username is required",isValid:!1};if(!/^[a-zA-Z0-9_]{4,20}$/.test(e))return{message:'The username must contain only Latin letters, numbers and the symbol "_". It must be at least 4 characters and not more than 20',isValid:!1};try{return await(0,y.yE)({json:{name:e}}),{message:"This username is available for use. Please note, your username cannot be changed in the future.",isValid:!0}}catch(e){return{message:(0,d.e)(e),isValid:!1}}},gcTime:2e3,staleTime:1e3,enabled:Boolean(e)}),I=(e,n)=>(0,u.useQuery)({queryKey:["checkUserNameNoRegEx",e],queryFn:async()=>{try{return await(0,y.yE)({json:{name:e}}),{isValid:!0}}catch(e){return{message:(0,d.e)(e),isValid:!1}}},...n}),j=()=>{const e=(0,s.useQueryClient)();return(0,i.useMutation)({mutationFn:async e=>(await(0,c.Y9D)({json:{displayedName:e}}),e),onSuccess:n=>{(0,w._e)(e,{attributes:{displayedName:n}})}})},K=()=>{const e=(0,s.useQueryClient)();return(0,i.useMutation)({mutationFn:async e=>(await(0,c.Y9D)({json:{description:e}}),e),onSuccess:n=>{(0,w._e)(e,{attributes:{description:n}})}})},_=()=>{const e=(0,s.useQueryClient)();return(0,i.useMutation)({mutationFn:e=>(0,y.nN)(e),onSuccess:n=>{(0,w._e)(e,{attributes:n})}})},V=()=>(0,i.useMutation)({mutationFn:e=>(0,c.lFc)({json:{email:e}})}),x=(e,n)=>(0,u.useQuery)({queryKey:[v.f,"sendVerificationCode",e],queryFn:()=>(0,c.lFc)({json:{email:e}}),...n}),Z=()=>{const e=(0,s.useQueryClient)();return(0,i.useMutation)({mutationFn:async e=>(await(0,y.VT)({json:{...e,code:Number(e.code)}}),e.email),onSuccess:n=>{(0,w._e)(e,{attributes:{email:n}})}})},J=()=>{const e=(0,s.useQueryClient)();return(0,i.useMutation)({mutationFn:()=>(0,y.UO)(),onSuccess:()=>{(0,w._e)(e,{attributes:{email:""}})}})},O=()=>{const e=(0,s.useQueryClient)();return(0,i.useMutation)({mutationFn:async e=>(await(0,l.tJ)({id:e}),(0,c.isw)()),onSuccess:n=>{(0,w.aJ)(e,n)}})},z=e=>{var n,t;const s=(0,h.N)(),i=(0,u.useQuery)({queryKey:g.humanityScore,queryFn:()=>(0,y.vL)({searchParams:{humanityScore:1,faceCheckPassed:1}}),select:e=>{var n;return{gitCoin:null==e||null===(n=e.description)||void 0===n?void 0:n.humanityScore,faceCheckPassed:e.description.faceCheckPassed}},gcTime:0,staleTime:0,...e}),a=null===(n=i.data)||void 0===n?void 0:n.gitCoin,o=null===(t=i.data)||void 0===t?void 0:t.faceCheckPassed,c=(0,r.useMemo)((()=>{let e="",n="";return s.humanityVerification&&("number"!=typeof(null==a?void 0:a.score)?e="Connect your Gitcoin Passport":a.acceptable||(e="Insufficient Gitcoin Passport Score.\nRaise to ".concat(a.threshold," to collect rewards."))),s.livenessVerification&&!1===o&&(n="Pass liveliness verification"),s.humanityVerification&&s.livenessVerification?e&&n?{humanityScoreError:e+" OR "+n}:{humanityScoreError:""}:s.livenessVerification?{humanityScoreError:n}:{humanityScoreError:e}}),[s.humanityVerification,s.livenessVerification,i.data]);return{...i,customErrors:c}},B=()=>{const e=(0,s.useQueryClient)();return(0,i.useMutation)({mutationFn:()=>(0,c.zOg)(),onSuccess:n=>{e.setQueryData(g.humanityScore,(e=>{var t;return e?{...e,description:{...null==e?void 0:e.description,humanityScore:{...null==e||null===(t=e.description)||void 0===t?void 0:t.humanityScore,...n}}}:{description:{humanityScore:n},success:!0}}))}})},Y=()=>{const e=(0,s.useQueryClient)();return(0,i.useMutation)({mutationFn:e=>(0,c.Y9D)({json:{cover:e}}),onMutate:async n=>(0,w._e)(e,{attributes:{cover:n}}),onError:(e,n,t)=>{null==t||t.reset()}})},G=e=>(0,u.useQuery)({queryKey:g.faceLivenessSession,queryFn:()=>(0,c.cYM)(),...e}),W=(e,n)=>(0,u.useQuery)({queryFn:()=>(0,c.DPq)({searchParams:{sessionId:e}}),queryKey:g.faceLivenessSessionResult(e),...n}),X=(e,n)=>(0,u.useQuery)({queryFn:()=>(0,c.qtm)({from:e}),queryKey:g.xLoginUrl(e),...n}),H=(e,n)=>(0,u.useQuery)({queryKey:g.discordLoginUrl(e),queryFn:()=>(0,c.ZMW)({from:e}),...n}),$=(e,n)=>{let{userId:t,searchParams:r}=e;const{limit:u=10}=r||{};return(0,a.useInfiniteQuery)({queryKey:["userClaimedHotOffers",t],queryFn:e=>{let{pageParam:n}=e;return(0,c.pXc)(t,{searchParams:{offset:(null==n?void 0:n.nextOffset)||0,limit:u}})},initialPageParam:{nextOffset:0},getNextPageParam:(e,n)=>(null==e?void 0:e.length)===u?{nextOffset:n.length*u}:void 0,...n})},ee=()=>{const e=(0,s.useQueryClient)();return(0,i.useMutation)({mutationFn:async e=>{const n=await(0,y.zT)({json:e});return{user:await(0,c.isw)(),walletAddress:n.address}},onSuccess:n=>{(0,w.aJ)(e,n.user)}})},ne=()=>{const e=(0,s.useQueryClient)();return(0,i.useMutation)({mutationFn:async e=>(await(0,c.uh)(e),(0,c.isw)()),onSuccess:n=>{(0,w.aJ)(e,n)}})},te=()=>{const e=(0,s.useQueryClient)();return(0,i.useMutation)({mutationFn:async e=>(await(0,c.ltz)(e),(0,c.isw)()),onSuccess:n=>{(0,w.aJ)(e,n)}})},re=()=>{const e=(0,s.useQueryClient)(),{webApp:n}=(0,m.default)();return(0,i.useMutation)({mutationFn:async e=>{const t=o.Z.get(f.Z.REFERRAL),r=await(0,c.VIF)({json:{...e,referredBy:t}});o.Z.remove(f.Z.REFERRAL);const u=await(0,c.isw)();null==u||u.socials.find((e=>"TELEGRAM"===e.type)),null==n||n.initDataUnsafe.user;return{user:u,isNewUser:r.newUser}},onSuccess:n=>{(0,w.aJ)(e,n.user)}})}},161564:function(e,n,t){t.d(n,{N:function(){return s}});var r=t(608512);const u={},s=()=>{const{data:e=u}=(0,r.XX)();return e}},849631:function(e,n,t){var r=t(893889);n.default=()=>{const[e,n]=(0,r.useState)(void 0),[t,u]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{const e=()=>{var e,t;const r=null===(t=window)||void 0===t||null===(e=t.Telegram)||void 0===e?void 0:e.WebApp;return!!r&&(r.ready(),n(r),!0)};if(e())return;let t;const r=setTimeout((()=>{u(!0),clearInterval(t)}),1e4);return t=setInterval((()=>{e()&&(clearInterval(t),clearTimeout(r))}),1e3),()=>{clearInterval(t),clearTimeout(r)}}),[]),{webApp:e,isAppOpenedInTelegram:Boolean(null==e?void 0:e.initData),hasTimedOut:t}}}}]);
//# sourceMappingURL=32578-698440fe1a038048.js.map