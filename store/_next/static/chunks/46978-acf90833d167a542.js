"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[46978],{606831:function(e,t,s){var a=s(308384),n=s(512726),r=s(63558),i=s(407901),l=s(120015),d=s(919336),o=s(766526),c=s(385879),u=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(l(e)&&(i(e)||"string"==typeof e||"function"==typeof e.splice||d(e)||c(e)||r(e)))return!e.length;var t=n(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(o(e))return!a(e).length;for(var s in e)if(u.call(e,s))return!1;return!0}},359645:function(e,t,s){var a,n=s(497412),r=(a=n)&&a.__esModule?a:{default:a};var i={tags:function(e){var t=e.id,s=e.events,a=e.dataLayer,n=e.dataLayerName,i=e.preview,l="&gtm_auth="+e.auth,d="&gtm_preview="+i;return t||(0,r.default)("GTM Id is required"),{iframe:'\n      <iframe src="https://www.googletagmanager.com/ns.html?id='+t+l+d+'&gtm_cookies_win=x"\n        height="0" width="0" style="display:none;visibility:hidden" id="tag-manager"></iframe>',script:"\n      (function(w,d,s,l,i){w[l]=w[l]||[];\n        w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js', "+JSON.stringify(s).slice(1,-1)+"});\n        var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';\n        j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl+'"+l+d+"&gtm_cookies_win=x';\n        f.parentNode.insertBefore(j,f);\n      })(window,document,'script','"+n+"','"+t+"');",dataLayerVar:this.dataLayer(a,n)}},dataLayer:function(e,t){return"\n      window."+t+" = window."+t+" || [];\n      window."+t+".push("+JSON.stringify(e)+")"}};e.exports=i},251624:function(e,t,s){var a,n=s(359645),r=(a=n)&&a.__esModule?a:{default:a};var i={dataScript:function(e){var t=document.createElement("script");return t.innerHTML=e,t},gtm:function(e){var t=r.default.tags(e);return{noScript:function(){var e=document.createElement("noscript");return e.innerHTML=t.iframe,e},script:function(){var e=document.createElement("script");return e.innerHTML=t.script,e},dataScript:this.dataScript(t.dataLayerVar)}},initialize:function(e){var t=e.gtmId,s=e.events,a=void 0===s?{}:s,n=e.dataLayer,r=e.dataLayerName,i=void 0===r?"dataLayer":r,l=e.auth,d=void 0===l?"":l,o=e.preview,c=void 0===o?"":o,u=this.gtm({id:t,events:a,dataLayer:n||void 0,dataLayerName:i,auth:d,preview:c});n&&document.head.appendChild(u.dataScript),document.head.insertBefore(u.script(),document.head.childNodes[0]),document.body.insertBefore(u.noScript(),document.body.childNodes[0])},dataLayer:function(e){var t=e.dataLayer,s=e.dataLayerName,a=void 0===s?"dataLayer":s;if(window[a])return window[a].push(t);var n=r.default.dataLayer(t,a),i=this.dataScript(n);document.head.insertBefore(i,document.head.childNodes[0])}};e.exports=i},656693:function(e,t,s){var a,n=s(251624),r=(a=n)&&a.__esModule?a:{default:a};e.exports=r.default},497412:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){console.warn("[react-gtm]",e)}},32855:function(e,t,s){s.d(t,{O:function(){return a}});const a=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return["RAFFLE_WEB3_QUERY_KEY",...t]}},242179:function(e,t,s){s.d(t,{M:function(){return u}});var a=s(910308),n=s(108531),r=s(981395),i=s(183941),l=s(490650),d=s(249312),o=s(946972),c=s(32855);const u=(e,t,s)=>(0,a.useQuery)({queryKey:(0,c.O)("roundTickets",String(e),t),queryFn:()=>(async e=>{let{roundId:t,walletAddress:s}=e;if(!t||!s)return null;const a=await(0,n.L)(r.g,{...o.A,chainId:i.VQ.id,functionName:"getAddressInfoId",args:[s,t]}),c=await(0,n.L)(r.g,{...o.A,chainId:i.VQ.id,functionName:"getPriceSQRinUSDT"}),u=a.boughtTickets,m=a.wonTickets.length>0?a.wonTickets[0]:null,x=i.f5.SQR,f=i.f5.USDT,p=a.gotPrize,h=p*c/BigInt(10**x.decimals),v=(0,l.An)(p,x.decimals),g=(0,l.An)(h,f.decimals);return{roundId:t,boughtTicketsCount:u,prizeInSqr:{wei:p,value:v,formatted:(0,l.ol)((0,d.v_)(v),x.symbol)},prizeInUsdt:{wei:c,value:g,formatted:(0,l.ol)((0,d.v_)(g),f.symbol)},allTickets:a.ticketsInRound,wonTicket:m,nonWonTickets:a.ticketsInRound.filter((e=>e!==m))}})({roundId:e,walletAddress:t}),enabled:!!e&&!!t,...s})},946972:function(e,t,s){var a;s.d(t,{A:function(){return r}});const n=null!==(a="0x28e7D4c91023D2c0d448F52fAB6E9a0ce17A891d")?a:"0x0",r={abi:s(379022).N9.abi,address:n}},385467:function(e,t,s){s.d(t,{MagicRaffleEntries:function(){return Q},Y:function(){return O}});var a=s(939804),n=s(893889),r=s(943519),i=s(214499),l=s(910308),d=s(108531),o=s(981395),c=s(183941),u=s(787907),m=s(490650),x=s(374999),f=s(249312),p=s(946972),h=s(32855);const v=(e,t)=>(0,l.useQuery)({queryKey:(0,h.O)("rounds",e),queryFn:()=>(async e=>{let{walletAddress:t}=e;if(!t)return[];try{return(await(0,d.L)(o.g,{...p.A,chainId:c.VQ.id,functionName:"getWalletTicketsRoundInfo",args:[t]})).map((e=>{const t=e.prizeSqr,s=e.prizeUsdt,a=c.f5.SQR,n=c.f5.USDT,r=(0,x.A)(t,a.decimals),i=(0,x.A)(s,n.decimals);return{roundId:e.roundId,ticketsAmount:e.numTickets,prizeInSqr:{wei:t,value:r,formatted:(0,m.ol)((0,f.v_)(r),a.symbol)},prizeInUsdt:{wei:s,value:i,formatted:(0,m.ol)((0,f.v_)(i),n.symbol)},closeTimestamp:(0,u.P)(e.timeClosed),isPrizeDispersed:e.prizeDispersed}})).reverse()}catch(e){return console.error(e),[]}})({walletAddress:e}),...t});var g=s(843532),w=s(347177),b=s.n(w),y=s(360740),j=s(843619),N=s(855863);const k=e=>{let{row:t}=e;return(0,a.jsxs)("div",{className:"flex gap-4 max-md-msq:w-full max-md-msq:justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-caption-sm-strong-a",children:[(0,a.jsx)("div",{className:"w-4 h-4 border-rounded flex items-center justify-center",children:(0,a.jsx)(N.PA,{className:"icon-xs"})}),(0,a.jsx)("span",{className:"text-base-text-primary",children:"Raffle #".concat(String(t.roundId))})]}),(0,a.jsx)("div",{className:"text-base-text-tertiary text-caption-sm-a",children:(0,j.Z)(t.closeTimestamp,"dd MMM yyyy")})]})};var S=s(798692),A=s(43513),I=s(414092),q=s(315608);const T=e=>{let{row:t,walletAddress:s}=e;const{refetch:n,isFetching:r}=v(s),i=e=>{e.stopPropagation()};if(t.prizeInSqr.value>0){const e=c.f5.SQR;return(0,a.jsxs)("div",{className:"text-base-text-primary text-caption-sm-a flex gap-4 max-md-msq:gap-2 items-center",children:[(0,a.jsx)("div",{children:t.prizeInSqr.formatted}),!!s&&(0,a.jsx)(I.u,{side:"top",trigger:(0,a.jsx)(S.default,{onClick:i,href:"https://bscscan.com/token/".concat(e.contractsAddresses.token,"?a=").concat(s),target:"_blank",className:"msq-btn msq-btn-secondary msq-btn-icon-sm",children:(0,a.jsx)(A.Z,{className:"icon-xs text-base-text-primary"})}),caption:"View Transaction"})]})}return(0,a.jsx)("div",{className:"text-base-text-quaternary text-caption-sm-a",children:t.isPrizeDispersed?"No Reward":(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)("div",{className:"text-base-text-quaternary",children:"Calculating..."}),(0,a.jsx)(I.u,{side:"top",trigger:(0,a.jsx)("button",{type:"button","data-skeleton-target":"base",className:b()("msq-btn msq-btn-secondary msq-btn-icon-sm",r&&"msq-btn-loading"),onClick:e=>{e.stopPropagation(),r||n()},children:(0,a.jsx)(q.L,{className:"icon-xs text-base-text-primary"})}),caption:"Reload"})]})})};var C=s(452338);const _=e=>{let{row:t}=e;return(0,a.jsxs)("span",{className:"text-base-text-pink text-caption-sm-a",children:[String(t.ticketsAmount)," ",(0,C.DV)("Ticket",Number(t.ticketsAmount))]})},L=()=>(0,a.jsx)(a.Fragment,{children:Array.from({length:3},((e,t)=>(0,a.jsxs)("div",{className:b()("\n            grid-table-row-primary\n            grid-table-row\n            table-body-row-a\n            grid-cols-[1fr_224px_224px]\n            px-0\n            last:border-b-0"),children:[(0,a.jsx)("div",{className:"flex items-center gap-[2px]",children:(0,a.jsx)("div",{className:"skeleton-text w-[100px] h-5"})}),(0,a.jsx)("div",{className:"flex items-center gap-[2px]",children:(0,a.jsx)("div",{className:"skeleton-text w-[50px] h-5"})}),(0,a.jsx)("div",{className:"flex items-center gap-[2px]",children:(0,a.jsx)("div",{className:"skeleton-text w-[150px] h-5"})})]},t)))}),M="flex items-center gap-2",R="md-msq:!flex sm:flex sm:justify-start",E=e=>{let{rounds:t,isEmpty:s,isLoading:i,onClickRow:l}=e;var d;const{userEvmWallet:o}=(0,r.useAuth)(),c=(0,n.useMemo)((()=>[{label:"Raffle",name:"raffle",cellClassName:b()(R,"w-full"),bodyCellClassName:M,render:e=>{let{row:t}=e;return(0,a.jsx)(k,{row:t})}},{label:"My Tickets",name:"tickets",cellClassName:b()(R,"w-[224px]"),bodyCellClassName:M,render:e=>{let{row:t}=e;return(0,a.jsx)(_,{row:t})}},{label:"My Reward",name:"tickets",cellClassName:b()(R,"w-[224px]"),bodyCellClassName:M,render:e=>{let{row:t}=e;var s;return(0,a.jsx)(T,{row:t,walletAddress:null==o||null===(s=o.attributes)||void 0===s?void 0:s.address})}}]),[null==o||null===(d=o.attributes)||void 0===d?void 0:d.address]);return(0,a.jsxs)(y.R1,{onClickRow:e=>l(e.roundId),columns:c,className:"flex flex-col max-sm",bodyCellClassName:"table-body-cell",headRowClassName:"table-head-row-a",data:t,bodyRowClassName:"table-body-row-a",rowClassName:b()("grid-table-row-primary\n            grid-cols-[1fr_224px_224px]\n            px-0\n            max-sm-msq:gap-0\n          "),children:[s&&(0,a.jsx)("p",{className:"my-[96px] m-auto text-center text-base-text-tertiary text-sm",children:"No data yet"}),i&&(0,a.jsx)(L,{})]})},z=e=>{let{children:t}=e;return(0,a.jsx)("div",{className:"text-caption-sm-a text-base-text-tertiary text-start",children:t})},P=e=>{let{rounds:t,onClickRow:s,isEmpty:n,isLoading:i}=e;const{userEvmWallet:l}=(0,r.useAuth)();return(0,a.jsxs)("div",{children:[!n&&(0,a.jsx)("div",{className:"flex flex-col border-b border-base-border-medium self-start pb-2",children:(0,a.jsx)(z,{children:"Raffle"})}),(0,a.jsx)("div",{children:t.map((e=>{var t;return(0,a.jsxs)("div",{onClick:()=>s(e.roundId),className:" flex flex-col gap-1 pt-3 pb-2 border-b border-base-border-medium last:border-0 cursor-pointer ",children:[(0,a.jsx)("div",{className:"flex justify-between py-2",children:(0,a.jsx)(k,{row:e})}),(0,a.jsxs)("div",{className:"flex justify-between py-2",children:[(0,a.jsx)(z,{children:"Reward"}),(0,a.jsx)(T,{row:e,walletAddress:null==l||null===(t=l.attributes)||void 0===t?void 0:t.address})]}),(0,a.jsxs)("div",{className:"flex justify-between py-2",children:[(0,a.jsx)(z,{children:"My Tickets"}),(0,a.jsx)(_,{row:e})]})]},e.roundId)}))}),n&&(0,a.jsx)("p",{className:"my-[96px] m-auto text-center text-base-text-tertiary text-sm",children:"No data yet"}),i&&(0,a.jsx)(L,{})]})},W=e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"hidden md-msq:block",children:(0,a.jsx)(E,{...e})}),(0,a.jsx)("div",{className:"block md-msq:hidden",children:(0,a.jsx)(P,{...e})})]}),O=[{value:"all",label:"All Entries"},{value:"wins",label:"Wins Only"}],Q=()=>{var e,t;const{userEvmWallet:s}=(0,r.useAuth)(),{data:l=[],isPending:d}=v(null==s||null===(e=s.attributes)||void 0===e?void 0:e.address),[o,c]=(0,n.useState)("all"),u=(0,n.useMemo)((()=>"all"===o?l:l.filter((e=>e.prizeInSqr.value))),[o,l]),[m,x]=(0,n.useState)(0),f=(0,n.useMemo)((()=>u.slice(0,5*(m+1))),[u,m]),p=(null==u?void 0:u.length)>5&&u.length>(null==f?void 0:f.length),[h,w]=(0,n.useState)(BigInt(0)),[b,y]=(0,n.useState)(!1),j=(null==u?void 0:u.length)-(null==f?void 0:f.length);return(null==s||null===(t=s.attributes)||void 0===t?void 0:t.address)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start md:items-center mb-8",children:[(0,a.jsx)("h2",{className:"text-h3-a mb-4 md:mb-0",children:"My Raffle Entries"}),(0,a.jsx)(i.M,{wrapperClassName:"max-sm-msq:w-full",className:"w-full md:w-auto bg-base-bg-secondary text-base-text-tertiary rounded-lg",options:O,value:o,onValueChange:e=>{c(e),x(0)}})]}),(0,a.jsx)(W,{onClickRow:e=>{w(e),y(!0)},rounds:f,isLoading:d,isEmpty:!d&&!(null==f?void 0:f.length)}),p&&(0,a.jsxs)("button",{className:"msq-btn msq-btn-secondary msq-btn-md mt-6 max-sm-msq:w-full",onClick:()=>{x((e=>e+1))},disabled:d,children:["Show Next ",Math.min(5,j)]})]}),(0,a.jsx)(g.j,{open:b,onOpenChange:y,closeModal:()=>{y(!1)},roundId:h})]})}},843532:function(e,t,s){s.d(t,{j:function(){return d}});var a=s(939804),n=s(943519),r=s(796771),i=s(11793),l=s(242179);const d=e=>{let{roundId:t,...s}=e;var d;const{userEvmWallet:o}=(0,n.useAuth)(),{data:c}=(0,l.M)(t,null==o||null===(d=o.attributes)||void 0===d?void 0:d.address);return(0,a.jsx)(i.QA,{...s,title:(0,a.jsxs)("div",{children:["My Tickets for ",(0,a.jsxs)("span",{className:"inline-block",children:["Raffle #",String(t)]})]}),titleIsLeftAligned:!0,noSidePadding:!0,size:"sm",footer:(0,a.jsx)(i.PO,{className:"max-sm",children:"Close"}),children:(0,a.jsx)("div",{className:"h-[500px] max-h-[55vh] overflow-auto p-6 flex flex-col gap-6",children:c?(0,a.jsxs)(a.Fragment,{children:[c.wonTicket&&c.prizeInSqr.value>0?(0,a.jsx)(r.dh,{title:"Winning Ticket",tickets:[{code:String(c.wonTicket),isWinner:!0}],showWinText:!1,extraBottom:(0,a.jsxs)("div",{className:"text-caption-sm-a",children:[(0,a.jsxs)("span",{children:["My Reward:"," ",(0,a.jsxs)("span",{className:"text-base-text-orange",children:["+",c.prizeInSqr.formatted]})]}),c.prizeInUsdt.value>0&&(0,a.jsxs)("span",{className:"text-base-text-tertiary",children:[" ","(~",c.prizeInUsdt.formatted,")"]})]})}):null,c.nonWonTickets.length>0&&(0,a.jsx)(r.dh,{title:"All My Tickets",tickets:c.nonWonTickets.map((e=>({code:String(e),isWinner:!1})))})]}):(0,a.jsx)(r.xJ,{title:"All My tickets"})})})}},610512:function(e,t,s){s.d(t,{cz:function(){return u},Ig:function(){return i},Tg:function(){return l}});var a=s(470030),n=s(893889);s(715955),s(477221),s(668e3),s(35013),s(333858);let r;function i(){if(!r)throw new Error('Please call "createAppKit" before using "useAppKit" hook');return{open:async function(e){await(r?.open(e))},close:async function(){await(r?.close())}}}function l(){if(!r)throw new Error('Please call "createAppKit" before using "useAppKitState" hook');const[e,t]=(0,n.useState)(r.getState());return(0,n.useEffect)((()=>{const e=r?.subscribeState((e=>{t({...e})}));return()=>{e?.()}}),[]),e}var d=s(675104);const o="1.6.3";s(78178),s(615336);let c;function u(e){var t;return c||(c=new a.b({...e,sdkVersion:d.j1.generateSdkVersion(e.adapters??[],"react",o)}),(t=c)&&(r=t)),c}}}]);
//# sourceMappingURL=46978-acf90833d167a542.js.map