"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4801,60067],{782969:function(e,t,n){var a=n(130672),s=n(566436);const i=new a.ZP({baseUrl:"https://images.magicsquare.io",key:"e29101b99bab789d80771a9b394d6eea6a39463f5874dd44324981ad1af7d0d76fe28dfc5f36c7b0f52e5ad52689834858bf3618e02a76f3848ae9cb55bb5a79",salt:"48d937d60a1ded847e74ad86082bda0c41ff906f86e5d9449879fb27e0685b9422493d69bc2696f49d8b6d91256dd0056c035ce385392e25364966cb7c0c259d",encode:!0}),r=new a.ZP({baseUrl:"",key:"",salt:"",encode:!0}),o="",c=e=>{let{url:t,width:n,height:a,resizeType:c,dpr:l=1,quality:d,format:u,isClient:h}=e;if(!t)return"";if(t.startsWith("http"))return t;const w=h?o:"s3://prod-magic-store-images/";return(h?r:i).builder().resize(c,n,a,!1).dpr(l).gravity(s.GravityType.center).format(u).quality(d).generateUrl("".concat(w).concat(t))};t.Z=c},891818:function(e,t,n){n.d(t,{xz:function(){return o},fN:function(){return s},sl:function(){return f},o$:function(){return m.o}});var a=n(981395);const s=e=>{const t=a.g.chains.find((t=>t.id===e));var n;return t?null!==(n=t.name.split(" ").at(0))&&void 0!==n?n:"":"Unknown Network"};var i=n(308744),r=n(183941);const o=e=>Object.values(i).find((t=>t.id===e))||r.VQ;var c=n(233552),l=n(206843),d=n(706560),u=n(964072),h=n(661238),w=n(4197),g=n(308411);const f=async e=>{const{targetChain:t=r.VQ,walletType:n,address:s,requiredSqrAmount:i}=e,{chainId:o}=(0,d.D)(a.g),m=a.g.chains.find((e=>e.id===o));if(void 0===m)throw new Error(r.dT.RECONNECT_REQUEST);const E=(0,w.Z)(t,i);if(m.id!==t.id){const i=(new Date).getTime();try{return await Promise.race([(0,u.c)(a.g,{chainId:t.id}),(0,g.Z)({walletType:n,address:s,toastId:i,title:"Waiting for the user to switch the chain...",showExtraInfo:!c.isDesktop})]),l.toast.dismiss(i),await f(e)}catch(t){l.toast.dismiss(i);const n=(0,h.S)(t);if(n.message===r.dT.RETRY)return f(e);if(n.message===E.nativeBalance)throw t;throw new Error(E.chain)}}return E};var m=n(682078)},682078:function(e,t,n){n.d(t,{o:function(){return l}});var a=n(893889),s=n(964072),i=n(530661),r=n(904373),o=n(981395),c=n(535276);const l=()=>{const{disconnectAsync:e}=(0,i.useDisconnect)(),{chain:t}=(0,r.useAccount)(),[n,l]=(0,a.useState)(!1);return{switchChain:(0,a.useCallback)((async n=>{let{destChainId:a,catchErrors:i=!1,terminateConnectionOnError:r=!0}=n;try{a&&(null==t?void 0:t.id)&&t.id!==a&&(l(!0),await(0,s.c)(o.g,{chainId:a}))}catch(t){if(r&&await e(),!i)throw t;(0,c.Z)({error:t})}finally{l(!1)}}),[e,null==t?void 0:t.id]),activeChain:null==t?void 0:t.id,isSwitching:n}}},760067:function(e,t,n){n.r(t);const a={isEvmExtensionActive:()=>Boolean(void 0!==window.ethereum),isTrustWalletExtensionActive:()=>Boolean(void 0!==window.ethereum&&window.ethereum.isTrust),isOKXWalletExtensionActive:()=>Boolean(void 0!==window.okxwallet),isMetamaskExtensionActive:()=>Boolean(void 0!==window.ethereum&&window.ethereum.isMetaMask),getProvider:()=>window.ethereum};t.default=a},4197:function(e,t,n){n.d(t,{N:function(){return s}});var a=n(183941);const s=.002;t.Z=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.VQ,t=arguments.length>1?arguments[1]:void 0;return{chain:'Ensure you are using the "'.concat(e.name,'" network.'),nativeBalance:"Your wallet must have at least ".concat(s," BNB for transaction gas fees."),...t?{sqrBalance:"Insufficient SQR balance. Should not be less than ".concat(t,".")}:{}}}},156558:function(e,t,n){n.d(t,{d:function(){return c}});var a=n(322018),s=n(894644),i=n(891818);const r=BigInt(130),o=BigInt(5e5),c=async e=>{let{abi:t,chainId:n,contractAddress:c,functName:l,walletAddress:d,args:u=[]}=e;const h=(0,i.xz)(n).rpcUrls.default.http[0],w=new a.r(h).getSigner(d),g=new s.CH(c,t,w);try{if(!Array.isArray(u))throw new Error("Args should be array type");const e=await g.estimateGas[l](...u),t=await w.getGasPrice(),n=e.toBigInt(),a=n*r/BigInt(100);return{gasEstimate:n,gasPrice:t.toBigInt(),estimateGasWithExtra:a}}catch(e){return e.message&&console.error("Message error:",e.message),e.transaction&&console.error("transaction error:",e.transaction),e.error&&console.error("Contract error:",e.error.message),{gasEstimate:o,estimateGasWithExtra:o}}}},596164:function(e,t){t.Z=e=>({isSimpleSign:"simple"===e,isSIWE:"SIWE"===e,isSimpleWithNonce:"simple-with-nonce"===e})},75967:function(e,t,n){var a=n(939804),s=n(183941);t.Z=e=>{const t=s.Id[e];return(0,a.jsx)("span",{className:"icon",children:(0,a.jsx)(t,{})})}},124952:function(e,t){t.Z=e=>{const t={borderRadius:"8px",background:"#130e3a",color:"#fff"},n={WalletConnect:{...t,background:"linear-gradient(270deg, #47a1ff 0%, #0059c3 100%)"},WalletConnect2:{...t,background:"linear-gradient(270deg, #47a1ff 0%, #0059c3 100%)"},Phantom:{...t,background:"linear-gradient(90deg, #926ccf 0%, #523fc1 100%)"},Metamask:{...t,background:"linear-gradient(90deg, #F6851B 0%, #f9a461 100%)"},OKX:{...t,background:"linear-gradient(90deg, #000000 0%, #000000b3 100%)"},Trust:{...t,background:"linear-gradient(90deg, #0500ff 0%, #45f899 100%)"},Passkey:t,EVM:t,SOLANA:t};return t||n[e]}},334269:function(e,t){t.Z=e=>{var t;return null!==(t={Metamask:"bg-[#fa7a02] hover:bg-[#de6c00]",WalletConnect:"",WalletConnect2:"",OKX:"",Phantom:"",Trust:"",EVM:"",Passkey:"",SOLANA:""}[e])&&void 0!==t?t:""}},677915:function(e,t){t.Z=e=>({isEVM:"EVM"===e,isMetamask:"Metamask"===e,isOKX:"OKX"===e,isPhantom:"Phantom"===e,isTrust:"Trust"===e,isWalletConnect:"WalletConnect"===e,isPasskey:"Passkey"===e,isWalletConnect2:"WalletConnect2"===e})},1633:function(e,t,n){n.d(t,{Z:function(){return z}});var a=n(893889),s=n(206843),i=n(706560),r=n(367781),o=n(181199),c=n(904373),l=n(948848),d=n(530661),u=n(349391),h=n(553321),w=n(720319),g=n(981395),f=n(183941),m=n(661238),E=n(535276),C=n(891818),T=n(233552),y=n(760067),p=n(121261);var v=e=>{switch(e){case"EVM":return{isReady:!!T.isDesktop&&y.default.isEvmExtensionActive(),errorMessage:"To use this feature, you need an EVM wallet extension (e.g., Metamask) installed in your browser or connect using WalletConnect."};case"Phantom":return{isReady:!!T.isDesktop&&p.default.isPhantomWalletInstalled(),errorMessage:"To proceed, please install the Phantom wallet extension in your browser."};case"Trust":return{isReady:!!T.isDesktop&&y.default.isTrustWalletExtensionActive(),errorMessage:"To proceed, please install the Trust wallet extension in your browser."};case"Metamask":return{isReady:!!T.isDesktop&&y.default.isMetamaskExtensionActive(),errorMessage:"To proceed, please install the Metamask extension in your browser."};case"OKX":return{isReady:!!T.isDesktop&&y.default.isOKXWalletExtensionActive(),errorMessage:"To proceed, please install the OKX wallet extension in your browser."};default:return{isReady:!0,errorMessage:""}}},b=n(162814),S=n(375173);var k=e=>{if(!e)throw new Error(f.dT.EMPTY_ADDRESS);return(0,S.getAddress)(e)},N=n(596164),M=n(75967),A=n(124952),I=n(677915);var P=()=>{const e="WALLETCONNECT_DEEPLINK_CHOICE",t={"https://link.trustwallet.com/wc":{name:"Trust Wallet",href:"trust://"},"https://metamask.app.link/wc":{name:"Metamask",href:"metamask://"}},n=window.localStorage.getItem(e);if(n)try{const{href:a}=JSON.parse(n);if((["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document)&&a in t){const n=t[a];window.localStorage.setItem(e,JSON.stringify(n))}}catch(e){console.error("CustomError: WalletConnect force redirect error",e)}},W=n(610512);let x=null;var _=()=>{const{open:e}=(0,W.Ig)(),{disconnectAsync:t}=(0,d.useDisconnect)(),{open:n}=(0,W.Tg)(),{address:s,chain:i}=(0,c.useAccount)();return(0,a.useEffect)((()=>{!n&&x&&(x(s?{address:s,chain:i}:null),x=null)}),[s,i,n]),(0,a.useCallback)((async()=>(await t(),await e({view:"Connect"}),new Promise((e=>{x=e})))),[e,t])},O=n(308411);var Z=async e=>{let{walletType:t,isDesktop:n}=e;if(n||"WalletConnect"!==t)return;const a=(0,A.Z)(t),i=(new Date).getTime(),r=new Promise((e=>{s.toast.loading("Loading...",{toastId:i,style:a});const t=()=>{document.hidden||setTimeout((()=>{s.toast.dismiss(i),e(null),window.removeEventListener("visibilitychange",t)}),1e3)};window.addEventListener("visibilitychange",t)}));document.hidden&&await r},D=n(888908),R=n(980461),L=n(569720),j=n(778037);var B=async e=>{let{address:t,signature:n,message:a,signType:s,nonce:i}=e;if(!(L.verifyMessage(a,n).toLowerCase()===t.toLowerCase()))throw new Error("Signature verification failed: Address does not match");const{isSIWE:r}=(0,N.Z)(s);if(r)try{const e=new o.SiweMessage(a);if((await e.verify({signature:n})).data.nonce!==i)throw new Error("Signature verification failed: Invalid nonce.")}catch(e){throw(0,j.R)("isDev")&&console.debug(e),new Error("Signature verification failed: Invalid Message.")}};function z(){const e=(0,c.useAccount)(),{open:t}=(0,W.Ig)(),{open:n}=(0,W.Tg)(),{connectAsync:T,connectors:y}=(0,l.useConnect)(),{disconnectAsync:S}=(0,d.useDisconnect)(),{signMessageAsync:x}=(0,u.useSignMessage)(),{isDesktop:L}=(0,w.M)(),[j,z]=(0,a.useState)(!1),{mutateAsync:Q}=(0,h.ntg)(),V=(0,a.useRef)(null),q=_();(0,a.useEffect)((()=>{var t;!n&&e.address&&(null===(t=V.current)||void 0===t||t.call(V,e.address),V.current=null)}),[n,e.address]);const Y=async()=>{await S(),(0,b.Z)()},K=async n=>{let{walletType:a,disabledCache:s,chainId:i=f.VQ.id,shouldWaitWeb3Modal:o,shouldReconnect:c}=n;const{isPhantom:l,isWalletConnect:d,isWalletConnect2:u,isPasskey:h}=(0,I.Z)(a);if(l)try{return await p.default.getAddress()}catch(e){throw new Error("An error occurred while connecting to Solana")}if(h){if(!c&&e.address)return e.address;const t=y.find((e=>"network.passkeys"===e.id));if(!t)throw new Error("Passkey is not available");const n=(await T({connector:t})).accounts[0];if(!n)throw new Error(f.dT.PLEASE_CONNECT_TO_PROCEED);return n}if(u){if(!c&&e.address)return e.address;const t=await q();if(!(null==t?void 0:t.address))throw new Error(f.dT.PLEASE_CONNECT_TO_PROCEED);return t.address}if(d){if(e.address)return e.address;if(await t({view:"Connect"}),!o)throw new Error(f.dT.PLEASE_CONNECT_TO_PROCEED);const n=await new Promise((e=>{V.current=e}));if(!n)throw new Error(f.dT.PLEASE_CONNECT_TO_PROCEED);return n}if(!s&&r.Z.get(f.mJ.MSQ_CONNECTED_WALLET_ADDRESS)&&r.Z.get(f.mJ.MSQ_CONNECTED_WALLET_TYPE)===a)return r.Z.get(f.mJ.MSQ_CONNECTED_WALLET_ADDRESS);const w=e.connector||y[0];return(await T({chainId:i,connector:w})).accounts[0]},U=async e=>{const{walletType:t,targetAddress:n,hideToasts:a=!1,disabledCache:i,chainId:r,shouldWaitWeb3Modal:o,shouldReconnect:c}=e,l=(new Date).getTime();try{const{isPhantom:e}=(0,I.Z)(t),d=(0,M.Z)("EVM"),u=(0,A.Z)("EVM");if(!a){const e=n?"Connecting to ".concat((0,R.Z)(n)):"Connecting...";s.toast.loading(e,{toastId:l,icon:d,style:u,closeOnClick:!0})}const h=await K({walletType:t,disabledCache:i,chainId:r,shouldWaitWeb3Modal:o,shouldReconnect:c});if(!h)throw new Error(f.dT.EMPTY_ADDRESS);let w=e?h:k(h);return n&&n.toLowerCase()!==w.toLowerCase()&&(w=await K({walletType:t,disabledCache:i,chainId:r,shouldWaitWeb3Modal:o,shouldReconnect:!0})),s.toast.update(l,{type:s.toast.TYPE.INFO,render:"Connected",icon:d,style:u,autoClose:3e3,isLoading:!1}),(0,D.Z)(w,t),w}catch(t){s.toast.dismiss(l);if((0,m.S)(t).message===f.dT.CONNECTOR_ALREADY_CONNECTED)return await Y(),U(e);throw t}};return{connectWallet:U,requestSign:async function t(n){const{walletType:a,shouldVerifyChain:r=!1,message:c,skipConnectStep:l,targetAddress:d,hideConnectToasts:u,hideConfirmToast:h,signType:w="simple",nonce:T,shouldReconnect:y}=n;let S=w;const{isPhantom:M,isWalletConnect:W,isWalletConnect2:_}=(0,I.Z)(a),{isReady:D,errorMessage:j}=v(a),{isSimpleSign:z,isSIWE:V,isSimpleWithNonce:q}=(0,N.Z)(S);if(M&&!z&&(S="simple"),!D)throw new Error(j);let K=null!=T?T:"";try{let t,n;const w=e.address&&e.isConnected;if(t=l&&w?k(e.address):await U({walletType:a,targetAddress:d,hideToasts:u,shouldReconnect:y}),!V&&!q||K||M||(K=await Q()),r){if(!await(0,C.sl)({address:t,walletType:a}))throw new Error("Failed to switch the chain. Please to it manually or try again later.")}W&&P(),h||await Z({walletType:a,isDesktop:L});const f=await(async e=>{let{address:t,message:n,nonce:a}=e;const s=t?"".concat(n,": ").concat((0,R.Z)(t)):n;switch(S){case"simple":return s;case"simple-with-nonce":return"".concat(s,"\nNonce: ").concat(a);case"SIWE":{if(!a)throw new Error("Getting a nonce failed");const{chainId:e}=(0,i.D)(g.H.wagmiConfig);try{return new o.SiweMessage({domain:window.location.host,address:t,statement:s,uri:window.location.origin,version:"1",chainId:e,nonce:a}).prepareMessage()}catch(e){throw console.debug(e),new Error("SIWE Message creation failed")}}}})({address:t,message:c,signType:S,nonce:K}),m=(0,A.Z)("EVM"),E=(new Date).getTime();if(!n){const e=W||_&&!L;n=await Promise.race([(G=f,M?p.default.signMessage(G):x({message:G})),(0,O.Z)({walletType:a,address:t,toastId:E,showExtraInfo:e})])}M||await B({address:t,message:f,signature:n,signType:S,nonce:K}),s.toast.dismiss(E);const T="Message signed";return s.toast.success(T,{toastId:T,style:m}),{walletType:a,address:M?t:t.toLowerCase(),network:M?"SOLANA":"EVM",message:f,signature:n,v2:V}}catch(e){s.toast.dismiss();const i=(0,m.S)(e),r={...n,nonce:K};if(i.message===f.dT.CONNECTOR_NOT_FOUND)return(0,b.Z)(),t({...r,hideConfirmToast:!0});if(i.message===f.dT.RECONNECT_REQUEST)return await Y(),t(r);if(i.message===f.dT.RETRY)return t(r);(0,E.Z)({error:e,details:{walletType:a,scope:E.z.SIGN_MESSAGE_REQUEST}})}var G},isLoading:j,setIsLoading:z,web3Account:e}}},308411:function(e,t,n){var a=n(939804),s=n(206843),i=n(212777),r=n(183941),o=n(75967),c=n(124952),l=n(334269),d=n(980461);t.Z=e=>{let{address:t,title:n="Please approve the 'Sign In' request in your wallet...",description:u,toastId:h,walletType:w,showExtraInfo:g,hideRetryButton:f}=e;return new Promise(((e,m)=>{const E=(0,o.Z)(w),C=(0,c.Z)(w),T=(0,l.Z)(w),y=(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center gap-14",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center gap-6",children:[(0,a.jsx)("b",{className:"text-center",children:n}),g&&(0,a.jsxs)("p",{className:"text-center text-sm font-medium",children:["Request has been sent to your wallet app/extension.",(0,a.jsx)("br",{}),t&&(0,a.jsx)("i",{children:(0,d.Z)(t,{start:7})})]}),u&&(0,a.jsx)("span",{className:"text-center text-sm font-medium",children:u})]}),g&&(0,a.jsxs)(a.Fragment,{children:[!f&&(0,a.jsxs)(i.Z,{size:"lg",onClick:()=>{m(new Error(r.dT.RETRY))},toastId:h,minWidth:175,className:T,children:[E,"Try again"]}),(0,a.jsx)(i.Z,{size:"lg",onClick:()=>{m(new Error(r.dT.REQUEST_CANCELLED))},toastId:h,variant:"ghost",className:"opacity-60 hover:opacity-100 !text-neutral-50 bg-transparent",children:"Cancel"})]})]}),p={toastId:h,style:{...C,paddingBlock:g?"32px 16px":""},icon:!1};s.toast.loading(y,p)}))}},888908:function(e,t,n){var a=n(367781),s=n(183941);t.Z=(e,t)=>{a.Z.set(s.mJ.MSQ_CONNECTED_WALLET_ADDRESS,e),a.Z.set(s.mJ.MSQ_CONNECTED_WALLET_TYPE,t)}},121261:function(e,t,n){var a=n(367781),s=n(183941);const i=()=>{if(!window.solana)throw new Error("Solana is not available");return window.solana},r=()=>i().connect(),o={isPhantomWalletInstalled:()=>Boolean(window.solana&&window.solana.isPhantom),getProvider:i,connect:r,signMessage:async e=>{const t=i(),n=(new TextEncoder).encode(e),{signature:a}=await t.signMessage(n,"utf8");return(e=>{let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return window.btoa(t)})(a)},getAddress:async()=>{if(!window.solana)throw new Error("Solana is not available");return(await window.solana.connect()).publicKey.toString()},subscribeToAccountChanges:()=>{i().on("accountChanged",(()=>{var e,t;"Phantom"===a.Z.get(s.mJ.MSQ_CONNECTED_WALLET_TYPE)&&window&&"__logoutClient"in window&&(null===(e=(t=window).__logoutClient)||void 0===e||e.call(t))}))},sendTransaction:async e=>{const t=i();await r();const{signature:n}=await t.request({method:"signAndSendTransaction",params:{message:e,options:{skipPreflight:!0}}});return n}};t.default=o},980461:function(e,t){t.Z=function(e){let{start:t=6,end:n=4,ellipsis:a="..."}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.length<=t+n?e:"".concat(e.slice(0,t)).concat(a).concat(e.slice(-n))}},95761:function(e,t,n){n.d(t,{IH:function(){return u},ex:function(){return f}});var a=n(939804),s=n(891818),i=n(847547),r=n(456901);const o=e=>{let{onConnectSwitchToChainId:t}=e;const{login:n,isLogging:o}=(0,i.f)(),{switchChain:c}=(0,s.o$)();return(0,a.jsx)(r.z,{disabled:o,onClick:async()=>{await n({signMessage:"Confirm authorization in Magic Store with your wallet"}),t&&c({destChainId:t})},type:"button",size:"large",width:"100%",children:"Connect Wallet"})};var c=n(943519),l=n(682078);const d=e=>{let{destChainId:t}=e;const{switchChain:n,isSwitching:i}=(0,s.o$)(),o=(0,s.fN)(t);return(0,a.jsx)(r.z,{disabled:i,onClick:()=>{n({destChainId:t})},type:"button",size:"large",width:"100%",children:"Switch to ".concat(o," Chain")})},u=e=>{let{children:t,placeholder:n,requiredChainId:s}=e;const{userEvmWallet:i}=(0,c.useAuth)(),{activeChain:r}=(0,l.o)();return i?s&&s!==r?(0,a.jsx)(d,{destChainId:s}):t:null!=n?n:(0,a.jsx)(o,{onConnectSwitchToChainId:s})};var h=n(183941),w=n(490650),g=n(990592);const f=e=>{let{tokenName:t}=e;var n;const{userEvmWallet:a}=(0,c.useAuth)(),{contractsAddresses:s}=h.f5[t],i=(e=>{let{address:t,token:n,chainId:a}=e;return(0,g.useBalance)({query:{enabled:!!t,staleTime:0},address:t,token:n,chainId:a})})({address:null==a?void 0:a.attributes.address,token:s.token,chainId:h.VQ.id});return(null==i?void 0:i.data)?{...i,data:(0,w.eS)({wei:null==i||null===(n=i.data)||void 0===n?void 0:n.value,tokenName:t})}:i}},542140:function(e,t,n){var a=n(893889),s=n(233552),i=n(69839),r=n(782969);const o=function(){let{size:e,isTablet:t,isMobile:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"number"==typeof e||void 0===e?e:n&&e[2]?e[2]:t&&e[1]?e[1]:e[0]};t.Z=e=>{let{width:t,height:n,resizeType:c="fill",format:l="webp",src:d,isClient:u}=e;const[h,w]=(0,a.useState)(d||i.r4);(0,a.useEffect)((()=>{d&&h!==d&&w(d)}),[d]);const g=o({size:t,isMobile:s.isMobile,isTablet:s.isTablet}),f=o({size:n,isMobile:s.isMobile,isTablet:s.isTablet}),m=(0,a.useCallback)((e=>{let{src:t,width:n,quality:a=60}=e;const s=g&&f?((e,t,n)=>Math.round(t/e*n))(Number(g),Number(f),n):void 0;return(0,r.Z)({url:t,width:n,height:s,resizeType:c,quality:a,format:l,isClient:u})}),[g,f,c,l]);return{hasLoader:!h||"string"==typeof h&&!/^(?:http|data)/.test(h),loader:m,width:g,height:f,resizeType:c,format:l,src:h,setSrc:w}}}}]);
//# sourceMappingURL=4801-d94678a7532eba7d.js.map