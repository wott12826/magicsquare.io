"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[84784],{684784:function(e,t,r){r.d(t,{S$:function(){return u},jx:function(){return a},v1:function(){return T}});var n=function(){try{if("undefined"==typeof localStorage)return!1;const e="nuqs-localStorage-test";localStorage.setItem(e,e);const t=localStorage.getItem(e)===e;if(localStorage.removeItem(e),!t)return!1}catch(e){return console.error("[nuqs]: debug mode is disabled (localStorage unavailable).",e),!1}const e=localStorage.getItem("debug")??"";return e.includes("nuqs")||e.includes("next-usequerystate")}();function s(e,...t){if(!n)return;const r=function(e,...t){return e.replace(/%[sfdO]/g,(e=>{const r=t.shift();return"%O"===e&&r?JSON.stringify(r).replace(/"([^"]+)":/g,"$1:"):String(r)}))}(e,...t);performance.mark(r),console.log(e,...t)}function o(e,t,r){try{return e(t)}catch(e){return function(e,...t){n&&console.warn(e,...t)}("[nuqs] Error while parsing value `%s`: %O"+(r?" (for key `%s`)":""),t,e,r),null}}function l(e){function t(t){if(void 0===t)return null;let r="";if(Array.isArray(t)){if(void 0===t[0])return null;r=t[0]}return"string"==typeof t&&(r=t),o(e.parse,r)}return{eq:(e,t)=>e===t,...e,parseServerSide:t,withDefault(e){return{...this,defaultValue:e,parseServerSide(r){return t(r)??e}}},withOptions(e){return{...this,...e}}}}l({parse:e=>e,serialize:e=>`${e}`}),l({parse:e=>{const t=parseInt(e);return Number.isNaN(t)?null:t},serialize:e=>Math.round(e).toFixed()}),l({parse:e=>{const t=parseInt(e,16);return Number.isNaN(t)?null:t},serialize:e=>{const t=Math.round(e).toString(16);return t.padStart(t.length+t.length%2,"0")}}),l({parse:e=>{const t=parseFloat(e);return Number.isNaN(t)?null:t},serialize:e=>e.toString()}),l({parse:e=>"true"===e,serialize:e=>e?"true":"false"}),l({parse:e=>{const t=parseInt(e);return Number.isNaN(t)?null:new Date(t)},serialize:e=>e.valueOf().toString()}),l({parse:e=>{const t=new Date(e);return Number.isNaN(t.valueOf())?null:t},serialize:e=>e.toISOString()});function a(e){return l({parse:t=>{const r=t;return e.includes(r)?r:null},serialize:e=>e.toString()})}function u(e,t=","){const r=e.eq??((e,t)=>e===t),n=encodeURIComponent(t);return l({parse:r=>""===r?[]:r.split(t).map(((r,s)=>o(e.parse,r.replaceAll(n,t),`[${s}]`))).filter((e=>null!=e)),serialize:r=>r.map((r=>(e.serialize?e.serialize(r):String(r)).replaceAll(t,n))).join(t),eq(e,t){return e===t||e.length===t.length&&e.every(((e,n)=>r(e,t[n])))}})}function i(e){if(0===e.size)return"";const t=[];for(const[n,s]of e.entries()){const e=n.replace(/#/g,"%23").replace(/&/g,"%26").replace(/\+/g,"%2B").replace(/=/g,"%3D").replace(/\?/g,"%3F");t.push(`${e}=${r=s,r.replace(/%/g,"%25").replace(/\+/g,"%2B").replace(/ /g,"+").replace(/#/g,"%23").replace(/&/g,"%26").replace(/"/g,"%22").replace(/'/g,"%27").replace(/`/g,"%60").replace(/</g,"%3C").replace(/>/g,"%3E")}`)}var r;return"?"+t.join("&")}var c={409:"Multiple versions of the library are loaded. This may lead to unexpected behavior. Currently using `%s`, but `%s` was about to load on top.",429:"URL update rate-limited by the browser. Consider increasing `throttleMs` for key(s) `%s`. %O",500:"Empty search params cache. Search params can't be accessed in Layouts.",501:"Search params cache already populated. Have you called `parse` twice?"};function f(e){return`[nuqs] ${c[e]}\n  See https://err.47ng.com/NUQS-${e}`}var h=r(383737),p=r(893889),g=function(){if("undefined"==typeof window)return 50;if(!Boolean(window.GestureEvent))return 50;try{const e=navigator.userAgent?.match(/version\/([\d\.]+) safari/i);return parseFloat(e[1])>=17?120:320}catch{return 320}}(),d=new Map,y={history:"replace",scroll:!1,shallow:!0,throttleMs:g},m=new Set,w=0,S=null;function q(e,t,r,n){const o=null===t?null:r(t);return s("[nuqs queue] Enqueueing %s=%s %O",e,o,n),d.set(e,o),"push"===n.history&&(y.history="push"),n.scroll&&(y.scroll=!0),!1===n.shallow&&(y.shallow=!1),n.startTransition&&(m.add(n.startTransition),y.shallow=!1),y.throttleMs=Math.max(n.throttleMs??g,Number.isFinite(y.throttleMs)?y.throttleMs:0),o}function v(e){return d.get(e)??null}function b(e){return null===S&&(S=new Promise(((t,r)=>{if(!Number.isFinite(y.throttleMs))return s("[nuqs queue] Skipping flush due to throttleMs=Infinity"),t(new URLSearchParams(location.search)),void setTimeout((()=>{S=null}),0);function n(){w=performance.now();const[n,o]=function(e){const t=new URLSearchParams(location.search);if(0===d.size)return[t,null];const r=Array.from(d.entries()),n={...y},o=Array.from(m);d.clear(),m.clear(),y.history="replace",y.scroll=!1,y.shallow=!0,y.throttleMs=g,s("[nuqs queue] Flushing queue %O with options %O",r,n);for(const[e,n]of r)null===n?t.delete(e):t.set(e,n);try{const r=window.next?.router;if("string"==typeof r?.state?.asPath){const e=_(r.state.asPath.split("?")[0]??"",t);s("[nuqs queue (pages)] Updating url: %s",e);("push"===n.history?r.push:r.replace).call(r,e,e,{scroll:n.scroll,shallow:n.shallow})}else{const r=_(location.origin+location.pathname,t);s("[nuqs queue (app)] Updating url: %s",r);const l="push"===n.history?history.pushState:history.replaceState,a=(window.next?.version??"")>="14.1.0"?null:history.state;l.call(history,a,M,r),n.scroll&&window.scrollTo(0,0),n.shallow||function(e,t){const r=n=>{if(n===e.length)return t();const s=e[n];if(!s)throw new Error("Invalid transition function");s((()=>r(n+1)))};r(0)}(o,(()=>{e.replace(r,{scroll:!1})}))}return[t,null]}catch(e){return console.error(f(429),r.map((([e])=>e)).join(),e),[t,e]}}(e);null===o?t(n):r(n),S=null}setTimeout((function(){const e=performance.now()-w,t=y.throttleMs,r=Math.max(0,Math.min(t,t-e));s("[nuqs queue] Scheduling flush in %f ms. Throttled at %f ms",r,t),0===r?n():setTimeout(n,r)}),0)}))),S}function _(e,t){return(e.split("#")[0]??"")+i(t)+location.hash}var O,N=Symbol("__nuqs__SYNC__"),M="__nuqs__NO_SYNC__",z=Symbol("__nuqs__NOTIFY__"),I={all:O=O||new Map,on:function(e,t){var r=O.get(e);r?r.push(t):O.set(e,[t])},off:function(e,t){var r=O.get(e);r&&(t?r.splice(r.indexOf(t)>>>0,1):O.set(e,[]))},emit:function(e,t){var r=O.get(e);r&&r.slice().map((function(e){e(t)})),(r=O.get("*"))&&r.slice().map((function(r){r(e,t)}))}};function T(e,{history:t="replace",shallow:r=!0,scroll:n=!1,throttleMs:l=g,parse:a=e=>e,serialize:u=String,eq:i=(e,t)=>e===t,defaultValue:c,clearOnDefault:f=!1,startTransition:d}={history:"replace",scroll:!1,shallow:!0,throttleMs:g,parse:e=>e,serialize:String,eq:(e,t)=>e===t,clearOnDefault:!1,defaultValue:void 0}){const y=(0,h.useRouter)(),m=(0,h.useSearchParams)(),w=p.useRef(null),[S,_]=p.useState((()=>{const t=v(e),r=m?.get(e)??null,n=t??r;return w.current=n,null===n?null:o(a,n,e)})),O=p.useRef(S);s("[nuqs `%s`] render - state: %O, iSP: %s",e,S,m?.get(e)??null),p.useEffect((()=>{if("14.0.3"!==window.next?.version)return;const t=m.get(e)??null;if(t===w.current)return;const r=null===t?null:o(a,t,e);s("[nuqs `%s`] syncFromUseSearchParams %O",e,r),O.current=r,w.current=t,_(r)}),[m?.get(e),e]),p.useInsertionEffect((()=>{function t({state:t,query:r}){s("[nuqs `%s`] updateInternalState %O",e,t),O.current=t,w.current=r,_(t)}function r(r){const n=r.get(e);if(n===w.current)return;const l=null===n?null:o(a,n,e);s("[nuqs `%s`] syncFromURL %O",e,l),t({state:l,query:n})}return s("[nuqs `%s`] subscribing to sync",e),I.on(N,r),I.on(e,t),()=>{s("[nuqs `%s`] unsubscribing from sync",e),I.off(N,r),I.off(e,t)}}),[e]);const M=p.useCallback(((s,o={})=>{let a=function(e){return"function"==typeof e}(s)?s(O.current??c??null):s;return(o.clearOnDefault??f)&&null!==a&&void 0!==c&&i(a,c)&&(a=null),w.current=q(e,a,u,{history:o.history??t,shallow:o.shallow??r,scroll:o.scroll??n,throttleMs:o.throttleMs??l,startTransition:o.startTransition??d}),I.emit(e,{state:a,query:w.current}),b(y)}),[e,t,r,n,l,d]);return[S??c??null,M]}"object"==typeof history&&function(){const e="1.19.3",t=history.__nuqs_patched;if(t)return void(t!==e&&console.error(f(409),t,e));s("[nuqs] Patching history with %s",e);for(const e of["pushState","replaceState"]){const t=history[e].bind(history);history[e]=function(r,n,o){if(!o)return s("[nuqs] history.%s(null) (%s) %O",e,n,r),t(r,n,o);const l=n===M?"internal":"external",a=new URL(o,location.origin).searchParams;if(s("[nuqs] history.%s(%s) (%s) %O",e,o,l,r),"external"===l){for(const[e,t]of a.entries()){const r=v(e);null!==r&&r!==t&&(s("[nuqs] Overwrite detected for key: %s, Server: %s, queue: %s",e,t,r),a.set(e,r))}setTimeout((()=>{s("[nuqs] External history.%s call: triggering sync with %s",e,a),I.emit(N,a),I.emit(z,{search:a,source:l})}),0)}else setTimeout((()=>{I.emit(z,{search:a,source:l})}),0);return t(r,n===M?"":n,o)}}Object.defineProperty(history,"__nuqs_patched",{value:e,writable:!1,enumerable:!1,configurable:!1})}()}}]);
//# sourceMappingURL=84784-c1ec93817019e03d.js.map