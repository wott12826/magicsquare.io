"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[85888],{239032:function(e,t,i){var n=i(939804),a=(i(893889),i(347177)),o=i.n(a),r=i(242898),s=i(94095);t.Z=e=>{let{query:t,content:i,isEmpty:a,loading:l,className:c}=e;const{isError:u,isLoading:d,error:m,refetch:p}=t,f=!u&&d,h=!d&&!u&&a,y=!d&&u;return f||h||y?(0,n.jsxs)("div",{className:o()("flex flex-col flex-1",c),children:[f&&(l||(0,n.jsx)(r.$j,{className:"m-auto"})),h&&(0,n.jsx)("p",{className:"m-auto text-center text-[#9A9AAC]",children:"Empty"}),y&&(0,n.jsxs)("div",{className:"flex flex-col gap-3 m-auto",children:[(0,n.jsxs)("p",{className:"text-center text-secondary-600",children:["Error happened while loading:",(0,n.jsx)("br",{}),(0,s.e)(m)]}),(0,n.jsx)("button",{className:"msq-btn msq-btn-md msq-btn-primary mx-auto",onClick:()=>{p()},children:"Try Again"})]})]}):i}},796771:function(e,t,i){i.d(t,{dX:function(){return n.d},ri:function(){return a.r},DW:function(){return o.D},dh:function(){return r.d},xJ:function(){return l.x},BI:function(){return s.B},Xd:function(){return L},C9:function(){return k},nY:function(){return Q},OX:function(){return O},aL:function(){return M},M6:function(){return D},Wr:function(){return G},E6:function(){return K},N0:function(){return U},cS:function(){return T},Fu:function(){return S},BC:function(){return q},Zh:function(){return A},p5:function(){return V}});var n=i(992351),a=i(423604),o=i(873350),r=i(802314),s=i(353937),l=i(952821),c=(i(912919),i(278394)),u=i(730121),d=i(530661),m=i(56631),p=i(97516),f=i(661238),h=i(834167),y=i(974801),x=i(94095);const g=e=>{let{poolId:t,key:i,increment:n,queryClient:a}=e;a.setQueriesData({queryKey:[h.bj]},(e=>e?{...e,pages:e.pages.map((e=>({...e,pools:e.pools.map((e=>{const a=e[i];return e.id===t&&null!==a?{...e,[i]:a+n}:e}))})))}:e))},q=e=>{const{disconnectAsync:t}=(0,d.useDisconnect)(),{refetch:i}=(0,h.PD)(e,{enabled:!1}),n=(0,c.useQueryClient)(),{getSignProps:a}=(0,y.K)();return(0,u.useMutation)({mutationFn:async e=>{let{rewardPool:n,entryCurrency:o,entryAmount:r,signMessage:s=""}=e;const{data:l,error:c}=await i();if(c)throw c;if(!l)throw new Error("We couldn't verify if the requirements were met. Please try again.");if(n.access_policy.operator===p.O9.AND){const e=l.every((e=>{let{qualified:t}=e;return t}));if(!e)throw new Error("Please make sure all pool requirements are met.")}else{const e=l.some((e=>{let{qualified:t}=e;return t}));if(!e)throw new Error("Please ensure at least one of the pool requirement is met.")}try{const e="Join ".concat(n.name," Reward Pool at Magic Store"),t=await a(s||e);await(async e=>{if(e)try{await(0,m.a_)({rewardPoolId:n.id,data:{...e,entryCurrency:o,entryAmount:r}})}catch(e){if((0,x.e)(e).includes("access policies"))throw new Error("Please complete all pool requirement before joining the pool.");throw e}})(t)}catch(e){const i=(0,f.S)(e);throw"Account not provided"===i.message&&await t(),i}},onSuccess:(e,t)=>{let{rewardPool:i}=t;n.setQueryData((0,h.fo)().queryKey,(e=>e?{...e,myPoolIds:[...e.myPoolIds,i.id]}:{pools:[],myPoolIds:[i.id]})),g({poolId:i.id,key:"participants_counter",increment:1,queryClient:n}),n.invalidateQueries({queryKey:h.eT.rewardPool(i.id)}),n.invalidateQueries({queryKey:h.eT.rewardPoolLeaderboardInfinite(i.id)}),n.invalidateQueries({queryKey:(0,h.E7)(i.id).queryKey})}})};var w=i(943519);const S=e=>{let{rewardPool:t}=e;const{isAuth:i,isLoading:n}=(0,w.useAuth)(),{data:a=i&&Boolean(t.userJoined),isLoading:o}=(0,h.th)(t.id,{enabled:i&&"boolean"!=typeof t.userJoined});return{isJoined:a,isLoading:o||n}};var b=i(553321),E=i(562527),_=i(490650),j=i(249312);const T=e=>{let{rewardPool:t}=e;const{mutateAsync:i}=q(t.id),{check:n}=(0,E.Z)(),a=(0,c.useQueryClient)(),{getSignProps:o}=(0,y.K)(),{isJoined:r,isLoading:s}=S({rewardPool:t});return(0,u.useMutation)({mutationFn:async e=>{let{currencyType:a,entryAmount:l}=e;if(s)return;const c=(e=>{let{rewardPool:t,currencyType:i,entryAmount:n}=e;const a=i.currency===p.xp.FREE?"using ".concat(n," free tickets"):"using ".concat((0,_.ol)((0,j.v_)(n*i.price),i.currency,{stableToDollar:!1})," from your MagicID");return"Buy ".concat(n," ticket/s to participate in ").concat(t.name," ").concat(a)})({rewardPool:t,currencyType:a,entryAmount:l});if(r){const e=await o(c);return await(0,m.ZR)({rewardPoolId:t.id,entryCurrency:a.currency,entryAmount:l,...e}),l}return n({auth:!0,evmWallet:!0})?(await i({signMessage:c,rewardPool:t,entryCurrency:a.currency,entryAmount:l}),l):0},onSuccess:e=>{e&&g({poolId:t.id,key:"entries_counter",increment:e,queryClient:a}),a.invalidateQueries({queryKey:h.eT.rewardPool(t.id)}),a.invalidateQueries({queryKey:b.G7Q.userBalances(t.id)}),a.invalidateQueries({queryKey:h.eT.selfRewardPoolEntries(t.id)}),a.invalidateQueries({queryKey:h.eT.rewardPoolLeaderboardInfinite(t.id)}),a.invalidateQueries({queryKey:(0,h.E7)(t.id).queryKey})}})},v={[p.xp.SQR]:0,[p.xp.SQRp]:0,[p.xp.USDT]:0,[p.xp.FREE]:0},A=e=>{let{poolId:t}=e;const{data:i=[],isLoading:n}=(0,h.CU)(t);return{entriesAmountByCurrency:i.reduce(((e,t)=>(e[t.currency]+=1,e)),{...v}),isLoading:n}},D=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return null==e?void 0:e.filter((e=>e.reward))};var C=i(893889),R=i(722522);const P=e=>{let{poolId:t,entrieLeft:i,queryClient:n}=e;n.setQueriesData({queryKey:[h.bj]},(e=>e?{...e,pages:e.pages.map((e=>({...e,pools:e.pools.map((e=>e.id===t?{...e,entries_counter:((null==e?void 0:e.entries_max)||0)-i}:e))})))}:e))},I=e=>{let{poolId:t,entrieLeft:i,queryClient:n}=e;n.setQueriesData({queryKey:(0,h.o0)(t)},(e=>e?{...e,entries_counter:((null==e?void 0:e.entries_max)||0)-i}:e))},V=e=>{let{type:t}=e;const i=(0,c.useQueryClient)(),{isAuth:n}=(0,w.useAuth)(),{socket:a}=(0,R.sV)(),o="list"===t?P:I;(0,C.useEffect)((()=>{if(a&&n)return null==a||a.emit("call","join",{room:"reward-pool"}),a.on("entry.bought",(e=>{o({poolId:e.poolId,entrieLeft:e.entriesLeft,queryClient:i})})),()=>{null==a||a.emit("call","left",{room:"reward-pool"}),a.off("entry.bought")}}),[a,n])};var N=i(129529);const k=e=>{const{isFcfs:t,isRaffle:i,isProRata:n}=(0,N.Q)(e.distribution_policy),a=(e.participants_max||0)-e.participants_counter,o=t&&a>0,r=i&&(!e.participants_max||a>0),s=n||o||r;return G(e)&&s},F=e=>{if(e.distribution_policy!==p.Us.RAFFLE_V2)return 0;const t=e.access_policy.policies.find((e=>e.name===p.V3.TICKET));return t?t.options.limitPerUser:0},O=(e,t)=>{const i=F(e),n=e.entries_max||0,a=e.entries_counter||0;return t>=i||a>=n},M=e=>{let{balance:t,price:i}=e;return t&&i?parseInt(String(t/i)):0},L=e=>{let{price:t,balance:i,entryAmount:n,rewardPool:a}=e;if(!i||!t||!a.entries_max||"number"!=typeof(null==a?void 0:a.entries_counter))return 0;const o=F(a)-n,r=a.entries_max-a.entries_counter,s=M({balance:i,price:t});return Math.min(o,r,s)},Q=e=>{let{price:t,balance:i,entryAmount:n}=e;return parseInt(String(n))*t>i},U=e=>e.status===p.iS.PENDING&&new Date(e.start_date)>new Date,G=e=>e.status===p.iS.ACTIVE&&new Date(e.end_date)>new Date||e.status===p.iS.PENDING&&new Date>=new Date(e.start_date),K=e=>e.status===p.iS.COMPLETED||e.status===p.iS.ACTIVE&&new Date>new Date(e.end_date)},7045:function(e,t,i){i.d(t,{l:function(){return b}});var n=i(939804),a=i(583590),o=i.n(a),r=i(827299),s=i(43513),l=i(97516),c=i(183941),u=i(696434),d=i(9910),m=i(452338),p=i(436172),f=i(414092);const h="/store",y=e=>{let{href:t,children:i}=e;return(0,n.jsx)(r.d,{className:"text-base-text-pink inline-flex gap-0.5 items-center",href:t,children:i})},x=new Intl.DateTimeFormat("en-US",{dateStyle:"medium",timeStyle:"long"}),g=e=>{let{date:t,inlcudeYear:i}=e;return(0,n.jsx)(f.u,{trigger:(0,n.jsx)("span",{className:"whitespace-nowrap cursor-pointer border-dashed border-[color:--text-text-quaternary] border-b",children:t.toLocaleDateString("en-US",{day:"numeric",month:"short",year:i?"numeric":void 0})}),message:x.format(t),contentClassName:"whitespace-nowrap"})},q=e=>{let{startDate:t,endSate:i}=e;return(0,n.jsxs)("span",{className:"whitespace-nowrap",children:[(0,n.jsx)(g,{date:t,inlcudeYear:t.getFullYear()!==i.getFullYear()})," and ",(0,n.jsx)(g,{date:i,inlcudeYear:t.getFullYear()!==i.getFullYear()})]})},w=e=>{let{text:t,policy:i}=e;const a=i.start_date?new Date(i.start_date):null,o=i.end_date?new Date(i.end_date):null;return a&&o?(0,n.jsxs)(n.Fragment,{children:["object"==typeof t&&"customFulfillmentPeriod"in t?t.customFulfillmentPeriod:t," between ",(0,n.jsx)(q,{startDate:a,endSate:o})]}):"object"==typeof t&&"defaultFulfillmentPeriod"in t?t.defaultFulfillmentPeriod:t},S={[l.V3.WHITELIST]:e=>({id:"whitelist",title:"Wallet Whitelist",description:e.description,qualified:e.qualified}),[l.V3.HOT_OFFERS_CLAIMED]:e=>(e.hotOffersExpanded||[]).map((e=>{let{id:t,name:i,slug:a,isClaimed:o}=e;const l="".concat(h,"/hot-offers/").concat(a);return{id:"hot-offer-".concat(t),title:"Hot Offer Claimed",qualified:o,action:{label:"Go to Hot Offer",href:l},description:(0,n.jsxs)(n.Fragment,{children:["Successfully claim"," ",(0,n.jsxs)(r.d,{className:"text-base-text-red inline-flex gap-0.5 items-center",href:l,children:[i," ",(0,n.jsx)(s.Z,{className:"icon-2xs"})]})]})}})),[l.V3.KARMA_LIMIT]:e=>({id:"min-karma-".concat(e.options.minimal_karma),title:"Minimum Karma",description:(0,n.jsx)(w,{text:"Earn a minimum of ".concat(e.options.minimal_karma," Karma Points between "),policy:e}),qualified:e.qualified,action:{label:"Earn Karma",href:"".concat(h,"/profile/karma-rewards-guide")}}),[l.V3.MEMBERSHIP_TIERS]:e=>{const t=e.options.membership_tiers.map((e=>u.n[e].name)),i=t.length>1?"".concat(t.slice(0,-1).join(", ")," or ").concat(t[t.length-1]):t[0];return{id:"membership",title:"Membership Tier",description:"Have ".concat(i," Membership"),qualified:e.qualified,action:{label:"Magic Membership",href:"".concat(h,"/profile/membership/plans")}}},[l.V3.HOT_OFFERS_AMOUNT]:e=>{const t=e.options.claimed_amount||0,i="".concat(h,"/hot-offers");return{id:"hot-offers-amount",title:"Hot Offer Claimed in Number - All Time",description:(0,n.jsx)(w,{text:(0,n.jsxs)(n.Fragment,{children:["Claim a minimum of ",t," ",(0,n.jsxs)(y,{href:i,children:["Hot Offer",1!==t?"s":""," ",(0,n.jsx)(s.Z,{className:"icon-2xs"})]})]}),policy:e}),qualified:e.qualified,action:{label:"Go to Hot Offers",href:i}}},[l.V3.APPLICATIONS_VOTED]:e=>(e.appsExpanded||[]).map((t=>{let{id:i,name:a,slug:o}=t;const r="".concat(h,"/app/").concat(o,"/validation");return{id:"app-validation-".concat(i),title:"Validation - Specific Validation",qualified:e.qualified,action:{label:"Go to Validation",href:r},description:(0,n.jsxs)(n.Fragment,{children:["Participate in"," ",(0,n.jsxs)(y,{href:r,children:[a," Validation ",(0,n.jsx)(s.Z,{className:"icon-2xs"})]})]})}})),[l.V3.STAKED_SQR]:e=>({id:"staked-sqr",title:"Staking - Currently Staking",description:(0,n.jsx)(w,{text:"Stake minimum of ".concat(e.options.amount," SQR amount"),policy:e}),qualified:e.qualified,action:{label:"Go to Staking",href:d.FQ.staking}}),[l.V3.APPLICATIONS_VOTED_AMOUNT]:e=>{const t="".concat(h,"/profile/validation-tasks");return{id:"application-voted-amount",title:"Validation - Number of Validations",description:(0,n.jsx)(w,{text:(0,n.jsxs)(n.Fragment,{children:["Participate in minimum ",e.options.amount," ",(0,n.jsxs)(y,{href:t,children:["Project ",(0,m.DV)("Validation",e.options.amount)," ",(0,n.jsx)(s.Z,{className:"icon-2xs"})]})]}),policy:e}),qualified:e.qualified,action:{label:"Go to Validations",href:t}}},[l.V3.USER_DAILY_LOGIN_AMOUNT]:e=>({id:"user-daily-logins",title:"Daily Logins",description:(0,n.jsx)(w,{text:"Log in daily minimum of ".concat(e.options.amount," ").concat((0,m.DV)("Time",e.options.amount)),policy:e}),qualified:e.qualified}),[l.V3.USER_ACCOUNT_AGE]:e=>({id:"user-account-age",title:"Age of Account Magic ID",description:(0,n.jsxs)(n.Fragment,{children:["Have Magic ID account minimum ",e.options.daysAmount," of day",1!==e.options.daysAmount?"s":""," old"]}),qualified:e.qualified}),[l.V3.SWAP_TOKEN_TOTAL]:e=>{var t;return{id:"swap-token-total",title:"Token-Specific Swap Volume",description:(0,n.jsx)(w,{text:"Execute swaps for Token ".concat(null===(t=e.options.tokenSymbol)||void 0===t?void 0:t.toUpperCase()," with a minimum total volume of ").concat(e.options.minAmount," on Magic Swap"),policy:e}),qualified:e.qualified,action:{label:"Go to Swap",href:"https://magicsquare.io/swap"}}},[l.V3.SWAP_TOTAL_IN_USD]:e=>({id:"swap-token-total-in-usdt",title:"General Swap Volume",description:(0,n.jsx)(w,{text:"Complete token swaps with a cumulative total volume of at least ".concat((0,p.gC)(e.options.minAmount)," on Magic Swap"),policy:e}),qualified:e.qualified,action:{label:"Go to Swap",href:"https://magicsquare.io/swap"}}),[l.V3.USER_DISCORD_ROLE]:e=>({id:"user-discord-role",title:"Discord Role",description:(0,n.jsxs)(n.Fragment,{children:["Hold"," ",(0,m.If)(e.rolesExpanded.map((e=>{let{name:t}=e;return t})),", ","and")," ","Discord ",(0,m.DV)("role",e.options.rolesIds.length)]}),qualified:e.qualified,action:{label:"Go to Discord",href:c.Vs}}),[l.V3.HOLDING_SQR]:e=>({id:"holding-sqr",title:"Hold SQR",description:(0,n.jsx)(w,{text:(0,n.jsxs)("span",{children:["Hold at least ",e.options.minAmount," SQR in your ",(0,n.jsx)(y,{href:"".concat(h,"/profile/magic-id"),children:"MagicID Balance"})]}),policy:e}),qualified:e.qualified,action:{label:"Buy SQR",href:d.Zt.swap("/")}}),[l.V3.HOLDING_SQRP]:e=>({id:"holding-sqrp",title:"Holding X Amount SQRp",description:(0,n.jsx)(w,{text:{defaultFulfillmentPeriod:"Hold minimum of ".concat(e.options.amount," SQRp"),customFulfillmentPeriod:"Earn minimum of ".concat(e.options.amount," SQRp")},policy:e}),qualified:e.qualified,action:{label:"Earn SQRp",href:d.FQ.staking}}),[l.V3.HOLDING_SQRV]:e=>({id:"holding-sqrv",title:"Holding X Amount SQRv",description:(0,n.jsxs)(n.Fragment,{children:["Hold minimum of ",e.options.amount," SQRv"]}),qualified:e.qualified,action:{label:"Earn SQRv",href:"https://docs.magicsquare.io/magic-dao/how-to-get-voting-power-in-the-magic-square-dao"}}),[l.V3.POW_OFFERS_AMOUNT]:e=>{const t="".concat(h,"/magic-board");return{id:"pow-offers-amount",title:"Magic Board - Number of Tasks All Time",description:(0,n.jsx)(w,{text:(0,n.jsxs)(n.Fragment,{children:["Complete a minimum of ",e.options.claimed_amount," ",(0,n.jsxs)(y,{href:t,children:["Magic Board Tasks ",(0,n.jsx)(s.Z,{className:"icon-2xs"})]})]}),policy:e}),qualified:e.qualified,action:{label:"Go to Magic Board",href:t}}},[l.V3.POW_OFFERS_CLAIMED]:e=>(e.hotOffersExpanded||[]).map((t=>{let{id:i,name:a,slug:o}=t;const r="".concat(h,"/magic-board/").concat(o);return{id:"pow-offer-".concat(i),title:"Magic Board - Specific Task",qualified:e.qualified,action:{label:"Go to Task",href:r},description:(0,n.jsxs)(n.Fragment,{children:["Complete the"," ",(0,n.jsxs)(y,{href:r,children:['"',a,'" ',(0,n.jsx)(s.Z,{className:"icon-2xs"})]})," ","Magic Board Task"]})}})),[l.V3.REFERRED_AMOUNT]:e=>({id:"referred-amount",title:"Refer a Friend",description:(0,n.jsx)(w,{text:"Invite minimum of ".concat(e.options.amount," friends"),policy:e}),qualified:e.qualified,action:{label:"Invite Friends",href:"".concat(h,"/refer-a-friend")}}),[l.V3.PROJECT_PARTICIPANT]:e=>{var t,i,a;const o=(null===(t=e.project)||void 0===t?void 0:t.slug)||"",r="".concat("https://magicsquare.io/launchpad","/projects/").concat(o),l=(null==e||null===(i=e.options)||void 0===i?void 0:i.amount)||0;return{id:"participation-ido",title:"Participate in Specific Token Sale",description:(0,n.jsxs)(n.Fragment,{children:["Participate in"," ",(0,n.jsxs)(y,{href:r,children:[(null===(a=e.project)||void 0===a?void 0:a.name)||"N/A"," ",(0,n.jsx)(s.Z,{className:"icon-2xs"})]})," ",l>0?"with min deposit ".concat(l," USDT"):""]}),qualified:e.qualified,action:{label:"Go to Token Sale",href:r}}},[l.V3.DEPOSIT_VOLUME]:e=>({id:"deposit-volume",title:"Volume in Deposit in All IDOs",description:(0,n.jsx)(w,{text:(0,n.jsxs)(n.Fragment,{children:["Achieve minimum volume of ",e.options.amount," USDT deposits"," ",(0,n.jsxs)(y,{href:"https://magicsquare.io/launchpad",children:["across all IDOs ",(0,n.jsx)(s.Z,{className:"icon-2xs"})]})]}),policy:e}),qualified:e.qualified,action:{label:"Go to Launchpad",href:"https://magicsquare.io/launchpad"}}),[l.V3.DEPOSIT_TURBO_CHARGE_VOLUME]:e=>({id:"turbo-charge",title:"Used Turbo Charge",description:(0,n.jsx)(w,{text:"Use Turbo Charge with minimum volume of ".concat(e.options.amount,"$"),policy:e}),qualified:e.qualified,action:{label:"Go to Launchpad",href:"https://magicsquare.io/launchpad"}}),[l.V3.TICKET]:e=>e.options.currencyTypes.map((t=>{const{currency:i}=t,n={FREE:{title:"Use Free Raffle Credits",description:"Get tickets using your free ticket balance. More tickets - higher chance of winning!",label:"Use Free Credits"},REST:{title:"Get Raffle Tickets with ".concat(i),description:"Use ".concat(i," from your Magic ID to enter the raffle."),label:"Get with ".concat(i)}},{title:a,description:o,label:r}=i===l.xp.FREE?n.FREE:n.REST;return{id:"ticket-".concat(i),title:a,description:o,qualified:e.qualified,currencyType:t,action:{label:r,href:""}}})),[l.V3.LIVENESS_COMPLETED]:e=>({id:"liveness-completed",title:"Complete Humanity Verification",description:(0,n.jsxs)("span",{children:["Complete Liveness Verification or Gitcoin Passport in your"," ",(0,n.jsx)(r.d,{href:h+"/profile/magic-id/human-verification",className:"text-base-text-red inline-flex gap-0.5 items-center",children:"Magic ID"}),"."]}),qualified:e.qualified,action:{label:"Complete",href:h+"/profile/magic-id/human-verification"}}),[l.V3.KYC_COMPLETED]:e=>({id:"kyc-completed",title:"Complete KYC Verification",description:(0,n.jsxs)("span",{children:["Complete KYC Verification in your"," ",(0,n.jsx)(r.d,{href:h+"/profile/magic-id/kyc-verification",className:"text-base-text-red inline-flex gap-0.5 items-center",children:"Magic ID"}),"."]}),qualified:e.qualified,action:{label:"Complete",href:h+"/profile/magic-id/kyc-verification"}}),[l.V3.BANXA_BUY_SQR]:e=>({id:"banxa-buy-sqr",title:"Buy SQR via Banxa",description:(0,n.jsxs)("span",{children:["Buy SQR tokens with a total value of ",e.options.usdt_amount," USDT or higher via Banxa."]}),qualified:e.qualified,action:{label:"Buy SQR Tokens",href:"https://magic.banxa.com/?coinType=SQR&blockchain=BSC"}})},b=e=>o()(e.map((e=>S[e.name](e))))},898845:function(e,t,i){i.d(t,{$:function(){return o}});var n=i(834167),a=i(7045);const o=e=>{const t=(0,n.PD)(e.id),{data:i=[]}=t,o=(0,a.l)(i),r=o.reduce(((e,t)=>e+Number(t.qualified)),0),s=r>0,l=r===o.length,c="OR"===e.access_policy.operator?s:l;return{requirements:o,hasRequirements:Boolean(o.length),qualifiedAllRequirements:l,qualifiedAtLeastOneRequirement:s,qualifiedEnoughRequirements:c,qualifiedRequirementsCount:r,query:t}}}}]);
//# sourceMappingURL=85888-9d9c90e11996af4d.js.map