(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[88881],{784324:function(e,t,n){"use strict";n.d(t,{TokenPriceChart:function(){return D}});var r=n(939804),o=n(893889),i=n(910308),a=n(974240),s=n(632632),c=n(699472),u=n(577689),l=n(423977),d=n(260440),m=n(436511),f=n(325957),p=n(367604),g=n.n(p);const h={positive:f.W,negative:m.z,neutral:d.Z},N=e=>{let{percentChange:t,currentPrice:n=0,period:o}=e;return(0,r.jsx)(l.e,{format:"percents",highlightChanges:!0,showSign:!0,value:Number(null!=t?t:0),renderFunction:e=>{let{renderValue:t,changeType:i}=e;const a=h[i];return(0,r.jsxs)("div",{className:g().wrapper,children:[(0,r.jsxs)("div",{children:["$",n]}),!!t&&(0,r.jsxs)("div",{className:g().valueWithIcon,children:[t," ",(0,r.jsx)(a,{className:g().icon})]}),(0,r.jsx)("div",{children:s.$Z[o].label})]})}})};var w=n(962394),T=n.n(w);const D=e=>{let{tokenIdOrSlug:t}=e;var n,l;const[d,m]=(0,o.useState)("day"),{data:f,isPending:p}=(0,i.useQuery)(a.Kw.priceHistory(t,d)),g=null==f||null===(l=f.history)||void 0===l||null===(n=l.at(-1))||void 0===n?void 0:n.price;return(0,r.jsx)("div",{className:T().chart,children:(0,r.jsxs)(s.kL,{children:[(0,r.jsx)(s.kL.Plot,{children:(0,r.jsx)(s.TH,{data:null==f?void 0:f.history,isLoading:p,selectedPeriod:d})}),(0,r.jsx)(s.kL.Controls,{children:(0,r.jsxs)("div",{className:T().controls,children:[(0,r.jsx)(s.my,{filters:s.js,selectedValue:d,onSelect:m}),p&&!f?(0,r.jsxs)("div",{className:T().skeleton,children:[(0,r.jsx)("div",{className:"msq-skeleton-text w-16 h-6"}),(0,r.jsx)("div",{className:"msq-skeleton-text w-16 h-6"})]}):f&&(0,r.jsxs)("div",{className:T().token,children:[(0,r.jsx)(c.J,{url:f.icon,className:T().icon}),(0,r.jsx)(u.Z,{variant:"caption-s-strong",children:f.symbol}),(0,r.jsx)(u.Z,{variant:"caption-s",children:(0,r.jsx)(N,{percentChange:f.percentChange,currentPrice:g,period:d})})]})]})})]})})}},994981:function(e,t,n){"use strict";n.d(t,{x:function(){return r.TokenPriceChart}});var r=n(784324)},103260:function(e,t,n){"use strict";var r;n.d(t,{g:function(){return i}});const o=null!==(r="0x75BDc1Bef5F5bC2cF9306eef862a13c14b56493b")?r:"0x0",i={abi:n(379022).u3.abi,address:o}},970502:function(e,t,n){"use strict";n.d(t,{O:function(){return r}});const r=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return["WEB3_PREDICTIONS_QUERY_KEY",...t]}},462541:function(e,t,n){"use strict";n.d(t,{y:function(){return N}});var r=n(910308),o=n(108531),i=n(981395),a=n(183941),s=n(787907),c=n(686168),u=n(103260),l=n(970502),d=n(725774),m=n(490650);const f=[c.sn.ACTIVE,c.sn.LOCKED,c.sn.CLOSED],p=e=>e.reduce(((e,t)=>(e[(0,d.f)(t.wallet)]=BigInt(String(t.amount)),e)),{}),g=async()=>{try{const e=await(0,o.L)(i.g,{...u.g,chainId:a.VQ.id,functionName:"getActiveLockedClosedRounds"});if(!Array.isArray(e))throw new Error("incorrect rounds");return e.map(((e,t)=>{const n=BigInt(e.lockPrice.toString()),r=BigInt(e.closePrice.toString()),o=r-n;return{id:Number(e.roundId),closeTimestamp:(0,s.P)(Number(e.closeTimestamp)),startTimestamp:(0,s.P)(Number(e.startTimestamp)),state:f[t],upParticipants:p(e.participantsBull),downParticipants:p(e.participantsBear),winParticipants:(i=e.winners,i.reduce(((e,t)=>(e[(0,d.f)(t.winner)]=BigInt(String(t.amount)),e)),{})),lockPrice:(0,m.eS)({wei:n,tokenName:"USDT"}),closePrice:(0,m.eS)({wei:r,tokenName:"USDT"}),priceChange:(0,m.eS)({wei:o,tokenName:"USDT",formatOptions:{showPlusSign:!0}}),totalAmount:(0,m.eS)({wei:BigInt(e.totalAmount.toString()),tokenName:"USDT",formatOptions:{stableToDollar:!1}}),bullAmount:(0,m.eS)({wei:BigInt(e.bullAmount.toString()),tokenName:"USDT",formatOptions:{stableToDollar:!1}}),bearAmount:(0,m.eS)({wei:BigInt(e.bearAmount.toString()),tokenName:"USDT",formatOptions:{stableToDollar:!1}}),rewardAmount:(0,m.eS)({wei:BigInt(e.rewardAmount.toString()),tokenName:"USDT",formatOptions:{stableToDollar:!1}})};var i})).sort(((e,t)=>{const n={[c.sn.CLOSED]:0,[c.sn.LOCKED]:1,[c.sn.ACTIVE]:2};return n[e.state]-n[t.state]})).filter((e=>!!e.id))}catch(e){return console.error(e),[]}},h=(0,s.P)(10),N=()=>(0,r.useQuery)({queryKey:(0,l.O)("adjacent-rounds"),queryFn:g,refetchInterval:e=>{let{state:{data:t}}=e;const n=null==t?void 0:t.find((e=>e.state===c.sn.LOCKED));return n?Math.min((0,c.XM)(n)||h,h):h},refetchOnWindowFocus:!0,refetchOnReconnect:!0,staleTime:0})},432959:function(e,t,n){"use strict";n.d(t,{g:function(){return d}});var r=n(910308),o=n(108531),i=n(981395),a=n(183941),s=n(490650),c=n(103260),u=n(970502);const l=async()=>{try{const e=await(0,o.L)(i.g,{...c.g,chainId:a.VQ.id,functionName:"minBetAmount",args:[]});return(0,s.eS)({wei:e,tokenName:"USDT",formatOptions:{stableToDollar:!1}})}catch(e){return console.error(e),{wei:BigInt(0),value:0,formatted:""}}},d=()=>(0,r.useQuery)({queryKey:(0,u.O)("min-bet-amount"),queryFn:l})},584618:function(e,t,n){"use strict";n.d(t,{H:function(){return D}});var r=n(206843),o=n(278394),i=n(927183),a=n(415516),s=n(981395),c=n(183941),u=n(535276),l=n(481807),d=n(490650),m=n(156558),f=n(124952),p=n(874886),g=n(771116),h=n(323359),N=n(103260),w=n(970502);const T="USDT",D=()=>{const{approveIfNeeded:e}=(0,l.M3)(),{getUserWalletType:t}=(0,g.Z)(),n=(0,o.useQueryClient)();return{betPrediction:async o=>{let{amount:l,direction:g,tokenName:D=T}=o;if(!await(async t=>{let{tokenName:n=T,amount:r}=t;const{decimals:o,contractsAddresses:i}=c.f5[n];try{return await e({chainId:c.VQ.id,amount:Number.MAX_SAFE_INTEGER,spenderAddress:N.g.address,tokenAddress:i.token,tokenDecimals:o,amountToCheck:r}),!0}catch(e){return(0,u.Z)({error:e}),!1}})({amount:l,tokenName:D}))return;const{walletType:k}=t(),P=Date.now();r.toast.loading("Processing your prediction...",{toastId:P,style:(0,f.Z)(k)});const I=await(async e=>{let{amount:n,direction:r,tokenName:o=T}=e;const{userWallet:i}=t(),{decimals:a}=c.f5[o],s=(0,d.o0)(n,a).toBigInt();try{return await(0,m.d)({abi:N.g.abi,contractAddress:N.g.address,functName:"bet",chainId:c.VQ.id,walletAddress:i.attributes.address,args:[s,r===h.L.UP?0:1]})}catch(e){return console.error("error = ",e),(0,u.Z)({error:e,unknownExceptionReplaceMessage:c.dT.UNKNOWN_TRANSACTION_ERROR}),null}})({amount:l,direction:g,tokenName:D});if(!I)return;const{gasPrice:S,gasEstimate:v}=I,{decimals:y}=c.f5[D],O=(0,d.o0)(l,y).toBigInt();try{const{request:e}=await(0,i.a)(s.g,{...N.g,functionName:"bet",chainId:c.VQ.id,args:[O,g===h.L.UP?0:1],gas:v,...S&&{gasPrice:S}}),t=await(0,a.n)(s.g,e),r=await(0,p.N)(t,c.VQ.id);return n.invalidateQueries({queryKey:(0,w.O)()}),r}catch(e){console.error("error = ",e),(0,u.Z)({error:e,unknownExceptionReplaceMessage:c.dT.UNKNOWN_TRANSACTION_ERROR})}finally{r.toast.dismiss(P)}}}}},539465:function(e,t,n){"use strict";n.d(t,{k:function(){return g}});var r=n(910308),o=n(108531),i=n(943519),a=n(981395),s=n(183941),c=n(103260),u=n(970502),l=n(787907),d=n(490650),m=n(323359),f=n(63338);const p=e=>e.map((e=>{const t=(0,d.eS)({wei:BigInt(e.won.toString()),tokenName:"USDT",formatOptions:{stableToDollar:!1}}),n=(0,d.eS)({wei:BigInt(e.amount.toString()),tokenName:"USDT",formatOptions:{stableToDollar:!1}}),r=1===e.position?m.L.DOWN:m.L.UP,o=(e=>{let{userChoice:t,wonAmount:n,isDraw:r}=e;if(r)return f.I.DRAW;const o=n>0,i=t===m.L.UP?m.L.DOWN:m.L.UP;return(o?t:i)===m.L.UP?f.I.UP:f.I.DOWN})({userChoice:r,wonAmount:t.value,isDraw:e.draw});return{roundId:Number(e.roundId),closeTimestamp:(0,l.P)(Number(e.closeTimestamp)),wonAmount:t,isClaimed:e.claimed,userChoice:r,roundResult:o,userBet:n}})).sort(((e,t)=>t.roundId-e.roundId)),g=()=>{const{userEvmWallet:e}=(0,i.useAuth)(),t=null==e?void 0:e.attributes.address;return(0,r.useQuery)({queryKey:(0,u.O)("prediction-rounds",t),queryFn:()=>(async e=>{if(!e)return[];try{const t=await(0,o.L)(a.g,{...c.g,chainId:s.VQ.id,functionName:"getWalletAndRounds",args:[e]});if(!Array.isArray(t))throw new Error("incorrect rounds");return p(t)}catch(e){return console.error(e),[]}})(t)})}},692489:function(e,t,n){"use strict";n.d(t,{I:function(){return a}});var r=n(725774),o=n(490650),i=n(323359);const a=e=>{let{round:t,wallet:n}=e;if(!n)return{isParticipated:!1};const a=(0,r.f)(n),s=t.upParticipants[a],c=t.downParticipants[a],u=t.winParticipants[a],l=!!s||!!c;let d=i.L.UP;if(c&&(d=i.L.DOWN),!l)return{isParticipated:l};const m=d===i.L.DOWN?c:s;return{isParticipated:l,amount:(0,o.eS)({wei:m,tokenName:"USDT",formatOptions:{stableToDollar:!1}}),direction:d,directionTitle:d===i.L.DOWN?"Down":"Up",wonAmount:(0,o.eS)({wei:u,tokenName:"USDT",formatOptions:{stableToDollar:!1}})}}},686168:function(e,t,n){"use strict";n.d(t,{EA:function(){return s},LV:function(){return u},XM:function(){return c},pd:function(){return a},sn:function(){return r}});var r,o=n(787907),i=n(63338);!function(e){e.ACTIVE="ACTIVE",e.LOCKED="LOCKED",e.CLOSED="CLOSED"}(r||(r={}));const a=e=>{let{rounds:t,state:n}=e;return null==t?void 0:t.find((e=>e.state===n))},s=e=>e.closeTimestamp<(0,o.H)(),c=e=>Math.max(e.closeTimestamp-(0,o.H)(),0),u=e=>e.priceChange.wei>0?i.I.UP:e.priceChange.wei<0?i.I.DOWN:i.I.DRAW},323359:function(e,t,n){"use strict";var r;n.d(t,{L:function(){return r}}),function(e){e.UP="UP",e.DOWN="DOWN"}(r||(r={}))},63338:function(e,t,n){"use strict";var r;n.d(t,{I:function(){return r}}),function(e){e.UP="UP",e.DOWN="DOWN",e.DRAW="DRAW"}(r||(r={}))},367604:function(e){e.exports={wrapper:"TokenPriceChange_wrapper__WSVfr",valueWithIcon:"TokenPriceChange_valueWithIcon__30zpQ",icon:"TokenPriceChange_icon__X7mz0"}},962394:function(e){e.exports={chart:"TokenPriceChart_chart__5IWpg",controls:"TokenPriceChart_controls__NtXVK",skeleton:"TokenPriceChart_skeleton__CHGGu",token:"TokenPriceChart_token__ZbGiQ"}}}]);
//# sourceMappingURL=page-9c9d6a77-49d1eca50555850b.js.map