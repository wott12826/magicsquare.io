(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[77158],{509450:function(e,t,a){"use strict";a.d(t,{default:function(){return V}});var n=a(939804),r=a(383737),s=a(893889),l=a(206843),i=(a(108060),a(347177)),o=a.n(i),c=a(147021),d=a.n(c),u=a(367781),m=a(999116),x=a.n(m),p=a(797485),b=a(242898),v=a(701337),h=a(41459),g=a(250429),f=a(943519),j=a(508025),y=a(129759),N=a(183941),w=a(844446),k=a(782969),_=a(850868),C=a(74908);function T(e){let{block:t={},onButtonClick:a,storyTitle:r}=e;var s,l,i,c,u;const{isAuth:m}=(0,f.useAuth)(),x=(0,j.fI)();var v;const g=[h.aI.GO_TO,h.aI.GO_TO_AUTH].includes(null!==(v=null===(s=t.action)||void 0===s?void 0:s.type)&&void 0!==v?v:"")&&(null===(l=t.action)||void 0===l?void 0:l.externalRoute);var y;const N={as:"a",href:null!==(y=null===(i=t.action)||void 0===i?void 0:i.externalRoute)&&void 0!==y?y:"/",target:"_blank",rel:" noopener noreferrer"};var w,k;return(0,n.jsxs)("div",{className:"story",children:[t.bannerUrl&&(0,n.jsx)(p.Z,{className:"story-banner",src:t.bannerUrl,alt:r||t.title||"Story banner",width:1920,height:1080,quality:90}),(t.title||t.description)&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"story-title",dangerouslySetInnerHTML:{__html:d().sanitize(null!==(w=t.title)&&void 0!==w?w:"")}}),(0,n.jsx)("p",{className:"story-description",onClick:e=>{const t=e.target;if("A"===(null==t?void 0:t.tagName)&&!m)return x.open(),void e.preventDefault()},dangerouslySetInnerHTML:{__html:d().sanitize(null!==(k=t.description)&&void 0!==k?k:"")}})]}),t.bannerBottomUrl&&(0,n.jsx)(p.Z,{className:"story-banner-bottom",src:t.bannerBottomUrl,alt:r||t.title||"Story banner",width:1920,height:1080,quality:90}),((null===(c=t.action)||void 0===c?void 0:c.internalRoute)||(null===(u=t.action)||void 0===u?void 0:u.externalRoute))&&(0,n.jsx)(b.zx,{variant:"secondary",onClick:e=>{var n,r;return a(null===(n=t.action)||void 0===n?void 0:n.type,e,null===(r=t.action)||void 0===r?void 0:r.internalRoute)},...g?N:{},className:o()("story-action font-semibold whitespace-nowrap text-lg h-[50px]"),children:t.action.buttonText||"Click me"})]},t.bannerUrl)}var E=a(140599);function Z(e){let{story:t,storyTitle:a}=e;const r=(0,E.G)("lg","max"),s=(0,E.G)("md","max"),l=(0,E.G)("sm","max");var i;const{bannerUrl:o,bannerDeskUrl:c,bannerLargeTabletUrl:d,bannerSmallTabletUrl:u,bannerMobileUrl:m}=null!==(i=null==t?void 0:t.content)&&void 0!==i?i:{},x=c&&!r?c:d&&r&&!s?d:u&&s&&!l?u:m&&l?m:o;return(0,n.jsx)(p.Z,{className:"stories-banner",src:x,alt:"".concat(a," banner")||0,fill:!0,quality:90})}var I=a(553321),A=a(351370);function M(e){let{story:t,onButtonClick:a}=e;var r;const{type:s,buttonText:l="Click",title:i,description:c,appId:d="",bigText:u,internalRoute:m,externalRoute:x}=null!==(r=null==t?void 0:t.content)&&void 0!==r?r:{},p=(0,E.G)("lg","max"),{data:v,isPending:g}=(0,I.zRs)(d,{enabled:!!d}),f={as:"a",href:x||m,target:"_blank",rel:" noopener noreferrer"};if(s===h.aI.APP&&g&&d)return(0,n.jsx)(b.$j,{});if(u)return(0,n.jsx)("h2",{className:"stories-big-text",children:u});const j=v?function(e){var t,a,n,r,s,l,i,o,c;return{id:e.id,type:e.type,attributes:{...e.attributes,appChain:null==e||null===(t=e.attributes)||void 0===t?void 0:t.chainName,icon:null==e||null===(a=e.attributes)||void 0===a?void 0:a.appIcon,appId:null==e||null===(n=e.attributes)||void 0===n?void 0:n.appLink,description:null==e||null===(r=e.attributes)||void 0===r?void 0:r.shortDescription,externalLink:null==e||null===(s=e.attributes)||void 0===s?void 0:s.appWebsite,...(null==e||null===(l=e.attributes)||void 0===l?void 0:l.appBanner)?{icon:null==e||null===(i=e.attributes)||void 0===i?void 0:i.appBanner}:{},name:null==e||null===(o=e.attributes)||void 0===o?void 0:o.appName,subcategory:null==e||null===(c=e.attributes)||void 0===c?void 0:c.subCategory},hotOffers:null==e?void 0:e.hotOffers}}(v):v;return d?(0,n.jsxs)("div",{className:"stories-control-block",children:[g&&(0,n.jsx)(b.$j,{className:"mx-auto"}),!g&&j&&(0,n.jsx)(A.Z,{app:j,className:"w-full"}),!g&&!j&&(0,n.jsx)("p",{className:"stories-description mb-0",children:"App not found"})]}):i||c?(0,n.jsxs)("div",{className:"stories-control-block",children:[(i||c)&&(0,n.jsxs)("div",{children:[i&&(0,n.jsx)("h3",{className:"stories-title",children:i}),c&&(0,n.jsx)("p",{className:"stories-description",children:c})]}),(0,n.jsx)(b.zx,{variant:"secondary",onClick:e=>a(void 0,e,m),className:o()("whitespace-nowrap text-lg h-[50px]",{"w-full":p}),...f,children:l||"Click me"})]}):null}var R=a(94095),D=a(640219),L=a(819123),O=a(223057),z=a(439548),S=a(586997);const U=e=>{try{return[...JSON.parse(e||"")||[]]}catch(e){return[]}},B=e=>{let{story:t}=e;var a;const{config:r}=null!==(a=null==t?void 0:t.content)&&void 0!==a?a:{};return(0,n.jsx)("main",{className:"store-container",children:(0,n.jsxs)("div",{className:"relative mx-auto max-w-[1440px]",children:[(0,n.jsx)(b.$j,{className:"absolute left-0 right-0 mx-auto top-16",size:"lg"}),r&&(0,n.jsx)(O.Z,{config:r})]})})},P=e=>{let{className:t,...a}=e;return(0,n.jsxs)("div",{className:o()("rounded-sm pt-6 flex flex-col",t),...a,children:[(0,n.jsxs)("div",{className:"mb-4 gap-4 flex justify-between px-6",children:[(0,n.jsx)("span",{className:"t-h3",children:"Leaderboard"}),(0,n.jsx)(g.Z,{href:"/stories/".concat(L.y.id),className:"text-secondary",children:"See all ››"})]}),(0,n.jsx)(S.DV,{className:"px-6 pb-6 flex flex-1 flex-col"})]})},F=()=>{var e,t,a;const{isAuth:r,user:i}=(0,f.useAuth)(),{data:c}=(0,C.EB)(),{tagManager:d}=(0,y.F)(),{data:m,isPending:h}=(0,C.IW)({enabled:r}),{isEMVWalletConnected:g}=(0,_.Z)(),k=(0,j.aJ)(),T=(0,j.fI)(),E=(0,b._E)(),{mutateAsync:Z,isPending:I}=(0,C.aN)(),A=(0,s.useMemo)((()=>(null==c?void 0:c.quests.reduce(((e,t)=>{const{categoryId:a}=t.attributes;return a in e||(e[a]=[]),e[a].push(t),e}),{}))||{}),[c]),M=e=>r?g?void(m||(E.open(),e.preventDefault())):(k.open({description:{wallets:{EVM:null}},success:!1}),void e.preventDefault()):(T.open(),void e.preventDefault());return(0,s.useEffect)((()=>{const e=U(u.Z.get("activeCampaigns")),t=U(u.Z.get("readyCampaign"));e.length&&i&&m&&(e.forEach((e=>{t.includes(e)||(d.dataLayer({dataLayer:{event:"gtm.createZealyAccountFromCampaign",url:window.location.href,userId:i.id,zealyId:m.account.attributes.zealyId,campaign:e}}),u.Z.set("readyCampaign",JSON.stringify([...U(u.Z.get("readyCampaign")),e]),{expires:365}))})),u.Z.remove("activeCampaigns"))}),[m,i,d]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("main",{className:"store-container",children:[(0,n.jsx)(p.Z,{alt:"Road to TGE Banner",src:"/stories/road-to-tge-banner.png",className:"w-full h-auto mb-5 max-sm:hidden 3xl:mb-10",sizes:"100vw",width:1742,height:296,priority:!0}),(0,n.jsx)(p.Z,{alt:"Road to TGE Banner",src:"/stories/road-to-tge-banner-mobile.png",className:"w-full h-auto mb-5 sm:hidden",sizes:"100vw",width:278,height:106,priority:!0}),(0,n.jsxs)("div",{className:"mb-6 sm:mb-8 md:mb-5 xl:mb-6 2xl:mb-9",children:[(0,n.jsx)("h1",{className:"font-semibold text-lg text-center md:text-3xl",children:"Complete Daily Tasks & Earn with Magic Square: $2.5M $SQR CoinList Campaign"}),(0,n.jsx)(b.UO,{isOpen:r&&!h&&!m,children:(0,n.jsxs)("div",{className:o()("rounded-2xl gap-4 flex-col mt-5 py-2 px-4 border flex items-center bg-red-200 border-red-600 sm:mt-10 sm:p-8 sm:flex-row 3xl:mt-5"),children:[(0,n.jsx)(v.Z,{className:"icon text-red-600"}),(0,n.jsx)("span",{className:"font-medium max-sm:text-center xl:text-2xl flex-1",children:"In order to participate your wallet must be connect to Zealy"}),(0,n.jsxs)("div",{className:"flex flex-col gap-4 max-sm:w-full lg:flex-row",children:[(0,n.jsx)("a",{href:null==c||null===(e=c.campaign)||void 0===e?void 0:e.attributes.invite,target:"_blank",rel:"noreferrer",onClick:e=>{if(!r)return T.open(),void e.preventDefault();g||(k.open({description:{wallets:{EVM:null}},success:!1}),e.preventDefault())},className:"button button-outline-secondary button-md whitespace-nowrap",children:"Go To Zealy"}),(0,n.jsx)("button",{className:o()("button button-solid-secondary button-md min-w-[6.25rem]",{"pointer-events-none":I}),onClick:async()=>{if(g)try{await Z()}catch(e){l.toast.error((0,R.e)(e,N.T1.DEFAULT_RETRY))}else k.open({description:{wallets:{EVM:null}},success:!1})},children:I?(0,n.jsx)(b.$j,{size:"sm",color:"light"}):"Verify"})]})]})})]}),(0,n.jsx)("ul",{className:"flex flex-wrap gap-1 mt-5 mb-7 sm:mb-9 sm:gap-4 md:mb-11",children:null==c?void 0:c.categories.map((e=>{const t=(0,w.o)(e.attributes.color||"#4056F7");return(0,n.jsx)("li",{style:{"--rgb":t.join(" ")},children:(0,n.jsx)("a",{href:"#".concat(x()(e.attributes.name)),className:"text-[rgb(var(--rgb))] border rounded-full border-primary-300 shadow-main px-4 py-1 text-lg font-semibold flex justify-center items-center",children:e.attributes.name})},e.id)}))}),(0,n.jsx)("div",{className:"flex flex-col md:flex-1 gap-7",children:null==c?void 0:c.categories.map(((e,t)=>{var a;const r=(0,w.o)(e.attributes.color||"#4056F7"),s="text-xs flex justify-center items-center rounded-[0.25rem] min-h-[1.5rem] px-1.5 shrink-0";return(0,n.jsxs)("section",{id:"".concat(x()(e.attributes.name)),style:{"--rgb":r.join(" ")},children:[(0,n.jsx)("header",{className:"mb-7",children:(0,n.jsxs)("h2",{className:o()("font-semibold text-lg text-[rgb(var(--rgb))]"),children:["#",e.attributes.name]})}),(0,n.jsxs)("ul",{className:"grid auto-rows-[14.375rem] grid-cols-[repeat(auto-fill,_minmax(min(100%,_424px),_1fr))] gap-4",children:[null===(a=A[e.id])||void 0===a?void 0:a.map((e=>{var t;const a=null==m||null===(t=m.quests)||void 0===t?void 0:t[e.id],r=(null==a?void 0:a.attributes.xp)||e.attributes.xp,l=(null==a?void 0:a.attributes.count)||e.attributes.count,i=e.attributes.frequency,c=r*l,d="ONE-TIME"===i,u=d&&!!(null==a?void 0:a.attributes.completed);return(0,n.jsx)("li",{children:(0,n.jsxs)("a",{href:e.attributes.url,target:"_blank",rel:"noreferrer",onClick:M,className:o()("flex flex-col w-full h-full rounded-sm p-5 transition-all","bg-[rgb(var(--rgb))]/5 hover:bg-[rgb(var(--rgb))]/10 ","border border-[rgb(var(--rgb))]",{"pointer-events-none":u,"shadow-[2px_4px_8px_rgba(var(--rgb)/0.1)]":!u}),style:u?{"--rgb":(0,w.o)("#00a643").join(" ")}:{},children:[(0,n.jsx)("span",{className:"line-clamp-4 break-words text-lg font-semibold leading-snug text-[rgb(var(--rgb))]",children:e.attributes.name}),(0,n.jsxs)("div",{className:"flex gap-2 mt-auto items-end justify-between",children:[(0,n.jsxs)("span",{className:o()(s,"border-[rgb(var(--rgb))] bg-[rgb(var(--rgb))]","text-neutral-50 mr-auto"),children:[r," XP"]}),(0,n.jsx)("div",{className:"flex gap-2 flex-wrap justify-end",children:u?(0,n.jsx)("span",{className:o()(s,"bg-green-100 text-green-800"),children:"COMPLETED"}):(0,n.jsxs)(n.Fragment,{children:[!d&&!!l&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"flex justify-end basis-full",children:(0,n.jsxs)("span",{className:o()(s,"bg-neutral-100 text-neutral-600 uppercase"),children:[l," COMPLETED"]})}),(0,n.jsxs)("span",{className:o()(s,"bg-neutral-100 text-neutral-600 uppercase"),children:[c," XP Earned"]})]}),(0,n.jsx)("span",{className:o()(s,"bg-neutral-100 text-neutral-600 uppercase"),children:i})]})})]})]})},e.id)})),0===t&&(0,n.jsx)(P,{className:"col-start-[-2] col-end-auto row-start-[-1] row-end-3 max-xl:hidden border border-[rgb(var(--rgb))]"})]},e.id)]},e.id)}))}),(0,n.jsx)(P,{className:"mt-5 sm:mt-9 max-h-[13.375rem] xl:hidden border border-[rgb(var(--rgb))]",style:{"--rgb":(0,w.o)((null==c||null===(t=c.categories[0])||void 0===t?void 0:t.attributes.color)||"#4056F7").join(" ")}})]}),(0,n.jsx)(b.u_,{...E.props,children:(0,n.jsxs)(b.hz,{className:"flex w-full max-w-[29.5rem] text-center flex-col gap-4 p-6 sm:px-12 border-0",children:[(0,n.jsx)(b.ol,{className:"self-end !m-0"}),(0,n.jsx)("h2",{className:"text-modal-title",children:"Connect Your Zealy Account!"}),(0,n.jsx)("p",{className:"text-neutral-500",children:"In order to participate your wallet must be connected to your zealy account."}),(0,n.jsx)("p",{className:"text-neutral-500",children:"Ensure you use the same wallet on Zealy and the Magic Store."}),(0,n.jsx)("p",{className:"font-medium text-secondary",children:'Once achieved, click "Verify" to become eligible to participate.'}),(0,n.jsx)("a",{href:null==c||null===(a=c.campaign)||void 0===a?void 0:a.attributes.invite,target:"_blank",rel:"noreferrer",className:"button button-solid-secondary button-lg w-full mt-2",children:"Go To Zealy"})]})})]})},G=e=>{let{story:t}=e;const{isAuth:a}=(0,f.useAuth)(),r=(0,j.fI)();var s;const{title:l,storyBlocks:i,layout:c}=null!==(s=null==t?void 0:t.content)&&void 0!==s?s:{},d=(e,t)=>{if(!a)return r.open(),void(null==t||t.preventDefault())};return(0,n.jsxs)("div",{className:o()("stories-container",c&&"--layout-".concat(c)),id:"story-link-anchor",children:[(0,n.jsx)(Z,{story:t,storyTitle:l}),(0,n.jsxs)("div",{className:"stories-body",children:[(0,n.jsx)(M,{story:t,onButtonClick:d}),(0,n.jsx)("div",{className:"story-list",children:null==i?void 0:i.map(((e,t)=>(0,n.jsx)(T,{block:e,storyTitle:l,onButtonClick:d},t)))})]})]})},q=e=>{let{story:t}=e;var a;const{html:r,hardcodedHtml:l}=null!==(a=null==t?void 0:t.content)&&void 0!==a?a:{},{isAuth:i}=(0,f.useAuth)(),o=(0,j.fI)(),c=(0,s.useMemo)((()=>l||(r?r.replace(RegExp("(?<=(?:src|srcset)=(\"|'))(.+?)(?=\\1)","g"),(e=>(0,k.Z)({url:e,resizeType:"fill",quality:90,format:"webp"}))):"")),[l,r]);return(0,n.jsx)("div",{className:"story-page flex-auto",children:(0,n.jsx)("div",{className:"story-page__content",onClick:e=>{const t=e.target;if("A"===(null==t?void 0:t.tagName)){if("false"!==t.dataset.authRequired&&!i)return o.open(),void e.preventDefault();t.target="_blank"}},dangerouslySetInnerHTML:{__html:d().sanitize(c)}})})};var V=()=>{const{storyId:e}=(0,r.useParams)(),{data:t}=(0,C.c5)(e,D.Z);if(t||(0,r.notFound)(),"ZEALY"===t.type)return(0,n.jsx)(F,{});if("ZEALY_LEADERBOARD"===t.type)return(0,n.jsx)(S.ZP,{});if("STORM_TRADE"===t.type)return(0,n.jsx)(z.Z,{});var a;const{type:s}=null!==(a=null==t?void 0:t.content)&&void 0!==a?a:{};return s===h.aI.SOQUEST?(0,n.jsx)(B,{story:t}):s===h.aI.HTML?(0,n.jsx)(q,{story:t}):(0,n.jsx)(G,{story:t})}},108060:function(){}}]);
//# sourceMappingURL=page-e89d100f-b9daf92bc9b6625b.js.map