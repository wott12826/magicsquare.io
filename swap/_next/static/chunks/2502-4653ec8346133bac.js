"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2502],{21759:function(e,a,t){t.d(a,{Q:function(){return p},Z:function(){return P}});var n=t(93805),r=t(33414),s=t(34892),i=t(76861),o=t(68929),c=t(5200),u=t(18713),d=t(3975),f=t(93684),y=t(48627),m=t(3858),l=t(18715),h=t(4052),w=t(7606);const p=["blobVersionedHashes","chainId","fees","gas","nonce","type"];async function P(e,a){const{account:t=e.account,blobs:P,chain:g,gas:x,kzg:F,nonce:b,nonceManager:C,parameters:G=p,type:v}=a,T=t?(0,n.T)(t):t,I={...a,...T?{from:T?.address}:{}};let q,k;async function z(){return q||(q=await(0,m.s)(e,i.Q,"getBlock")({blockTag:"latest"}),q)}async function _(){if(k)return k;if(g)return g.id;if(void 0!==a.chainId)return a.chainId;const t=await(0,m.s)(e,w.L,"getChainId")({});return k=t,k}if((G.includes("blobVersionedHashes")||G.includes("sidecars"))&&P&&F){const e=(0,u.P)({blobs:P,kzg:F});if(G.includes("blobVersionedHashes")){const a=(0,f.C)({commitments:e,to:"hex"});I.blobVersionedHashes=a}if(G.includes("sidecars")){const a=(0,d.y)({blobs:P,commitments:e,kzg:F}),t=(0,y.j)({blobs:P,commitments:e,proofs:a,to:"hex"});I.sidecars=t}}if(G.includes("chainId")&&(I.chainId=await _()),G.includes("nonce")&&void 0===b&&T)if(C){const a=await _();I.nonce=await C.consume({address:T.address,chainId:a,client:e})}else I.nonce=await(0,m.s)(e,o.K,"getTransactionCount")({address:T.address,blockTag:"pending"});if((G.includes("fees")||G.includes("type"))&&void 0===v)try{I.type=(0,h.l)(I)}catch{const e=await z();I.type="bigint"==typeof e?.baseFeePerGas?"eip1559":"legacy"}if(G.includes("fees"))if("legacy"!==I.type&&"eip2930"!==I.type){if(void 0===I.maxFeePerGas||void 0===I.maxPriorityFeePerGas){const t=await z(),{maxFeePerGas:n,maxPriorityFeePerGas:s}=await(0,r.C)(e,{block:t,chain:g,request:I});if(void 0===a.maxPriorityFeePerGas&&a.maxFeePerGas&&a.maxFeePerGas<s)throw new c.ld({maxPriorityFeePerGas:s});I.maxPriorityFeePerGas=s,I.maxFeePerGas=n}}else{if(void 0!==a.maxFeePerGas||void 0!==a.maxPriorityFeePerGas)throw new c.e5;const t=await z(),{gasPrice:n}=await(0,r.C)(e,{block:t,chain:g,request:I,type:"legacy"});I.gasPrice=n}return G.includes("gas")&&void 0===x&&(I.gas=await(0,m.s)(e,s.Q,"estimateGas")({...I,account:T?{address:T.address,type:"json-rpc"}:T})),(0,l.F)(I),delete I.parameters,I}},28850:function(e,a,t){async function n(e,{serializedTransaction:a}){return e.request({method:"eth_sendRawTransaction",params:[a]},{retryCount:0})}t.d(a,{p:function(){return n}})},8909:function(e,a,t){t.d(a,{T:function(){return P}});var n=t(93805),r=t(62631),s=t(73926),i=t(64253),o=t(2691),c=t(77832),u=t(35566),d=t(12277),f=t(3858),y=t(62275),m=t(18715),l=t(7606),h=t(21759),w=t(28850);const p=new y.k(128);async function P(e,a){const{account:t=e.account,chain:y=e.chain,accessList:P,authorizationList:g,blobs:x,data:F,gas:b,gasPrice:C,maxFeePerBlobGas:G,maxFeePerGas:v,maxPriorityFeePerGas:T,nonce:I,value:q,...k}=a;if(void 0===t)throw new r.o({docsPath:"/docs/actions/wallet/sendTransaction"});const z=t?(0,n.T)(t):null;try{(0,m.F)(a);const t=await(async()=>a.to?a.to:g&&g.length>0?await(0,i.z)({authorization:g[0]}).catch((()=>{throw new s.G("`to` is required. Could not infer from `authorizationList`.")})):void 0)();if("json-rpc"===z?.type||null===z){let a;null!==y&&(a=await(0,f.s)(e,l.L,"getChainId")({}),(0,o.q)({currentChainId:a,chain:y}));const n=e.chain?.formatters?.transactionRequest?.format,r=(n||d.tG)({...(0,u.K)(k,{format:n}),accessList:P,authorizationList:g,blobs:x,chainId:a,data:F,from:z?.address,gas:b,gasPrice:C,maxFeePerBlobGas:G,maxFeePerGas:v,maxPriorityFeePerGas:T,nonce:I,to:t,value:q}),s=p.get(e.uid)?"wallet_sendTransaction":"eth_sendTransaction";try{return await e.request({method:s,params:[r]},{retryCount:0})}catch(a){const t=a;if("InvalidInputRpcError"===t.name||"InvalidParamsRpcError"===t.name||"MethodNotFoundRpcError"===t.name||"MethodNotSupportedRpcError"===t.name)return await e.request({method:"wallet_sendTransaction",params:[r]},{retryCount:0}).then((a=>(p.set(e.uid,!0),a)));throw t}}if("local"===z?.type){const a=await(0,f.s)(e,h.Z,"prepareTransactionRequest")({account:z,accessList:P,authorizationList:g,blobs:x,chain:y,data:F,gas:b,gasPrice:C,maxFeePerBlobGas:G,maxFeePerGas:v,maxPriorityFeePerGas:T,nonce:I,nonceManager:z.nonceManager,parameters:[...h.Q,"sidecars"],value:q,...k,to:t}),n=y?.serializers?.transaction,r=await z.signTransaction(a,{serializer:n});return await(0,f.s)(e,w.p,"sendRawTransaction")({serializedTransaction:r})}if("smart"===z?.type)throw new r.Y({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"});throw new r.Y({docsPath:"/docs/actions/wallet/sendTransaction",type:z?.type})}catch(e){if(e instanceof r.Y)throw e;throw(0,c.$)(e,{...a,account:z,chain:a.chain||void 0})}}},49546:function(e,a,t){t.d(a,{l:function(){return i}});var n=t(93805),r=t(62631),s=t(59540);async function i(e,{account:a=e.account,message:t}){if(!a)throw new r.o({docsPath:"/docs/actions/wallet/signMessage"});const i=(0,n.T)(a);if(i.signMessage)return i.signMessage({message:t});const o="string"==typeof t?(0,s.$G)(t):t.raw instanceof Uint8Array?(0,s.NC)(t.raw):t.raw;return e.request({method:"personal_sign",params:[o,i.address]},{retryCount:0})}},48575:function(e,a,t){t.d(a,{n:function(){return u}});var n=t(93805),r=t(62631),s=t(78587),i=t(7649),o=t(3858),c=t(8909);async function u(e,a){const{abi:t,account:u=e.account,address:d,args:f,dataSuffix:y,functionName:m,...l}=a;if(void 0===u)throw new r.o({docsPath:"/docs/contract/writeContract"});const h=u?(0,n.T)(u):null,w=(0,s.R)({abi:t,args:f,functionName:m});try{return await(0,o.s)(e,c.T,"sendTransaction")({data:`${w}${y?y.replace("0x",""):""}`,to:d,account:h,...l})}catch(e){throw(0,i.S)(e,{abi:t,address:d,args:f,docsPath:"/docs/contract/writeContract",functionName:m,sender:h?.address})}}},84074:function(e,a,t){t.d(a,{i:function(){return z}});var n=t(6812);const r={estimateFeesPerGas:async e=>{if(!e.request?.feeCurrency)return null;const[a,t]=await Promise.all([s(e.client,e.request.feeCurrency),i(e.client,e.request.feeCurrency)]);return{maxFeePerGas:e.multiply(a)+t,maxPriorityFeePerGas:t}}};async function s(e,a){const t=await e.request({method:"eth_gasPrice",params:[a]});return BigInt(t)}async function i(e,a){const t=await e.request({method:"eth_maxPriorityFeePerGas",params:[a]});return BigInt(t)}var o=t(56704),c=t(87929),u=t(68062),d=t(12277),f=t(44007);function y(e){return 0===e||0n===e||null==e||"0"===e||""===e||"string"==typeof e&&("0x"===(0,f.f)(e).toLowerCase()||"0x00"===(0,f.f)(e).toLowerCase())}function m(e){return!y(e)}function l(e){return"cip64"===e.type||function(e){return void 0!==e.maxFeePerGas&&void 0!==e.maxPriorityFeePerGas}(e)&&m(e.feeCurrency)}const h={block:(0,c.G)({format(e){const a=e.transactions?.map((e=>{if("string"==typeof e)return e;return{...(0,u.Tr)(e),...e.gatewayFee?{gatewayFee:(0,o.y_)(e.gatewayFee),gatewayFeeRecipient:e.gatewayFeeRecipient}:{},feeCurrency:e.feeCurrency}}));return{transactions:a,...e.randomness?{randomness:e.randomness}:{}}}}),transaction:(0,u.y_)({format(e){if("0x7e"===e.type)return{isSystemTx:e.isSystemTx,mint:e.mint?(0,o.y_)(e.mint):void 0,sourceHash:e.sourceHash,type:"deposit"};const a={feeCurrency:e.feeCurrency};return"0x7b"===e.type?a.type="cip64":("0x7c"===e.type&&(a.type="cip42"),a.gatewayFee=e.gatewayFee?(0,o.y_)(e.gatewayFee):null,a.gatewayFeeRecipient=e.gatewayFeeRecipient),a}}),transactionRequest:(0,d.iy)({format(e){const a={};return e.feeCurrency&&(a.feeCurrency=e.feeCurrency),l(e)&&(a.type="0x7b"),a}})};var w=t(37569),p=t(71895),P=t(73926),g=t(27418),x=t(59316),F=t(66962),b=t(58017),C=t(21532),G=t(59540),v=t(28254),T=t(6203),I=t(21842);const q={transaction:function(e,a){return l(e)?function(e,a){!function(e){const{chainId:a,maxPriorityFeePerGas:t,gasPrice:n,maxFeePerGas:r,to:s,feeCurrency:i}=e;if(a<=0)throw new g.hJ({chainId:a});if(s&&!(0,b.U)(s))throw new p.b({address:s});if(n)throw new P.G("`gasPrice` is not a valid CIP-64 Transaction attribute.");if(m(r)&&r>k)throw new x.Hh({maxFeePerGas:r});if(m(t)&&m(r)&&t>r)throw new x.cs({maxFeePerGas:r,maxPriorityFeePerGas:t});if(m(i)&&!(0,b.U)(i))throw new P.G("`feeCurrency` MUST be a token address for CIP-64 transactions.");if(y(i))throw new P.G("`feeCurrency` must be provided for CIP-64 transactions.")}(e);const{chainId:t,gas:n,nonce:r,to:s,value:i,maxFeePerGas:o,maxPriorityFeePerGas:c,accessList:u,feeCurrency:d,data:f}=e,l=[(0,G.NC)(t),r?(0,G.NC)(r):"0x",c?(0,G.NC)(c):"0x",o?(0,G.NC)(o):"0x",n?(0,G.NC)(n):"0x",s??"0x",i?(0,G.NC)(i):"0x",f??"0x",(0,T.g)(u),d,...(0,I.d)(e,a)];return(0,C.SM)(["0x7b",(0,v.LV)(l)])}(e,a):(0,F.DO)(e,a)}};const k=w.zL;const z={contracts:n.r,formatters:h,serializers:q,fees:r}}}]);
//# sourceMappingURL=2502-4653ec8346133bac.js.map