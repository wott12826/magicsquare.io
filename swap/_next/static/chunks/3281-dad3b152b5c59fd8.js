"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3281],{63281:function(e,t,n){n.d(t,{_R:function(){return O}});var r=n(12377),s=n(88722),i=n(90269);n(36685);function o(e){const t=new Set;return e.forEach((e=>t.add(e))),Object.freeze(t)}o("external public payable override".split(" "));const a="constant external internal payable private public pure view override",l=(o(a.split(" ")),"constructor error event fallback function receive struct"),h=(o(l.split(" ")),"calldata memory storage payable indexed"),p=o(h.split(" ")),c=o([l,h,"tuple returns",a].join(" ").split(" ")),u={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},f=new RegExp("^(\\s*)"),y=new RegExp("^([0-9]+)"),w=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),g=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),m=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");class d{#e;#t;get offset(){return this.#e}get length(){return this.#t.length-this.#e}constructor(e){this.#e=0,this.#t=e.slice()}clone(){return new d(this.#t)}reset(){this.#e=0}#n(e=0,t=0){return new d(this.#t.slice(e,t).map((t=>Object.freeze(Object.assign({},t,{match:t.match-e,linkBack:t.linkBack-e,linkNext:t.linkNext-e})))))}popKeyword(e){const t=this.peek();if("KEYWORD"!==t.type||!e.has(t.text))throw new Error(`expected keyword ${t.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const t=this.peek();throw new Error(`expected ${e}; got ${t.type} ${JSON.stringify(t.text)}`)}return this.pop().text}popParen(){const e=this.peek();if("OPEN_PAREN"!==e.type)throw new Error("bad start");const t=this.#n(this.#e+1,e.match+1);return this.#e=e.match+1,t}popParams(){const e=this.peek();if("OPEN_PAREN"!==e.type)throw new Error("bad start");const t=[];for(;this.#e<e.match-1;){const e=this.peek().linkNext;t.push(this.#n(this.#e+1,e)),this.#e=e}return this.#e=e.match+1,t}peek(){if(this.#e>=this.#t.length)throw new Error("out-of-bounds");return this.#t[this.#e]}peekKeyword(e){const t=this.peekType("KEYWORD");return null!=t&&e.has(t)?t:null}peekType(e){if(0===this.length)return null;const t=this.peek();return t.type===e?t.text:null}pop(){const e=this.peek();return this.#e++,e}toString(){const e=[];for(let t=this.#e;t<this.#t.length;t++){const n=this.#t[t];e.push(`${n.type}:${n.text}`)}return`<TokenString ${e.join(" ")}>`}}function k(e){const t=[],n=t=>{const n=o<e.length?JSON.stringify(e[o]):"$EOI";throw new Error(`invalid token ${n} at ${o}: ${t}`)};let s=[],i=[],o=0;for(;o<e.length;){let a=e.substring(o),l=a.match(f);l&&(o+=l[1].length,a=e.substring(o));const h={depth:s.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:o,value:-1};t.push(h);let p=u[a[0]]||"";if(p){if(h.type=p,h.text=a[0],o++,"OPEN_PAREN"===p)s.push(t.length-1),i.push(t.length-1);else if("CLOSE_PAREN"==p)0===s.length&&n("no matching open bracket"),h.match=s.pop(),t[h.match].match=t.length-1,h.depth--,h.linkBack=i.pop(),t[h.linkBack].linkNext=t.length-1;else if("COMMA"===p)h.linkBack=i.pop(),t[h.linkBack].linkNext=t.length-1,i.push(t.length-1);else if("OPEN_BRACKET"===p)h.type="BRACKET";else if("CLOSE_BRACKET"===p){let e=t.pop().text;if(t.length>0&&"NUMBER"===t[t.length-1].type){const n=t.pop().text;e=n+e,t[t.length-1].value=(0,r.Dx)(n)}if(0===t.length||"BRACKET"!==t[t.length-1].type)throw new Error("missing opening bracket");t[t.length-1].text+=e}}else if(l=a.match(w),l){if(h.text=l[1],o+=h.text.length,c.has(h.text)){h.type="KEYWORD";continue}if(h.text.match(m)){h.type="TYPE";continue}h.type="ID"}else{if(l=a.match(y),!l)throw new Error(`unexpected token ${JSON.stringify(a[0])} at position ${o}`);h.text=l[1],h.type="NUMBER",o+=h.text.length}}return new d(t.map((e=>Object.freeze(e))))}function E(e,t){const n=new Set;for(;;){const r=e.peekType("KEYWORD");if(null==r||t&&!t.has(r))break;if(e.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}const x=new RegExp(/^(.*)\[([0-9]*)\]$/);function b(e){const t=e.match(m);if((0,s.en)(t,"invalid type","type",e),"uint"===e)return"uint256";if("int"===e)return"int256";if(t[2]){const n=parseInt(t[2]);(0,s.en)(0!==n&&n<=32,"invalid bytes length","type",e)}else if(t[3]){const n=parseInt(t[3]);(0,s.en)(0!==n&&n<=256&&n%8==0,"invalid numeric width","type",e)}return e}const A={},T=Symbol.for("_ethers_internal"),N="_ParamTypeInternal";class O{name;type;baseType;indexed;components;arrayLength;arrayChildren;constructor(e,t,n,r,o,a,l,h){if((0,s.NK)(e,A,"ParamType"),Object.defineProperty(this,T,{value:N}),a&&(a=Object.freeze(a.slice())),"array"===r){if(null==l||null==h)throw new Error("")}else if(null!=l||null!=h)throw new Error("");if("tuple"===r){if(null==a)throw new Error("")}else if(null!=a)throw new Error("");(0,i.h)(this,{name:t,type:n,baseType:r,indexed:o,components:a,arrayLength:l,arrayChildren:h})}format(e){if(null==e&&(e="sighash"),"json"===e){const t=this.name||"";if(this.isArray()){const e=JSON.parse(this.arrayChildren.format("json"));return e.name=t,e.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(e)}const n={type:"tuple"===this.baseType?"tuple":this.type,name:t};return"boolean"==typeof this.indexed&&(n.indexed=this.indexed),this.isTuple()&&(n.components=this.components.map((t=>JSON.parse(t.format(e))))),JSON.stringify(n)}let t="";return this.isArray()?(t+=this.arrayChildren.format(e),t+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?t+="("+this.components.map((t=>t.format(e))).join("full"===e?", ":",")+")":t+=this.type,"sighash"!==e&&(!0===this.indexed&&(t+=" indexed"),"full"===e&&this.name&&(t+=" "+this.name)),t}isArray(){return"array"===this.baseType}isTuple(){return"tuple"===this.baseType}isIndexable(){return null!=this.indexed}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(-1!==this.arrayLength&&e.length!==this.arrayLength)throw new Error("array is wrong length");const n=this;return e.map((e=>n.arrayChildren.walk(e,t)))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const n=this;return e.map(((e,r)=>n.components[r].walk(e,t)))}return t(this.type,e)}#r(e,t,n,r){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(-1!==this.arrayLength&&t.length!==this.arrayLength)throw new Error("array is wrong length");const s=this.arrayChildren,i=t.slice();return i.forEach(((t,r)=>{s.#r(e,t,n,(e=>{i[r]=e}))})),void r(i)}if(this.isTuple()){const s=this.components;let i;if(Array.isArray(t))i=t.slice();else{if(null==t||"object"!=typeof t)throw new Error("invalid tuple value");i=s.map((e=>{if(!e.name)throw new Error("cannot use object value with unnamed components");if(!(e.name in t))throw new Error(`missing value for component ${e.name}`);return t[e.name]}))}if(i.length!==this.components.length)throw new Error("array is wrong length");return i.forEach(((t,r)=>{s[r].#r(e,t,n,(e=>{i[r]=e}))})),void r(i)}const s=n(this.type,t);s.then?e.push(async function(){r(await s)}()):r(s)}async walkAsync(e,t){const n=[],r=[e];return this.#r(n,e,t,(e=>{r[0]=e})),n.length&&await Promise.all(n),r[0]}static from(e,t){if(O.isParamType(e))return e;if("string"==typeof e)try{return O.from(k(e),t)}catch(t){(0,s.en)(!1,"invalid param type","obj",e)}else if(e instanceof d){let n="",r="",s=null;E(e,o(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(r="tuple",s=e.popParams().map((e=>O.from(e))),n=`tuple(${s.map((e=>e.format())).join(",")})`):(n=b(e.popType("TYPE")),r=n);let i=null,a=null;for(;e.length&&e.peekType("BRACKET");){const t=e.pop();i=new O(A,"",n,r,null,s,a,i),a=t.value,n+=t.text,r="array",s=null}let l=null;if(E(e,p).has("indexed")){if(!t)throw new Error("");l=!0}const h=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new O(A,h,n,r,l,s,a,i)}const n=e.name;(0,s.en)(!n||"string"==typeof n&&n.match(g),"invalid name","obj.name",n);let r=e.indexed;null!=r&&((0,s.en)(t,"parameter cannot be indexed","obj.indexed",e.indexed),r=!!r);let i=e.type,a=i.match(x);if(a){const t=parseInt(a[2]||"-1"),s=O.from({type:a[1],components:e.components});return new O(A,n||"",i,"array",r,null,t,s)}if("tuple"===i||i.startsWith("tuple(")||i.startsWith("(")){const t=null!=e.components?e.components.map((e=>O.from(e))):null;return new O(A,n||"",i,"tuple",r,t,null,null)}return i=b(e.type),new O(A,n||"",i,i,r,null,null,null)}static isParamType(e){return e&&e[T]===N}}}}]);
//# sourceMappingURL=3281-dad3b152b5c59fd8.js.map