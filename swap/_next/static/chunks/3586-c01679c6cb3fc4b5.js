/*! For license information please see 3586-c01679c6cb3fc4b5.js.LICENSE.txt */
"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3586],{19823:function(e,t,n){n(93889)},67533:function(e,t,n){var r=n(93889);var a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=r.useState,s=r.useEffect,o=r.useLayoutEffect,u=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!a(e,n)}catch(e){return!0}}var m="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=i({inst:{value:n,getSnapshot:t}}),a=r[0].inst,m=r[1];return o((function(){a.value=n,a.getSnapshot=t,c(a)&&m({inst:a})}),[e,n,t]),s((function(){return c(a)&&m({inst:a}),e((function(){c(a)&&m({inst:a})}))}),[e]),u(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:m},35449:function(e,t,n){var r=n(93889),a=n(45238);var i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=a.useSyncExternalStore,o=r.useRef,u=r.useEffect,c=r.useMemo,m=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,a){var l=o(null);if(null===l.current){var f={hasValue:!1,value:null};l.current=f}else f=l.current;l=c((function(){function e(e){if(!u){if(u=!0,s=e,e=r(e),void 0!==a&&f.hasValue){var t=f.value;if(a(t,e))return o=t}return o=e}if(t=o,i(s,e))return t;var n=r(e);return void 0!==a&&a(t,n)?t:(s=e,o=n)}var s,o,u=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,a]);var v=s(e,l[0],l[1]);return u((function(){f.hasValue=!0,f.value=v}),[v]),m(v),v}},45238:function(e,t,n){e.exports=n(67533)},31375:function(e,t,n){e.exports=n(35449)},17198:function(e,t,n){n.d(t,{o6:function(){return v}});var r=n(39521),a=n(70838).Buffer;function i(e,...t){try{return(n=e(...t))&&"function"==typeof n.then?n:Promise.resolve(n)}catch(e){return Promise.reject(e)}var n}function s(e){if(function(e){const t=typeof e;return null===e||"object"!==t&&"function"!==t}(e))return String(e);if(function(e){const t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}(e)||Array.isArray(e))return JSON.stringify(e);if("function"==typeof e.toJSON)return s(e.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function o(){if(void 0===a)throw new TypeError("[unstorage] Buffer is not supported!")}const u="base64:";function c(e){return e?e.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function m(...e){return c(e.join(":"))}function l(e){return(e=c(e))?e+":":""}const f=()=>{const e=new Map;return{name:"memory",getInstance:()=>e,hasItem(t){return e.has(t)},getItem(t){return e.get(t)??null},getItemRaw(t){return e.get(t)??null},setItem(t,n){e.set(t,n)},setItemRaw(t,n){e.set(t,n)},removeItem(t){e.delete(t)},getKeys(){return[...e.keys()]},clear(){e.clear()},dispose(){e.clear()}}};function v(e={}){const t={mounts:{"":e.driver||f()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=e=>{for(const n of t.mountpoints)if(e.startsWith(n))return{base:n,relativeKey:e.slice(n.length),driver:t.mounts[n]};return{base:"",relativeKey:e,driver:t.mounts[""]}},v=(e,n)=>t.mountpoints.filter((t=>t.startsWith(e)||n&&e.startsWith(t))).map((n=>({relativeBase:e.length>n.length?e.slice(n.length):void 0,mountpoint:n,driver:t.mounts[n]}))),p=(e,n)=>{if(t.watching){n=c(n);for(const r of t.watchListeners)r(e,n)}},w=async()=>{if(t.watching){for(const e in t.unwatch)await t.unwatch[e]();t.unwatch={},t.watching=!1}},g=(e,t,r)=>{const a=new Map,i=e=>{let t=a.get(e.base);return t||(t={driver:e.driver,base:e.base,items:[]},a.set(e.base,t)),t};for(const r of e){const e="string"==typeof r,a=c(e?r:r.key),s=e?void 0:r.value,o=e||!r.options?t:{...t,...r.options},u=n(a);i(u).items.push({key:a,value:s,relativeKey:u.relativeKey,options:o})}return Promise.all([...a.values()].map((e=>r(e)))).then((e=>e.flat()))},d={hasItem(e,t={}){e=c(e);const{relativeKey:r,driver:a}=n(e);return i(a.hasItem,r,t)},getItem(e,t={}){e=c(e);const{relativeKey:a,driver:s}=n(e);return i(s.getItem,a,t).then((e=>(0,r.ZP)(e)))},getItems(e,t){return g(e,t,(e=>e.driver.getItems?i(e.driver.getItems,e.items.map((e=>({key:e.relativeKey,options:e.options}))),t).then((t=>t.map((t=>({key:m(e.base,t.key),value:(0,r.ZP)(t.value)}))))):Promise.all(e.items.map((t=>i(e.driver.getItem,t.relativeKey,t.options).then((e=>({key:t.key,value:(0,r.ZP)(e)}))))))))},getItemRaw(e,t={}){e=c(e);const{relativeKey:r,driver:s}=n(e);return s.getItemRaw?i(s.getItemRaw,r,t):i(s.getItem,r,t).then((e=>function(e){return"string"!=typeof e?e:e.startsWith(u)?(o(),a.from(e.slice(u.length),"base64")):e}(e)))},async setItem(e,t,r={}){if(void 0===t)return d.removeItem(e);e=c(e);const{relativeKey:a,driver:o}=n(e);o.setItem&&(await i(o.setItem,a,s(t),r),o.watch||p("update",e))},async setItems(e,t){await g(e,t,(async e=>{if(e.driver.setItems)return i(e.driver.setItems,e.items.map((e=>({key:e.relativeKey,value:s(e.value),options:e.options}))),t);e.driver.setItem&&await Promise.all(e.items.map((t=>i(e.driver.setItem,t.relativeKey,s(t.value),t.options))))}))},async setItemRaw(e,t,r={}){if(void 0===t)return d.removeItem(e,r);e=c(e);const{relativeKey:s,driver:m}=n(e);if(m.setItemRaw)await i(m.setItemRaw,s,t,r);else{if(!m.setItem)return;await i(m.setItem,s,function(e){if("string"==typeof e)return e;o();const t=a.from(e).toString("base64");return u+t}(t),r)}m.watch||p("update",e)},async removeItem(e,t={}){"boolean"==typeof t&&(t={removeMeta:t}),e=c(e);const{relativeKey:r,driver:a}=n(e);a.removeItem&&(await i(a.removeItem,r,t),(t.removeMeta||t.removeMata)&&await i(a.removeItem,r+"$",t),a.watch||p("remove",e))},async getMeta(e,t={}){"boolean"==typeof t&&(t={nativeOnly:t}),e=c(e);const{relativeKey:a,driver:s}=n(e),o=Object.create(null);if(s.getMeta&&Object.assign(o,await i(s.getMeta,a,t)),!t.nativeOnly){const e=await i(s.getItem,a+"$",t).then((e=>(0,r.ZP)(e)));e&&"object"==typeof e&&("string"==typeof e.atime&&(e.atime=new Date(e.atime)),"string"==typeof e.mtime&&(e.mtime=new Date(e.mtime)),Object.assign(o,e))}return o},setMeta(e,t,n={}){return this.setItem(e+"$",t,n)},removeMeta(e,t={}){return this.removeItem(e+"$",t)},async getKeys(e,t={}){e=l(e);const n=v(e,!0);let r=[];const a=[];for(const e of n){const n=await i(e.driver.getKeys,e.relativeBase,t);for(const t of n){const n=e.mountpoint+c(t);r.some((e=>n.startsWith(e)))||a.push(n)}r=[e.mountpoint,...r.filter((t=>!t.startsWith(e.mountpoint)))]}return e?a.filter((t=>t.startsWith(e)&&"$"!==t[t.length-1])):a.filter((e=>"$"!==e[e.length-1]))},async clear(e,t={}){e=l(e),await Promise.all(v(e,!1).map((async e=>{if(e.driver.clear)return i(e.driver.clear,e.relativeBase,t);if(e.driver.removeItem){const n=await e.driver.getKeys(e.relativeBase||"",t);return Promise.all(n.map((n=>e.driver.removeItem(n,t))))}})))},async dispose(){await Promise.all(Object.values(t.mounts).map((e=>y(e))))},async watch(e){return await(async()=>{if(!t.watching){t.watching=!0;for(const e in t.mounts)t.unwatch[e]=await h(t.mounts[e],p,e)}})(),t.watchListeners.push(e),async()=>{t.watchListeners=t.watchListeners.filter((t=>t!==e)),0===t.watchListeners.length&&await w()}},async unwatch(){t.watchListeners=[],await w()},mount(e,n){if((e=l(e))&&t.mounts[e])throw new Error(`already mounted at ${e}`);return e&&(t.mountpoints.push(e),t.mountpoints.sort(((e,t)=>t.length-e.length))),t.mounts[e]=n,t.watching&&Promise.resolve(h(n,p,e)).then((n=>{t.unwatch[e]=n})).catch(console.error),d},async unmount(e,n=!0){(e=l(e))&&t.mounts[e]&&(t.watching&&e in t.unwatch&&(t.unwatch[e](),delete t.unwatch[e]),n&&await y(t.mounts[e]),t.mountpoints=t.mountpoints.filter((t=>t!==e)),delete t.mounts[e])},getMount(e=""){e=c(e)+":";const t=n(e);return{driver:t.driver,base:t.base}},getMounts(e="",t={}){e=c(e);return v(e,t.parents).map((e=>({driver:e.driver,base:e.mountpoint})))},keys:(e,t={})=>d.getKeys(e,t),get:(e,t={})=>d.getItem(e,t),set:(e,t,n={})=>d.setItem(e,t,n),has:(e,t={})=>d.hasItem(e,t),del:(e,t={})=>d.removeItem(e,t),remove:(e,t={})=>d.removeItem(e,t)};return d}function h(e,t,n){return e.watch?e.watch(((e,r)=>t(e,n+r))):()=>{}}async function y(e){"function"==typeof e.dispose&&await i(e.dispose)}}}]);
//# sourceMappingURL=3586-c01679c6cb3fc4b5.js.map