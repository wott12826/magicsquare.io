"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5665],{50429:function(e,n,t){var s=t(39804),a=t(98692),o=t(93889);const i=(e,n)=>{let{prefetch:t=!1,...o}=e;return(0,s.jsx)(a.default,{prefetch:t,...o,ref:n})};n.Z=(0,o.forwardRef)(i)},20319:function(e,n,t){t.d(n,{M:function(){return d}});var s=t(39804),a=t(93889),o=t(33552),i=t(76390),r=t.n(i),c=t(85241);const l=(0,c.Rk)(),d=()=>(0,c.iN)(l);n.default=e=>{let{children:n}=e;const t=(0,a.useMemo)((()=>{const e=(new(r())).getResult();return{...o,userAgentInfo:e}}),[]);return(0,s.jsx)(l.Provider,{value:t,children:n})}},96164:function(e,n){n.Z=e=>({isSimpleSign:"simple"===e,isSIWE:"SIWE"===e,isSimpleWithNonce:"simple-with-nonce"===e})},77915:function(e,n){n.Z=e=>({isEVM:"EVM"===e,isMetamask:"Metamask"===e,isOKX:"OKX"===e,isPhantom:"Phantom"===e,isTrust:"Trust"===e,isWalletConnect:"WalletConnect"===e,isPasskey:"Passkey"===e,isWalletConnect2:"WalletConnect2"===e})},97466:function(e,n,t){t.d(n,{Z:function(){return B}});var s=t(93889),a=t(6843),o=t(6560),i=t(67781),r=t(81199),c=t(4373),l=t(62966),d=t(1946),u=t(85125),w=t(53321),E=t(20319),h=t(81395),g=t(18741),m=t(61238),T=t(35276),f=t(42976),C=t(33552);var p={isEvmExtensionActive:()=>Boolean(void 0!==window.ethereum),isTrustWalletExtensionActive:()=>Boolean(void 0!==window.ethereum&&window.ethereum.isTrust),isOKXWalletExtensionActive:()=>Boolean(void 0!==window.okxwallet),isMetamaskExtensionActive:()=>Boolean(void 0!==window.ethereum&&window.ethereum.isMetaMask),getProvider:()=>window.ethereum};const y=()=>{if(!window.solana)throw new Error("Solana is not available");return window.solana},S=()=>y().connect(),v={isPhantomWalletInstalled:()=>Boolean(window.solana&&window.solana.isPhantom),getProvider:y,connect:S,signMessage:async e=>{const n=y(),t=(new TextEncoder).encode(e),{signature:s}=await n.signMessage(t,"utf8");return(e=>{let n="";for(let t=0;t<e.length;t++)n+=String.fromCharCode(e[t]);return window.btoa(n)})(s)},getAddress:async()=>{if(!window.solana)throw new Error("Solana is not available");return(await window.solana.connect()).publicKey.toString()},subscribeToAccountChanges:()=>{y().on("accountChanged",(()=>{var e,n;"Phantom"===i.Z.get(g.mJ.MSQ_CONNECTED_WALLET_TYPE)&&window&&"__logoutClient"in window&&(null===(e=(n=window).__logoutClient)||void 0===e||e.call(n))}))},sendTransaction:async e=>{const n=y();await S();const{signature:t}=await n.request({method:"signAndSendTransaction",params:{message:e,options:{skipPreflight:!0}}});return t}};var A=v;var M=e=>{switch(e){case"EVM":return{isReady:!!C.isDesktop&&p.isEvmExtensionActive(),errorMessage:"To use this feature, you need an EVM wallet extension (e.g., Metamask) installed in your browser or connect using WalletConnect."};case"Phantom":return{isReady:!!C.isDesktop&&A.isPhantomWalletInstalled(),errorMessage:"To proceed, please install the Phantom wallet extension in your browser."};case"Trust":return{isReady:!!C.isDesktop&&p.isTrustWalletExtensionActive(),errorMessage:"To proceed, please install the Trust wallet extension in your browser."};case"Metamask":return{isReady:!!C.isDesktop&&p.isMetamaskExtensionActive(),errorMessage:"To proceed, please install the Metamask extension in your browser."};case"OKX":return{isReady:!!C.isDesktop&&p.isOKXWalletExtensionActive(),errorMessage:"To proceed, please install the OKX wallet extension in your browser."};default:return{isReady:!0,errorMessage:""}}},_=t(62814),P=t(75173);var N=e=>{if(!e)throw new Error(g.dT.EMPTY_ADDRESS);return(0,P.getAddress)(e)},W=t(96164),D=t(75967),O=t(24952),k=t(77915);var R=()=>{const e="WALLETCONNECT_DEEPLINK_CHOICE",n={"https://link.trustwallet.com/wc":{name:"Trust Wallet",href:"trust://"},"https://metamask.app.link/wc":{name:"Metamask",href:"metamask://"}},t=window.localStorage.getItem(e);if(t)try{const{href:s}=JSON.parse(t);if((["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document)&&s in n){const t=n[s];window.localStorage.setItem(e,JSON.stringify(t))}}catch(e){console.error("CustomError: WalletConnect force redirect error",e)}},I=t(10512);let L=null;var b=()=>{const{open:e}=(0,I.Ig)(),{disconnectAsync:n}=(0,d.useDisconnect)(),{open:t}=(0,I.Tg)(),{address:a,chain:o}=(0,c.useAccount)();return(0,s.useEffect)((()=>{!t&&L&&(L(a?{address:a,chain:o}:null),L=null)}),[a,o,t]),(0,s.useCallback)((async()=>(await n(),await e({view:"Connect"}),new Promise((e=>{L=e})))),[e,n])},Z=t(8411);var x=async e=>{let{walletType:n,isDesktop:t}=e;if(t||"WalletConnect"!==n)return;const s=(0,O.Z)(n),o=(new Date).getTime(),i=new Promise((e=>{a.Am.loading("Loading...",{toastId:o,style:s});const n=()=>{document.hidden||setTimeout((()=>{a.Am.dismiss(o),e(null),window.removeEventListener("visibilitychange",n)}),1e3)};window.addEventListener("visibilitychange",n)}));document.hidden&&await i},V=t(88908),Q=t(80461),J=t(69720),K=t(78037);var Y=async e=>{let{address:n,signature:t,message:s,signType:a,nonce:o}=e;if(!(J.verifyMessage(s,t).toLowerCase()===n.toLowerCase()))throw new Error("Signature verification failed: Address does not match");const{isSIWE:i}=(0,W.Z)(a);if(i)try{const e=new r.SiweMessage(s);if((await e.verify({signature:t})).data.nonce!==o)throw new Error("Signature verification failed: Invalid nonce.")}catch(e){throw(0,K.R)("isDev")&&console.debug(e),new Error("Signature verification failed: Invalid Message.")}};function B(){const e=(0,c.useAccount)(),{open:n}=(0,I.Ig)(),{open:t}=(0,I.Tg)(),{connectAsync:C,connectors:p}=(0,l.useConnect)(),{disconnectAsync:y}=(0,d.useDisconnect)(),{signMessageAsync:S}=(0,u.useSignMessage)(),{isDesktop:v}=(0,E.M)(),[P,L]=(0,s.useState)(!1),{mutateAsync:J}=(0,w.ntg)(),K=(0,s.useRef)(null),B=b();(0,s.useEffect)((()=>{var n;!t&&e.address&&(null===(n=K.current)||void 0===n||n.call(K,e.address),K.current=null)}),[t,e.address]);const X=async()=>{await y(),(0,_.Z)()},j=async t=>{let{walletType:s,disabledCache:a,chainId:o=g.VQ.id,shouldWaitWeb3Modal:r,shouldReconnect:c}=t;const{isPhantom:l,isWalletConnect:d,isWalletConnect2:u,isPasskey:w}=(0,k.Z)(s);if(l)try{return await A.getAddress()}catch(e){throw new Error("An error occurred while connecting to Solana")}if(w){if(!c&&e.address)return e.address;const n=p.find((e=>"network.passkeys"===e.id));if(!n)throw new Error("Passkey is not available");const t=(await C({connector:n})).accounts[0];if(!t)throw new Error(g.dT.PLEASE_CONNECT_TO_PROCEED);return t}if(u){if(!c&&e.address)return e.address;const n=await B();if(!(null==n?void 0:n.address))throw new Error(g.dT.PLEASE_CONNECT_TO_PROCEED);return n.address}if(d){if(e.address)return e.address;if(await n({view:"Connect"}),!r)throw new Error(g.dT.PLEASE_CONNECT_TO_PROCEED);const t=await new Promise((e=>{K.current=e}));if(!t)throw new Error(g.dT.PLEASE_CONNECT_TO_PROCEED);return t}if(!a&&i.Z.get(g.mJ.MSQ_CONNECTED_WALLET_ADDRESS)&&i.Z.get(g.mJ.MSQ_CONNECTED_WALLET_TYPE)===s)return i.Z.get(g.mJ.MSQ_CONNECTED_WALLET_ADDRESS);const E=e.connector||p[0];return(await C({chainId:o,connector:E})).accounts[0]},F=async e=>{const{walletType:n,targetAddress:t,hideToasts:s=!1,disabledCache:o,chainId:i,shouldWaitWeb3Modal:r,shouldReconnect:c}=e,l=(new Date).getTime();try{const{isPhantom:e}=(0,k.Z)(n),d=(0,D.Z)("EVM"),u=(0,O.Z)("EVM");if(!s){const e=t?"Connecting to ".concat((0,Q.Z)(t)):"Connecting...";a.Am.loading(e,{toastId:l,icon:d,style:u,closeOnClick:!0})}const w=await j({walletType:n,disabledCache:o,chainId:i,shouldWaitWeb3Modal:r,shouldReconnect:c});if(!w)throw new Error(g.dT.EMPTY_ADDRESS);let E=e?w:N(w);return t&&t.toLowerCase()!==E.toLowerCase()&&(E=await j({walletType:n,disabledCache:o,chainId:i,shouldWaitWeb3Modal:r,shouldReconnect:!0})),a.Am.update(l,{type:a.Am.TYPE.INFO,render:"Connected",icon:d,style:u,autoClose:3e3,isLoading:!1}),(0,V.Z)(E,n),E}catch(n){a.Am.dismiss(l);if((0,m.S)(n).message===g.dT.CONNECTOR_ALREADY_CONNECTED)return await X(),F(e);throw n}};return{connectWallet:F,requestSign:async function n(t){const{walletType:s,shouldVerifyChain:i=!1,message:c,skipConnectStep:l,targetAddress:d,hideConnectToasts:u,hideConfirmToast:w,signType:E="simple",nonce:C,shouldReconnect:p}=t;let y=E;const{isPhantom:P,isWalletConnect:D,isWalletConnect2:I}=(0,k.Z)(s),{isReady:L,errorMessage:b}=M(s),{isSimpleSign:V,isSIWE:K,isSimpleWithNonce:B}=(0,W.Z)(y);if(P&&!V&&(y="simple"),!L)throw new Error(b);let j=null!=C?C:"";try{let n,t;const E=e.address&&e.isConnected;if(n=l&&E?N(e.address):await F({walletType:s,targetAddress:d,hideToasts:u,shouldReconnect:p}),!K&&!B||j||P||(j=await J()),i){if(!await(0,f.sl)({address:n,walletType:s}))throw new Error("Failed to switch the chain. Please to it manually or try again later.")}D&&R(),w||await x({walletType:s,isDesktop:v});const g=await(async e=>{let{address:n,message:t,nonce:s}=e;const a=n?"".concat(t,": ").concat((0,Q.Z)(n)):t;switch(y){case"simple":return a;case"simple-with-nonce":return"".concat(a,"\nNonce: ").concat(s);case"SIWE":{if(!s)throw new Error("Getting a nonce failed");const{chainId:e}=(0,o.D)(h.H.wagmiConfig);try{return new r.SiweMessage({domain:window.location.host,address:n,statement:a,uri:window.location.origin,version:"1",chainId:e,nonce:s}).prepareMessage()}catch(e){throw console.debug(e),new Error("SIWE Message creation failed")}}}})({address:n,message:c,signType:y,nonce:j}),m=(0,O.Z)("EVM"),T=(new Date).getTime();if(!t){const e=D||I&&!v;t=await Promise.race([(G=g,P?A.signMessage(G):S({message:G})),(0,Z.Z)({walletType:s,address:n,toastId:T,showExtraInfo:e})])}P||await Y({address:n,message:g,signature:t,signType:y,nonce:j}),a.Am.dismiss(T);const C="Message signed";return a.Am.success(C,{toastId:C,style:m}),{walletType:s,address:P?n:n.toLowerCase(),network:P?"SOLANA":"EVM",message:g,signature:t,v2:K}}catch(e){a.Am.dismiss();const o=(0,m.S)(e),i={...t,nonce:j};if(o.message===g.dT.CONNECTOR_NOT_FOUND)return(0,_.Z)(),n({...i,hideConfirmToast:!0});if(o.message===g.dT.RECONNECT_REQUEST)return await X(),n(i);if(o.message===g.dT.RETRY)return n(i);(0,T.Z)({error:e,details:{walletType:s,scope:T.z.SIGN_MESSAGE_REQUEST}})}var G},isLoading:P,setIsLoading:L,web3Account:e}}},88908:function(e,n,t){var s=t(67781),a=t(18741);n.Z=(e,n)=>{s.Z.set(a.mJ.MSQ_CONNECTED_WALLET_ADDRESS,e),s.Z.set(a.mJ.MSQ_CONNECTED_WALLET_TYPE,n)}},17169:function(e,n,t){t.d(n,{h:function(){return a}});var s=t(39804);t(93889);const a=e=>(0,s.jsx)("svg",{viewBox:"0 0 16 16",...e,children:(0,s.jsx)("path",{d:"M0.682768 8.9986C-0.220642 8.67338 -0.232904 7.38053 0.677991 7.0769C3.69916 6.06984 6.06987 3.69913 7.07693 0.67796C7.38056 -0.232935 8.67341 -0.220672 8.99864 0.682737C10.0474 3.59611 12.4039 5.95252 15.3172 7.00133C16.2206 7.32656 16.2329 8.61941 15.322 8.92304C12.3008 9.9301 9.93013 12.3008 8.92307 15.322C8.61944 16.2329 7.32659 16.2206 7.00136 15.3172C5.95255 12.4038 3.59614 10.0474 0.682768 8.9986Z",fill:"currentcolor"})})}}]);
//# sourceMappingURL=5665-bb4f6b495e4f26f0.js.map