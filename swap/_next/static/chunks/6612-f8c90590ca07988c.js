"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6612],{60255:function(e){e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const r=e.indexOf(t);return-1===r?[e]:[e.slice(0,r),e.slice(r+t.length)]}},69270:function(e,t,r){r.d(t,{$D:function(){return je},Sd:function(){return ke},y_:function(){return i}});r(73942);var a=r(1323);const o=a.env.NEXT_PUBLIC_SECURE_SITE_SDK_URL||"https://secure.walletconnect.org/sdk",E=a.env.NEXT_PUBLIC_DEFAULT_LOG_LEVEL||"error",_=a.env.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION||2,n={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},i={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}};var s=r(7723);const R=s.z.object({message:s.z.string()});function C(e){return s.z.literal(n[e])}s.z.object({accessList:s.z.array(s.z.string()),blockHash:s.z.string().nullable(),blockNumber:s.z.string().nullable(),chainId:s.z.string().or(s.z.number()),from:s.z.string(),gas:s.z.string(),hash:s.z.string(),input:s.z.string().nullable(),maxFeePerGas:s.z.string(),maxPriorityFeePerGas:s.z.string(),nonce:s.z.string(),r:s.z.string(),s:s.z.string(),to:s.z.string(),transactionIndex:s.z.string().nullable(),type:s.z.string(),v:s.z.string(),value:s.z.string()});const A=s.z.object({chainId:s.z.string().or(s.z.number())}),l=s.z.object({email:s.z.string().email()}),c=s.z.object({otp:s.z.string()}),p=s.z.object({uri:s.z.string()}),S=s.z.object({chainId:s.z.optional(s.z.string().or(s.z.number())),preferredAccountType:s.z.optional(s.z.string())}),T=s.z.object({provider:s.z.enum(["google","github","apple","facebook","x","discord"])}),m=s.z.object({email:s.z.string().email()}),d=s.z.object({otp:s.z.string()}),g=s.z.object({otp:s.z.string()}),h=s.z.object({themeMode:s.z.optional(s.z.enum(["light","dark"])),themeVariables:s.z.optional(s.z.record(s.z.string(),s.z.string().or(s.z.number()))),w3mThemeVariables:s.z.optional(s.z.record(s.z.string(),s.z.string()))}),y=s.z.object({metadata:s.z.object({name:s.z.string(),description:s.z.string(),url:s.z.string(),icons:s.z.array(s.z.string())}).optional(),sdkVersion:s.z.string().optional(),sdkType:s.z.string().optional(),projectId:s.z.string()}),N=s.z.object({type:s.z.string()}),O=s.z.object({action:s.z.enum(["VERIFY_DEVICE","VERIFY_OTP"])}),P=s.z.object({url:s.z.string()}),I=s.z.object({userName:s.z.string()}),z=s.z.object({email:s.z.string(),address:s.z.string(),chainId:s.z.string().or(s.z.number()),accounts:s.z.array(s.z.object({address:s.z.string(),type:s.z.enum([i.ACCOUNT_TYPES.EOA,i.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:s.z.string().optional()}),w=s.z.object({action:s.z.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),U=s.z.object({email:s.z.string().email().optional().nullable(),address:s.z.string(),chainId:s.z.string().or(s.z.number()),smartAccountDeployed:s.z.optional(s.z.boolean()),accounts:s.z.array(s.z.object({address:s.z.string(),type:s.z.enum([i.ACCOUNT_TYPES.EOA,i.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:s.z.optional(s.z.string())}),M=s.z.object({uri:s.z.string()}),u=s.z.object({isConnected:s.z.boolean()}),L=s.z.object({chainId:s.z.string().or(s.z.number())}),F=s.z.object({chainId:s.z.string().or(s.z.number())}),D=s.z.object({newEmail:s.z.string().email()}),b=s.z.object({smartAccountEnabledNetworks:s.z.array(s.z.number())}),f=(s.z.object({address:s.z.string(),isDeployed:s.z.boolean()}),s.z.object({version:s.z.string().optional()})),v=s.z.object({type:s.z.string(),address:s.z.string()}),j=s.z.any(),x=s.z.object({method:s.z.literal("eth_accounts")}),G=s.z.object({method:s.z.literal("eth_blockNumber")}),Y=s.z.object({method:s.z.literal("eth_call"),params:s.z.array(s.z.any())}),B=s.z.object({method:s.z.literal("eth_chainId")}),H=s.z.object({method:s.z.literal("eth_estimateGas"),params:s.z.array(s.z.any())}),k=s.z.object({method:s.z.literal("eth_feeHistory"),params:s.z.array(s.z.any())}),K=s.z.object({method:s.z.literal("eth_gasPrice")}),W=s.z.object({method:s.z.literal("eth_getAccount"),params:s.z.array(s.z.any())}),V=s.z.object({method:s.z.literal("eth_getBalance"),params:s.z.array(s.z.any())}),q=s.z.object({method:s.z.literal("eth_getBlockByHash"),params:s.z.array(s.z.any())}),$=s.z.object({method:s.z.literal("eth_getBlockByNumber"),params:s.z.array(s.z.any())}),Q=s.z.object({method:s.z.literal("eth_getBlockReceipts"),params:s.z.array(s.z.any())}),J=s.z.object({method:s.z.literal("eth_getBlockTransactionCountByHash"),params:s.z.array(s.z.any())}),X=s.z.object({method:s.z.literal("eth_getBlockTransactionCountByNumber"),params:s.z.array(s.z.any())}),Z=s.z.object({method:s.z.literal("eth_getCode"),params:s.z.array(s.z.any())}),ee=s.z.object({method:s.z.literal("eth_getFilterChanges"),params:s.z.array(s.z.any())}),te=s.z.object({method:s.z.literal("eth_getFilterLogs"),params:s.z.array(s.z.any())}),re=s.z.object({method:s.z.literal("eth_getLogs"),params:s.z.array(s.z.any())}),ae=s.z.object({method:s.z.literal("eth_getProof"),params:s.z.array(s.z.any())}),oe=s.z.object({method:s.z.literal("eth_getStorageAt"),params:s.z.array(s.z.any())}),Ee=s.z.object({method:s.z.literal("eth_getTransactionByBlockHashAndIndex"),params:s.z.array(s.z.any())}),_e=s.z.object({method:s.z.literal("eth_getTransactionByBlockNumberAndIndex"),params:s.z.array(s.z.any())}),ne=s.z.object({method:s.z.literal("eth_getTransactionByHash"),params:s.z.array(s.z.any())}),ie=s.z.object({method:s.z.literal("eth_getTransactionCount"),params:s.z.array(s.z.any())}),se=s.z.object({method:s.z.literal("eth_getTransactionReceipt"),params:s.z.array(s.z.any())}),Re=s.z.object({method:s.z.literal("eth_getUncleCountByBlockHash"),params:s.z.array(s.z.any())}),Ce=s.z.object({method:s.z.literal("eth_getUncleCountByBlockNumber"),params:s.z.array(s.z.any())}),Ae=s.z.object({method:s.z.literal("eth_maxPriorityFeePerGas")}),le=s.z.object({method:s.z.literal("eth_newBlockFilter")}),ce=s.z.object({method:s.z.literal("eth_newFilter"),params:s.z.array(s.z.any())}),pe=s.z.object({method:s.z.literal("eth_newPendingTransactionFilter")}),Se=s.z.object({method:s.z.literal("eth_sendRawTransaction"),params:s.z.array(s.z.any())}),Te=s.z.object({method:s.z.literal("eth_syncing"),params:s.z.array(s.z.any())}),me=s.z.object({method:s.z.literal("eth_uninstallFilter"),params:s.z.array(s.z.any())}),de=s.z.object({method:s.z.literal("personal_sign"),params:s.z.array(s.z.any())}),ge=s.z.object({method:s.z.literal("eth_signTypedData_v4"),params:s.z.array(s.z.any())}),he=s.z.object({method:s.z.literal("eth_sendTransaction"),params:s.z.array(s.z.any())}),ye=s.z.object({method:s.z.literal("solana_signMessage"),params:s.z.object({message:s.z.string(),pubkey:s.z.string()})}),Ne=s.z.object({method:s.z.literal("solana_signTransaction"),params:s.z.object({transaction:s.z.string()})}),Oe=s.z.object({method:s.z.literal("solana_signAllTransactions"),params:s.z.object({transactions:s.z.array(s.z.string())})}),Pe=s.z.object({method:s.z.literal("solana_signAndSendTransaction"),params:s.z.object({transaction:s.z.string(),options:s.z.object({skipPreflight:s.z.boolean().optional(),preflightCommitment:s.z.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:s.z.number().optional(),minContextSlot:s.z.number().optional()}).optional()})}),Ie=s.z.object({method:s.z.literal("wallet_sendCalls"),params:s.z.array(s.z.object({chainId:s.z.string().or(s.z.number()).optional(),from:s.z.string().optional(),version:s.z.string().optional(),capabilities:s.z.any().optional(),calls:s.z.array(s.z.object({to:s.z.string().startsWith("0x"),data:s.z.string().startsWith("0x").optional(),value:s.z.string().optional()}))}))}),ze=s.z.object({method:s.z.literal("wallet_getCallsStatus"),params:s.z.array(s.z.string())}),we=s.z.object({method:s.z.literal("wallet_getCapabilities")}),Ue=s.z.object({method:s.z.literal("wallet_grantPermissions"),params:s.z.array(s.z.any())}),Me=s.z.object({method:s.z.literal("wallet_revokePermissions"),params:s.z.any()}),ue=s.z.object({token:s.z.string()}),Le=s.z.object({id:s.z.string().optional()}),Fe={appEvent:Le.extend({type:C("APP_SWITCH_NETWORK"),payload:A}).or(Le.extend({type:C("APP_CONNECT_EMAIL"),payload:l})).or(Le.extend({type:C("APP_CONNECT_DEVICE")})).or(Le.extend({type:C("APP_CONNECT_OTP"),payload:c})).or(Le.extend({type:C("APP_CONNECT_SOCIAL"),payload:p})).or(Le.extend({type:C("APP_GET_FARCASTER_URI")})).or(Le.extend({type:C("APP_CONNECT_FARCASTER")})).or(Le.extend({type:C("APP_GET_USER"),payload:s.z.optional(S)})).or(Le.extend({type:C("APP_GET_SOCIAL_REDIRECT_URI"),payload:T})).or(Le.extend({type:C("APP_SIGN_OUT")})).or(Le.extend({type:C("APP_IS_CONNECTED"),payload:s.z.optional(ue)})).or(Le.extend({type:C("APP_GET_CHAIN_ID")})).or(Le.extend({type:C("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(Le.extend({type:C("APP_INIT_SMART_ACCOUNT")})).or(Le.extend({type:C("APP_SET_PREFERRED_ACCOUNT"),payload:N})).or(Le.extend({type:C("APP_RPC_REQUEST"),payload:de.or(he).or(x).or(G).or(Y).or(B).or(H).or(k).or(K).or(W).or(V).or(q).or($).or(Q).or(J).or(X).or(Z).or(ee).or(te).or(re).or(ae).or(oe).or(Ee).or(_e).or(ne).or(ie).or(se).or(Re).or(Ce).or(Ae).or(le).or(ce).or(pe).or(Se).or(Te).or(me).or(de).or(ge).or(he).or(ye).or(Ne).or(Oe).or(Pe).or(ze).or(Ie).or(we).or(Ue).or(Me)})).or(Le.extend({type:C("APP_UPDATE_EMAIL"),payload:m})).or(Le.extend({type:C("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:d})).or(Le.extend({type:C("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:g})).or(Le.extend({type:C("APP_SYNC_THEME"),payload:h})).or(Le.extend({type:C("APP_SYNC_DAPP_DATA"),payload:y})).or(Le.extend({type:C("APP_RELOAD")})),frameEvent:Le.extend({type:C("FRAME_SWITCH_NETWORK_ERROR"),payload:R}).or(Le.extend({type:C("FRAME_SWITCH_NETWORK_SUCCESS"),payload:F})).or(Le.extend({type:C("FRAME_CONNECT_EMAIL_SUCCESS"),payload:O})).or(Le.extend({type:C("FRAME_CONNECT_EMAIL_ERROR"),payload:R})).or(Le.extend({type:C("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:P})).or(Le.extend({type:C("FRAME_GET_FARCASTER_URI_ERROR"),payload:R})).or(Le.extend({type:C("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:I})).or(Le.extend({type:C("FRAME_CONNECT_FARCASTER_ERROR"),payload:R})).or(Le.extend({type:C("FRAME_CONNECT_OTP_ERROR"),payload:R})).or(Le.extend({type:C("FRAME_CONNECT_OTP_SUCCESS")})).or(Le.extend({type:C("FRAME_CONNECT_DEVICE_ERROR"),payload:R})).or(Le.extend({type:C("FRAME_CONNECT_DEVICE_SUCCESS")})).or(Le.extend({type:C("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:z})).or(Le.extend({type:C("FRAME_CONNECT_SOCIAL_ERROR"),payload:R})).or(Le.extend({type:C("FRAME_GET_USER_ERROR"),payload:R})).or(Le.extend({type:C("FRAME_GET_USER_SUCCESS"),payload:U})).or(Le.extend({type:C("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:R})).or(Le.extend({type:C("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:M})).or(Le.extend({type:C("FRAME_SIGN_OUT_ERROR"),payload:R})).or(Le.extend({type:C("FRAME_SIGN_OUT_SUCCESS")})).or(Le.extend({type:C("FRAME_IS_CONNECTED_ERROR"),payload:R})).or(Le.extend({type:C("FRAME_IS_CONNECTED_SUCCESS"),payload:u})).or(Le.extend({type:C("FRAME_GET_CHAIN_ID_ERROR"),payload:R})).or(Le.extend({type:C("FRAME_GET_CHAIN_ID_SUCCESS"),payload:L})).or(Le.extend({type:C("FRAME_RPC_REQUEST_ERROR"),payload:R})).or(Le.extend({type:C("FRAME_RPC_REQUEST_SUCCESS"),payload:j})).or(Le.extend({type:C("FRAME_SESSION_UPDATE"),payload:ue})).or(Le.extend({type:C("FRAME_UPDATE_EMAIL_ERROR"),payload:R})).or(Le.extend({type:C("FRAME_UPDATE_EMAIL_SUCCESS"),payload:w})).or(Le.extend({type:C("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:R})).or(Le.extend({type:C("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(Le.extend({type:C("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:R})).or(Le.extend({type:C("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:D})).or(Le.extend({type:C("FRAME_SYNC_THEME_ERROR"),payload:R})).or(Le.extend({type:C("FRAME_SYNC_THEME_SUCCESS")})).or(Le.extend({type:C("FRAME_SYNC_DAPP_DATA_ERROR"),payload:R})).or(Le.extend({type:C("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(Le.extend({type:C("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:b})).or(Le.extend({type:C("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:R})).or(Le.extend({type:C("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:R})).or(Le.extend({type:C("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:v})).or(Le.extend({type:C("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:R})).or(Le.extend({type:C("FRAME_READY"),payload:f})).or(Le.extend({type:C("FRAME_RELOAD_ERROR"),payload:R})).or(Le.extend({type:C("FRAME_RELOAD_SUCCESS")}))},De={set(e,t){je.isClient&&localStorage.setItem(`${n.STORAGE_KEY}${e}`,t)},get(e){return je.isClient?localStorage.getItem(`${n.STORAGE_KEY}${e}`):null},delete(e,t){je.isClient&&(t?localStorage.removeItem(e):localStorage.removeItem(`${n.STORAGE_KEY}${e}`))}},be=/^0x(?:[A-Fa-f0-9]{64})$/u,fe=/^0x(?:[a-fA-F0-9]{62,})$/u,ve=3e4,je={checkIfAllowedToTriggerEmail(){const e=De.get(n.LAST_EMAIL_LOGIN_TIME);if(e){const t=Date.now()-Number(e);if(t<ve){const e=Math.ceil((ve-t)/1e3);throw new Error(`Please try again after ${e} seconds`)}}},getTimeToNextEmailLogin(){const e=De.get(n.LAST_EMAIL_LOGIN_TIME);if(e){const t=Date.now()-Number(e);if(t<ve)return Math.ceil((ve-t)/1e3)}return 0},checkIfRequestExists(e){return i.NOT_SAFE_RPC_METHODS.includes(e.method)||i.SAFE_RPC_METHODS.includes(e.method)},getResponseType(e){return"string"==typeof e&&(e?.match(be)||e?.match(fe))?n.RPC_RESPONSE_TYPE_TX:n.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(e){return i.SAFE_RPC_METHODS.includes(e.method)},isClient:"undefined"!=typeof window};var xe=r(40081);function Ge(e,t={}){return"string"==typeof t?.type&&t?.type?.includes(e)}class Ye{constructor({projectId:e,isAppClient:t=!1,chainId:r="eip155:1",enableLogger:a=!0}){if(this.iframe=null,this.rpcUrl=xe.bq.BLOCKCHAIN_API_RPC_URL,this.initFrame=()=>{const e=document.getElementById("w3m-iframe");this.iframe&&!e&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(e,t,r)=>{function a({data:r}){if(!Ge(n.FRAME_EVENT_KEY,r))return;const o=Fe.frameEvent.parse(r);o.id===e&&(t(o),window.removeEventListener("message",a))}je.isClient&&(window.addEventListener("message",a),r.addEventListener("abort",(()=>{window.removeEventListener("message",a)})))},onFrameEvent:e=>{je.isClient&&window.addEventListener("message",(({data:t})=>{if(!Ge(n.FRAME_EVENT_KEY,t))return;const r=Fe.frameEvent.parse(t);e(r)}))},onAppEvent:e=>{je.isClient&&window.addEventListener("message",(({data:t})=>{if(!Ge(n.APP_EVENT_KEY,t))return;const r=Fe.appEvent.parse(t);e(r)}))},postAppEvent:e=>{if(je.isClient){if(!this.iframe?.contentWindow)throw new Error("W3mFrame: iframe is not set");Fe.appEvent.parse(e),this.iframe.contentWindow.postMessage(e,"*")}},postFrameEvent:e=>{if(je.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");Fe.frameEvent.parse(e),parent.postMessage(e,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise(((e,t)=>{this.frameLoadPromiseResolver={resolve:e,reject:t}})),t&&(this.frameLoadPromise=new Promise(((e,t)=>{this.frameLoadPromiseResolver={resolve:e,reject:t}})),je.isClient)){const t=document.createElement("iframe");t.id="w3m-iframe",t.src=`${o}?projectId=${e}&chainId=${r}&version=${_}&enableLogger=${a}`,t.name="w3m-secure-iframe",t.style.position="fixed",t.style.zIndex="999999",t.style.display="none",t.style.animationDelay="0s, 50ms",t.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",t.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=t,this.iframe.onerror=()=>{this.frameLoadPromiseResolver?.reject("Unable to load email login dependency")},this.events.onFrameEvent((e=>{"@w3m-frame/READY"===e.type&&this.frameLoadPromiseResolver?.resolve(void 0)}))}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map((e=>({[e]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${e}&projectId=${this.projectId}`,chainId:e}})));return Object.assign({},...e)}}var Be=r(11899);class He{constructor(e){const t=(0,Be.jI)({level:E}),{logger:r,chunkLoggerController:a}=(0,Be.Rt)({opts:t});this.logger=(0,Be.Ep)(r,this.constructor.name),this.chunkLoggerController=a,"undefined"!=typeof window&&this.chunkLoggerController?.downloadLogsBlobInBrowser&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{this.chunkLoggerController?.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class ke{constructor({projectId:e,chainId:t,enableLogger:r=!0,onTimeout:a}){this.openRpcRequests=[],r&&(this.w3mLogger=new He(e)),this.w3mFrame=new Ye({projectId:e,isAppClient:!0,chainId:t,enableLogger:r}),this.onTimeout=a,this.getLoginEmailUsed()&&this.w3mFrame.initFrame()}getLoginEmailUsed(){return Boolean(De.get(n.EMAIL_LOGIN_USED_KEY))}getEmail(){return De.get(n.EMAIL)}async reload(){try{this.w3mFrame.initFrame(),await this.appEvent({type:n.APP_RELOAD})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error reloading iframe"),e}}async connectEmail(e){try{je.checkIfAllowedToTriggerEmail(),this.w3mFrame.initFrame();const t=await this.appEvent({type:n.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),t}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting email"),e}}async connectDevice(){try{return this.appEvent({type:n.APP_CONNECT_DEVICE})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting device"),e}}async connectOtp(e){try{return this.appEvent({type:n.APP_CONNECT_OTP,payload:e})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting otp"),e}}async isConnected(){try{if(!this.getLoginEmailUsed())return{isConnected:!1};const e=await this.appEvent({type:n.APP_IS_CONNECTED});return e.isConnected||this.deleteAuthLoginCache(),e}catch(e){throw this.deleteAuthLoginCache(),this.w3mLogger?.logger.error({error:e},"Error checking connection"),e}}async getChainId(){try{const e=await this.appEvent({type:n.APP_GET_CHAIN_ID});return this.setLastUsedChainId(e.chainId),e}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error getting chain id"),e}}async getSocialRedirectUri(e){try{return this.w3mFrame.initFrame(),this.appEvent({type:n.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error getting social redirect uri"),e}}async updateEmail(e){try{const t=await this.appEvent({type:n.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),t}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error updating email"),e}}async updateEmailPrimaryOtp(e){try{return this.appEvent({type:n.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error updating email primary otp"),e}}async updateEmailSecondaryOtp(e){try{const t=await this.appEvent({type:n.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(t.newEmail),t}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error updating email secondary otp"),e}}async syncTheme(e){try{return this.appEvent({type:n.APP_SYNC_THEME,payload:e})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error syncing theme"),e}}async syncDappData(e){try{return this.appEvent({type:n.APP_SYNC_DAPP_DATA,payload:e})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error syncing dapp data"),e}}async getSmartAccountEnabledNetworks(){try{const e=await this.appEvent({type:n.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(e.smartAccountEnabledNetworks),e}catch(e){throw this.persistSmartAccountEnabledNetworks([]),this.w3mLogger?.logger.error({error:e},"Error getting smart account enabled networks"),e}}async setPreferredAccount(e){try{return this.appEvent({type:n.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error setting preferred account"),e}}async connect(e){try{const t=e?.chainId||this.getLastUsedChainId()||1,r=await this.appEvent({type:n.APP_GET_USER,payload:{...e,chainId:t}});return this.setLoginSuccess(r.email),this.setLastUsedChainId(r.chainId),r}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting"),e}}async getUser(e){try{const t=e?.chainId||this.getLastUsedChainId()||1;return await this.appEvent({type:n.APP_GET_USER,payload:{...e,chainId:t}})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting"),e}}async connectSocial(e){try{const t=await this.appEvent({type:n.APP_CONNECT_SOCIAL,payload:{uri:e}});return t.userName&&this.setSocialLoginSuccess(t.userName),t}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting social"),e}}async getFarcasterUri(){try{this.w3mFrame.initFrame();return await this.appEvent({type:n.APP_GET_FARCASTER_URI})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error getting farcaster uri"),e}}async connectFarcaster(){try{const e=await this.appEvent({type:n.APP_CONNECT_FARCASTER});return e.userName&&this.setSocialLoginSuccess(e.userName),e}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting farcaster"),e}}async switchNetwork(e){try{const t=await this.appEvent({type:n.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(t.chainId),t}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error switching network"),e}}async disconnect(){try{const e=await this.appEvent({type:n.APP_SIGN_OUT});return this.deleteAuthLoginCache(),e}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error disconnecting"),e}}async request(e){try{if(i.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();this.rpcRequestHandler?.(e);const t=await this.appEvent({type:n.APP_RPC_REQUEST,payload:e});return this.rpcSuccessHandler?.(t,e),t}catch(t){throw this.rpcErrorHandler?.(t,e),this.w3mLogger?.logger.error({error:t},"Error requesting"),t}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent((t=>{t.type===n.FRAME_IS_CONNECTED_SUCCESS&&t.payload.isConnected&&e()}))}onNotConnected(e){this.w3mFrame.events.onFrameEvent((t=>{t.type===n.FRAME_IS_CONNECTED_ERROR&&e(),t.type!==n.FRAME_IS_CONNECTED_SUCCESS||t.payload.isConnected||e()}))}onConnect(e){this.w3mFrame.events.onFrameEvent((t=>{t.type===n.FRAME_GET_USER_SUCCESS&&e(t.payload)}))}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent((t=>{t.type===n.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(t.payload):t.type===n.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:i.ACCOUNT_TYPES.EOA})}))}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent((t=>{t.type===n.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(t.payload.smartAccountEnabledNetworks):t.type===n.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])}))}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){try{this.openRpcRequests.forEach((({abortController:e,method:t})=>{i.SAFE_RPC_METHODS.includes(t)||e.abort()})),this.openRpcRequests=[]}catch(e){this.w3mLogger?.logger.error({error:e},"Error aborting RPC request")}}async appEvent(e){let t;function r(e){return e.replace("@w3m-app/","")}await this.w3mFrame.frameLoadPromise;const a=new AbortController,o=r(e.type);return[n.APP_CONNECT_EMAIL,n.APP_CONNECT_DEVICE,n.APP_CONNECT_OTP,n.APP_CONNECT_SOCIAL,n.APP_GET_SOCIAL_REDIRECT_URI].map(r).includes(o)&&(t=setTimeout((()=>{this.onTimeout?.(),a.abort()}),3e4)),new Promise(((r,E)=>{const _=Math.random().toString(36).substring(7);if(this.w3mLogger?.logger.info?.({event:e,id:_},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:_}),"RPC_REQUEST"===o){const t=e;this.openRpcRequests=[...this.openRpcRequests,{...t.payload,abortController:a}]}a.signal.addEventListener("abort",(()=>{"RPC_REQUEST"===o?E(new Error("Request was aborted")):"GET_FARCASTER_URI"!==o&&E(new Error("Something went wrong"))})),this.w3mFrame.events.registerFrameEventHandler(_,(e=>{return a=e,n=this.w3mLogger,void(a.id===_&&(n?.logger.info?.({framEvent:a,id:_},"Received frame response"),a.type===`@w3m-frame/${o}_SUCCESS`?(t&&clearTimeout(t),"payload"in a&&r(a.payload),r(void 0)):a.type===`@w3m-frame/${o}_ERROR`&&(t&&clearTimeout(t),"payload"in a&&E(new Error(a.payload?.message||"An error occurred")),E(new Error("An error occurred")))));var a,n}),a.signal)}))}setNewLastEmailLoginTime(){De.set(n.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){De.set(n.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&De.set(n.EMAIL,e),De.set(n.EMAIL_LOGIN_USED_KEY,"true"),De.delete(n.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){De.delete(n.EMAIL_LOGIN_USED_KEY),De.delete(n.EMAIL),De.delete(n.LAST_USED_CHAIN_KEY),De.delete(n.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&De.set(n.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){return Number(De.get(n.LAST_USED_CHAIN_KEY))}persistSmartAccountEnabledNetworks(e){De.set(n.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}}}}]);
//# sourceMappingURL=6612-f8c90590ca07988c.js.map