"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7550],{27550:function(e,t,n){n.d(t,{vU:function(){return b}});var r=n(10325),s=n(13619),o=n(95767),i=n(38393),a=n(22386),c=n(99931),u=n(59463),l=n(30314),f=n(94546),h=n(26634);class g{fragment;name;signature;topic;args;constructor(e,t,n){const r=e.name,s=e.format();(0,o.h)(this,{fragment:e,name:r,signature:s,topic:t,args:n})}}class p{fragment;name;args;signature;selector;value;constructor(e,t,n,r){const s=e.name,i=e.format();(0,o.h)(this,{fragment:e,name:s,args:n,signature:i,selector:t,value:r})}}class d{fragment;name;args;signature;selector;constructor(e,t,n){const r=e.name,s=e.format();(0,o.h)(this,{fragment:e,name:r,args:n,signature:s,selector:t})}}class m{hash;_isIndexed;static isIndexed(e){return!(!e||!e._isIndexed)}constructor(e){(0,o.h)(this,{hash:e,_isIndexed:!0})}}const y={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},v={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:e=>`reverted with reason string ${JSON.stringify(e)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:e=>{let t="unknown panic code";return e>=0&&e<=255&&y[e.toString()]&&(t=y[e.toString()]),`reverted with panic code 0x${e.toString(16)} (${t})`}}};class b{fragments;deploy;fallback;receive;#e;#t;#n;#r;constructor(e){let t=[];t="string"==typeof e?JSON.parse(e):e,this.#n=new Map,this.#e=new Map,this.#t=new Map;const n=[];for(const e of t)try{n.push(f.HY.from(e))}catch(t){console.log(`[Warning] Invalid Fragment ${JSON.stringify(e)}:`,t.message)}(0,o.h)(this,{fragments:Object.freeze(n)});let r=null,s=!1;this.#r=this.getAbiCoder(),this.fragments.forEach(((e,t)=>{let n;switch(e.type){case"constructor":return this.deploy?void console.log("duplicate definition - constructor"):void(0,o.h)(this,{deploy:e});case"fallback":return void(0===e.inputs.length?s=!0:((0,i.en)(!r||e.payable!==r.payable,"conflicting fallback fragments",`fragments[${t}]`,e),r=e,s=r.payable));case"function":n=this.#n;break;case"event":n=this.#t;break;case"error":n=this.#e;break;default:return}const a=e.format();n.has(a)||n.set(a,e)})),this.deploy||(0,o.h)(this,{deploy:f.Xg.from("constructor()")}),(0,o.h)(this,{fallback:r,receive:s})}format(e){const t=e?"minimal":"full";return this.fragments.map((e=>e.format(t)))}formatJson(){const e=this.fragments.map((e=>e.format("json")));return JSON.stringify(e.map((e=>JSON.parse(e))))}getAbiCoder(){return u.R.defaultAbiCoder()}#s(e,t,n){if((0,a.A7)(e)){const t=e.toLowerCase();for(const e of this.#n.values())if(t===e.selector)return e;return null}if(-1===e.indexOf("(")){const r=[];for(const[t,n]of this.#n)t.split("(")[0]===e&&r.push(n);if(t){const e=t.length>0?t[t.length-1]:null;let n=t.length,s=!0;h._.isTyped(e)&&"overrides"===e.type&&(s=!1,n--);for(let e=r.length-1;e>=0;e--){const t=r[e].inputs.length;t===n||s&&t===n-1||r.splice(e,1)}for(let e=r.length-1;e>=0;e--){const n=r[e].inputs;for(let s=0;s<t.length;s++)if(h._.isTyped(t[s])){if(s>=n.length){if("overrides"===t[s].type)continue;r.splice(e,1);break}if(t[s].type!==n[s].baseType){r.splice(e,1);break}}}}if(1===r.length&&t&&t.length!==r[0].inputs.length){const e=t[t.length-1];(null==e||Array.isArray(e)||"object"!=typeof e)&&r.splice(0,1)}if(0===r.length)return null;if(r.length>1&&n){const t=r.map((e=>JSON.stringify(e.format()))).join(", ");(0,i.en)(!1,`ambiguous function description (i.e. matches ${t})`,"key",e)}return r[0]}const r=this.#n.get(f.YW.from(e).format());return r||null}getFunctionName(e){const t=this.#s(e,null,!1);return(0,i.en)(t,"no matching function","key",e),t.name}hasFunction(e){return!!this.#s(e,null,!1)}getFunction(e,t){return this.#s(e,t||null,!0)}forEachFunction(e){const t=Array.from(this.#n.keys());t.sort(((e,t)=>e.localeCompare(t)));for(let n=0;n<t.length;n++){const r=t[n];e(this.#n.get(r),n)}}#o(e,t,n){if((0,a.A7)(e)){const t=e.toLowerCase();for(const e of this.#t.values())if(t===e.topicHash)return e;return null}if(-1===e.indexOf("(")){const r=[];for(const[t,n]of this.#t)t.split("(")[0]===e&&r.push(n);if(t){for(let e=r.length-1;e>=0;e--)r[e].inputs.length<t.length&&r.splice(e,1);for(let e=r.length-1;e>=0;e--){const n=r[e].inputs;for(let s=0;s<t.length;s++)if(h._.isTyped(t[s])&&t[s].type!==n[s].baseType){r.splice(e,1);break}}}if(0===r.length)return null;if(r.length>1&&n){const t=r.map((e=>JSON.stringify(e.format()))).join(", ");(0,i.en)(!1,`ambiguous event description (i.e. matches ${t})`,"key",e)}return r[0]}const r=this.#t.get(f.QV.from(e).format());return r||null}getEventName(e){const t=this.#o(e,null,!1);return(0,i.en)(t,"no matching event","key",e),t.name}hasEvent(e){return!!this.#o(e,null,!1)}getEvent(e,t){return this.#o(e,t||null,!0)}forEachEvent(e){const t=Array.from(this.#t.keys());t.sort(((e,t)=>e.localeCompare(t)));for(let n=0;n<t.length;n++){const r=t[n];e(this.#t.get(r),n)}}getError(e,t){if((0,a.A7)(e)){const t=e.toLowerCase();if(v[t])return f.IC.from(v[t].signature);for(const e of this.#e.values())if(t===e.selector)return e;return null}if(-1===e.indexOf("(")){const t=[];for(const[n,r]of this.#e)n.split("(")[0]===e&&t.push(r);if(0===t.length)return"Error"===e?f.IC.from("error Error(string)"):"Panic"===e?f.IC.from("error Panic(uint256)"):null;if(t.length>1){const n=t.map((e=>JSON.stringify(e.format()))).join(", ");(0,i.en)(!1,`ambiguous error description (i.e. ${n})`,"name",e)}return t[0]}if("Error(string)"===(e=f.IC.from(e).format()))return f.IC.from("error Error(string)");if("Panic(uint256)"===e)return f.IC.from("error Panic(uint256)");const n=this.#e.get(e);return n||null}forEachError(e){const t=Array.from(this.#e.keys());t.sort(((e,t)=>e.localeCompare(t)));for(let n=0;n<t.length;n++){const r=t[n];e(this.#e.get(r),n)}}_decodeParams(e,t){return this.#r.decode(e,t)}_encodeParams(e,t){return this.#r.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if("string"==typeof e){const t=this.getError(e);(0,i.en)(t,"unknown error","fragment",e),e=t}return(0,i.en)((0,a.QB)(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t),this._decodeParams(e.inputs,(0,a.QB)(t,4))}encodeErrorResult(e,t){if("string"==typeof e){const t=this.getError(e);(0,i.en)(t,"unknown error","fragment",e),e=t}return(0,a.zo)([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if("string"==typeof e){const t=this.getFunction(e);(0,i.en)(t,"unknown function","fragment",e),e=t}return(0,i.en)((0,a.QB)(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t),this._decodeParams(e.inputs,(0,a.QB)(t,4))}encodeFunctionData(e,t){if("string"==typeof e){const t=this.getFunction(e);(0,i.en)(t,"unknown function","fragment",e),e=t}return(0,a.zo)([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if("string"==typeof e){const t=this.getFunction(e);(0,i.en)(t,"unknown function","fragment",e),e=t}let n="invalid length for result data";const r=(0,a.h_)(t);if(r.length%32==0)try{return this.#r.decode(e.outputs,r)}catch(e){n="could not decode result data"}(0,i.hu)(!1,n,"BAD_DATA",{value:(0,a.Dv)(r),info:{method:e.name,signature:e.format()}})}makeError(e,t){const n=(0,a.Pw)(e,"data"),r=u.R.getBuiltinCallException("call",t,n);if(r.message.startsWith("execution reverted (unknown custom error)")){const e=(0,a.Dv)(n.slice(0,4)),t=this.getError(e);if(t)try{const e=this.#r.decode(t.inputs,n.slice(4));r.revert={name:t.name,signature:t.format(),args:e},r.reason=r.revert.signature,r.message=`execution reverted: ${r.reason}`}catch(e){r.message="execution reverted (coult not decode custom error)"}}const s=this.parseTransaction(t);return s&&(r.invocation={method:s.name,signature:s.signature,args:s.args}),r}encodeFunctionResult(e,t){if("string"==typeof e){const t=this.getFunction(e);(0,i.en)(t,"unknown function","fragment",e),e=t}return(0,a.Dv)(this.#r.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if("string"==typeof e){const t=this.getEvent(e);(0,i.en)(t,"unknown event","eventFragment",e),e=t}(0,i.hu)(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});const n=[];e.anonymous||n.push(e.topicHash);const o=(e,t)=>"string"===e.type?(0,s.id)(t):"bytes"===e.type?(0,r.w)((0,a.Dv)(t)):("bool"===e.type&&"boolean"==typeof t?t=t?"0x01":"0x00":e.type.match(/^u?int/)?t=(0,c.m9)(t):e.type.match(/^bytes/)?t=(0,a.SK)(t,32):"address"===e.type&&this.#r.encode(["address"],[t]),(0,a.U3)((0,a.Dv)(t),32));for(t.forEach(((t,r)=>{const s=e.inputs[r];s.indexed?null==t?n.push(null):"array"===s.baseType||"tuple"===s.baseType?(0,i.en)(!1,"filtering with tuples or arrays not supported","contract."+s.name,t):Array.isArray(t)?n.push(t.map((e=>o(s,e)))):n.push(o(s,t)):(0,i.en)(null==t,"cannot filter non-indexed parameters; must be null","contract."+s.name,t)}));n.length&&null===n[n.length-1];)n.pop();return n}encodeEventLog(e,t){if("string"==typeof e){const t=this.getEvent(e);(0,i.en)(t,"unknown event","eventFragment",e),e=t}const n=[],o=[],a=[];return e.anonymous||n.push(e.topicHash),(0,i.en)(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach(((e,i)=>{const c=t[i];if(e.indexed)if("string"===e.type)n.push((0,s.id)(c));else if("bytes"===e.type)n.push((0,r.w)(c));else{if("tuple"===e.baseType||"array"===e.baseType)throw new Error("not implemented");n.push(this.#r.encode([e.type],[c]))}else o.push(e),a.push(c)})),{data:this.#r.encode(o,a),topics:n}}decodeEventLog(e,t,n){if("string"==typeof e){const t=this.getEvent(e);(0,i.en)(t,"unknown event","eventFragment",e),e=t}if(null!=n&&!e.anonymous){const t=e.topicHash;(0,i.en)((0,a.A7)(n[0],32)&&n[0].toLowerCase()===t,"fragment/topic mismatch","topics[0]",n[0]),n=n.slice(1)}const r=[],s=[],o=[];e.inputs.forEach(((e,t)=>{e.indexed?"string"===e.type||"bytes"===e.type||"tuple"===e.baseType||"array"===e.baseType?(r.push(f._R.from({type:"bytes32",name:e.name})),o.push(!0)):(r.push(e),o.push(!1)):(s.push(e),o.push(!1))}));const c=null!=n?this.#r.decode(r,(0,a.zo)(n)):null,u=this.#r.decode(s,t,!0),h=[],g=[];let p=0,d=0;return e.inputs.forEach(((e,t)=>{let n=null;if(e.indexed)if(null==c)n=new m(null);else if(o[t])n=new m(c[d++]);else try{n=c[d++]}catch(e){n=e}else try{n=u[p++]}catch(e){n=e}h.push(n),g.push(e.name||null)})),l.x4.fromItems(h,g)}parseTransaction(e){const t=(0,a.Pw)(e.data,"tx.data"),n=(0,c.yT)(null!=e.value?e.value:0,"tx.value"),r=this.getFunction((0,a.Dv)(t.slice(0,4)));if(!r)return null;const s=this.#r.decode(r.inputs,t.slice(4));return new p(r,r.selector,s,n)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new g(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){const t=(0,a.Dv)(e),n=this.getError((0,a.QB)(t,0,4));if(!n)return null;const r=this.#r.decode(n.inputs,(0,a.QB)(t,4));return new d(n,n.selector,r)}static from(e){return e instanceof b?e:"string"==typeof e?new b(JSON.parse(e)):"function"==typeof e.formatJson?new b(e.formatJson()):"function"==typeof e.format?new b(e.format("json")):new b(e)}}}}]);
//# sourceMappingURL=7550-d514000b082ed3de.js.map