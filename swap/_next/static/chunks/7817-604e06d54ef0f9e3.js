"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7817],{32578:function(e,t,r){r.d(t,{$A:function(){return R},Ag:function(){return h},MD:function(){return y},R5:function(){return p},c:function(){return v},dh:function(){return E},fq:function(){return g},lM:function(){return m},tw:function(){return L}});r(93889);var n=r(78394),s=r(30121),i=r(10308),o=r(67781),u=r(69009),a=r(5766),l=r(79400),c=r(90426),f=r(49631),d=(r(61564),r(21242)),w=r(6403);const y="authUserInvalidation",p={session:[d.r],publicUser:e=>[y,"publicUser",e],votedApps:(e,t)=>["votedApps",e,t],followedApps:(e,t)=>["followedApps",e,t],reviews:function(e){let{limit:t=l.yT,type:r="all",period:n="all"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return["userReviews",e,{limit:t,type:r,period:n}]},review:(e,t)=>[y,"userReview",e,t],humanityScore:[d.f,"humanityScore"],checkMagicIDNecessaryData:e=>[d.f,"checkMagicIDNecessaryData",e],referralUrl:(e,t)=>[d.f,"referralUrl",e,t],faceLivenessSession:[d.f,"faceLivenessSession"],faceLivenessSessionResult:e=>[d.f,"faceLivenessSession",e],xLoginUrl:e=>[d.f,"xLoginUrl",e],discordLoginUrl:e=>[d.f,"discordLoginUrl",e]},v=()=>{const e=(0,n.useQueryClient)();return(0,s.useMutation)({mutationFn:()=>(0,u.Red)(),onSuccess:()=>{e.invalidateQueries({queryKey:[p.session]})}})},b=e=>()=>{const t=(0,n.useQueryClient)();return(0,s.useMutation)({mutationFn:async t=>{const r=o.Z.get(c.Z.REFERRAL),n=await e({json:{...t,referredBy:r}});return{...await(0,u.isw)(),isNewUser:n.newUser}},onSuccess:e=>{o.Z.remove(c.Z.REFERRAL),(0,w.aJ)(t,e)}})},h=(b(u.bLH),b(u.wkY),b(u.bq_),b(u.nEx)),g=b((e=>(0,u.jbP)(e))),m=(b(u.WTo),b(u.o1R),()=>{const e=(0,n.useQueryClient)();return(0,s.useMutation)({mutationFn:async e=>{let{address:t,signature:r,network:n,message:s,walletType:i,v2:l}=e;const f=await(0,u.Dkb)({json:{pub_key:t,signature:r,network:n,message:s,wallet:i.toUpperCase()},...l?{headers:{"x-sign-in":"v2"}}:{}});if(f.error)throw new Error("Login failed");const d=o.Z.get(c.Z.REFERRAL);if((await(0,a.z7)({json:{network:n,pub_key:t,wallet:i,referredBy:d}})).error)throw new Error("Connect failed");return{user:await(0,u.isw)(),isNewUser:f.newUser}},onSuccess:t=>{e.invalidateQueries({queryKey:[d.f]}),(0,w.aJ)(e,t.user)}})}),R=(e,t)=>(0,i.useQuery)({queryFn:()=>(0,u.qtm)({from:e}),queryKey:p.xLoginUrl(e),...t}),E=(e,t)=>(0,i.useQuery)({queryKey:p.discordLoginUrl(e),queryFn:()=>(0,u.ZMW)({from:e}),...t}),L=()=>{const e=(0,n.useQueryClient)(),{webApp:t}=(0,f.Z)();return(0,s.useMutation)({mutationFn:async e=>{const r=o.Z.get(c.Z.REFERRAL),n=await(0,u.VIF)({json:{...e,referredBy:r}});o.Z.remove(c.Z.REFERRAL);const s=await(0,u.isw)();null==s||s.socials.find((e=>"TELEGRAM"===e.type)),null==t||t.initDataUnsafe.user;return{user:s,isNewUser:n.newUser}},onSuccess:t=>{(0,w.aJ)(e,t.user)}})}},61564:function(e,t,r){r.d(t,{N:function(){return i}});var n=r(8512);const s={},i=()=>{const{data:e=s}=(0,n.XX)();return e}},42140:function(e,t,r){var n=r(93889),s=r(33552),i=r(69839),o=r(82969);const u=function(){let{size:e,isTablet:t,isMobile:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"number"==typeof e||void 0===e?e:r&&e[2]?e[2]:t&&e[1]?e[1]:e[0]};t.Z=e=>{let{width:t,height:r,resizeType:a="fill",format:l="webp",src:c,isClient:f}=e;const[d,w]=(0,n.useState)(c||i.r4);(0,n.useEffect)((()=>{c&&d!==c&&w(c)}),[c]);const y=u({size:t,isMobile:s.isMobile,isTablet:s.isTablet}),p=u({size:r,isMobile:s.isMobile,isTablet:s.isTablet}),v=(0,n.useCallback)((e=>{let{src:t,width:r,quality:n=60}=e;const s=y&&p?((e,t,r)=>Math.round(t/e*r))(Number(y),Number(p),r):void 0;return(0,o.Z)({url:t,width:r,height:s,resizeType:a,quality:n,format:l,isClient:f})}),[y,p,a,l]);return{hasLoader:!d||"string"==typeof d&&!/^(?:http|data)/.test(d),loader:v,width:y,height:p,resizeType:a,format:l,src:d,setSrc:w}}},16040:function(e,t,r){var n=r(93889),s=r(41224);t.Z=()=>{const{data:e}=(0,s.$k)();return{getIsMixPanelEventEnabled:(0,n.useCallback)((t=>{return!!e&&(null===(r=e[t])||void 0===r||r);var r}),[e])}}},49631:function(e,t,r){var n=r(93889);t.Z=()=>{const[e,t]=(0,n.useState)(void 0),[r,s]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{const e=()=>{var e,r;const n=null===(r=window)||void 0===r||null===(e=r.Telegram)||void 0===e?void 0:e.WebApp;return!!n&&(n.ready(),t(n),!0)};if(e())return;let r;const n=setTimeout((()=>{s(!0),clearInterval(r)}),1e4);return r=setInterval((()=>{e()&&(clearInterval(r),clearTimeout(n))}),1e3),()=>{clearInterval(r),clearTimeout(n)}}),[]),{webApp:e,isAppOpenedInTelegram:Boolean(null==e?void 0:e.initData),hasTimedOut:r}}}}]);
//# sourceMappingURL=7817-604e06d54ef0f9e3.js.map