"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9500],{22695:function(t,n,e){e.d(n,{id:function(){return s}});var r=e(35831),i=e(9898);function s(t){return(0,r.w)((0,i.Y0)(t))}},98074:function(t,n,e){e.d(n,{E:function(){return C}});var r=e(96232),i=e(35831),s=e(89321),a=e(48757),o=e(93476),c=e(693),f=e(22695);const u=new Uint8Array(32);u.fill(0);const y=BigInt(-1),p=BigInt(0),h=BigInt(1),d=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const m=(0,a.m9)(h,32),l=(0,a.m9)(p,32),g={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},v=["name","version","chainId","verifyingContract","salt"];function w(t){return function(n){return(0,o.en)("string"==typeof n,`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,n),n}}const b={name:w("name"),version:w("version"),chainId:function(t){const n=(0,a.yT)(t,"domain.chainId");return(0,o.en)(n>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(n)?Number(n):(0,a.B4)(n)},verifyingContract:function(t){try{return(0,r.K)(t).toLowerCase()}catch(t){}(0,o.en)(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const n=(0,s.Pw)(t,"domain.salt");return(0,o.en)(32===n.length,'invalid domain value "salt"',"domain.salt",t),(0,s.Dv)(n)}};function S(t){{const n=t.match(/^(u?)int(\d+)$/);if(n){const e=""===n[1],r=parseInt(n[2]);(0,o.en)(r%8==0&&0!==r&&r<=256&&n[2]===String(r),"invalid numeric width","type",t);const i=(0,a.sS)(d,e?r-1:r),s=e?(i+h)*y:p;return function(n){const r=(0,a.yT)(n,"value");return(0,o.en)(r>=s&&r<=i,`value out-of-bounds for ${t}`,"value",r),(0,a.m9)(e?(0,a.$j)(r,256):r,32)}}}{const n=t.match(/^bytes(\d+)$/);if(n){const e=parseInt(n[1]);return(0,o.en)(0!==e&&e<=32&&n[1]===String(e),"invalid bytes width","type",t),function(n){const r=(0,s.Pw)(n);return(0,o.en)(r.length===e,`invalid length for ${t}`,"value",n),function(t){const n=(0,s.Pw)(t),e=n.length%32;return e?(0,s.zo)([n,u.slice(e)]):(0,s.Dv)(n)}(n)}}}switch(t){case"address":return function(t){return(0,s.U3)((0,r.K)(t),32)};case"bool":return function(t){return t?m:l};case"bytes":return function(t){return(0,i.w)(t)};case"string":return function(t){return(0,f.id)(t)}}return null}function $(t,n){return`${t}(${n.map((({name:t,type:n})=>n+" "+t)).join(",")})`}function T(t){const n=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return n?{base:n[1],index:n[2]+n[4],array:{base:n[1],prefix:n[1]+n[2],count:n[5]?parseInt(n[5]):-1}}:{base:t}}class C{primaryType;#t;get types(){return JSON.parse(this.#t)}#n;#e;constructor(t){this.#n=new Map,this.#e=new Map;const n=new Map,e=new Map,r=new Map,i={};Object.keys(t).forEach((s=>{i[s]=t[s].map((({name:n,type:e})=>{let{base:r,index:i}=T(e);return"int"!==r||t.int||(r="int256"),"uint"!==r||t.uint||(r="uint256"),{name:n,type:r+(i||"")}})),n.set(s,new Set),e.set(s,[]),r.set(s,new Set)})),this.#t=JSON.stringify(i);for(const r in i){const s=new Set;for(const a of i[r]){(0,o.en)(!s.has(a.name),`duplicate variable name ${JSON.stringify(a.name)} in ${JSON.stringify(r)}`,"types",t),s.add(a.name);const i=T(a.type).base;(0,o.en)(i!==r,`circular type reference to ${JSON.stringify(i)}`,"types",t);S(i)||((0,o.en)(e.has(i),`unknown type ${JSON.stringify(i)}`,"types",t),e.get(i).push(r),n.get(r).add(i))}}const s=Array.from(e.keys()).filter((t=>0===e.get(t).length));(0,o.en)(0!==s.length,"missing primary type","types",t),(0,o.en)(1===s.length,`ambiguous primary types or unused types: ${s.map((t=>JSON.stringify(t))).join(", ")}`,"types",t),(0,c.h)(this,{primaryType:s[0]}),function i(s,a){(0,o.en)(!a.has(s),`circular type reference to ${JSON.stringify(s)}`,"types",t),a.add(s);for(const t of n.get(s))if(e.has(t)){i(t,a);for(const n of a)r.get(n).add(t)}a.delete(s)}(this.primaryType,new Set);for(const[t,n]of r){const e=Array.from(n);e.sort(),this.#n.set(t,$(t,i[t])+e.map((t=>$(t,i[t]))).join(""))}}getEncoder(t){let n=this.#e.get(t);return n||(n=this.#r(t),this.#e.set(t,n)),n}#r(t){{const n=S(t);if(n)return n}const n=T(t).array;if(n){const t=n.prefix,e=this.getEncoder(t);return r=>{(0,o.en)(-1===n.count||n.count===r.length,`array length mismatch; expected length ${n.count}`,"value",r);let a=r.map(e);return this.#n.has(t)&&(a=a.map(i.w)),(0,i.w)((0,s.zo)(a))}}const e=this.types[t];if(e){const n=(0,f.id)(this.#n.get(t));return t=>{const r=e.map((({name:n,type:e})=>{const r=this.getEncoder(e)(t[n]);return this.#n.has(e)?(0,i.w)(r):r}));return r.unshift(n),(0,s.zo)(r)}}(0,o.en)(!1,`unknown type: ${t}`,"type",t)}encodeType(t){const n=this.#n.get(t);return(0,o.en)(n,`unknown type: ${JSON.stringify(t)}`,"name",t),n}encodeData(t,n){return this.getEncoder(t)(n)}hashStruct(t,n){return(0,i.w)(this.encodeData(t,n))}encode(t){return this.encodeData(this.primaryType,t)}hash(t){return this.hashStruct(this.primaryType,t)}_visit(t,n,e){if(S(t))return e(t,n);const r=T(t).array;if(r)return(0,o.en)(-1===r.count||r.count===n.length,`array length mismatch; expected length ${r.count}`,"value",n),n.map((t=>this._visit(r.prefix,t,e)));const i=this.types[t];if(i)return i.reduce(((t,{name:r,type:i})=>(t[r]=this._visit(i,n[r],e),t)),{});(0,o.en)(!1,`unknown type: ${t}`,"type",t)}visit(t,n){return this._visit(this.primaryType,t,n)}static from(t){return new C(t)}static getPrimaryType(t){return C.from(t).primaryType}static hashStruct(t,n,e){return C.from(n).hashStruct(t,e)}static hashDomain(t){const n=[];for(const e in t){if(null==t[e])continue;const r=g[e];(0,o.en)(r,`invalid typed-data domain key: ${JSON.stringify(e)}`,"domain",t),n.push({name:e,type:r})}return n.sort(((t,n)=>v.indexOf(t.name)-v.indexOf(n.name))),C.hashStruct("EIP712Domain",{EIP712Domain:n},t)}static encode(t,n,e){return(0,s.zo)(["0x1901",C.hashDomain(t),C.from(n).hash(e)])}static hash(t,n,e){return(0,i.w)(C.encode(t,n,e))}static async resolveNames(t,n,e,r){t=Object.assign({},t);for(const n in t)null==t[n]&&delete t[n];const i={};t.verifyingContract&&!(0,s.A7)(t.verifyingContract,20)&&(i[t.verifyingContract]="0x");const a=C.from(n);a.visit(e,((t,n)=>("address"!==t||(0,s.A7)(n,20)||(i[n]="0x"),n)));for(const t in i)i[t]=await r(t);return t.verifyingContract&&i[t.verifyingContract]&&(t.verifyingContract=i[t.verifyingContract]),{domain:t,value:e=a.visit(e,((t,n)=>"address"===t&&i[n]?i[n]:n))}}static getPayload(t,n,e){C.hashDomain(t);const r={},i=[];v.forEach((n=>{const e=t[n];null!=e&&(r[n]=b[n](e),i.push({name:n,type:g[n]}))}));const c=C.from(n);n=c.types;const f=Object.assign({},n);return(0,o.en)(null==f.EIP712Domain,"types must not contain EIP712Domain type","types.EIP712Domain",n),f.EIP712Domain=i,c.encode(e),{types:f,domain:r,primaryType:c.primaryType,message:c.visit(e,((t,n)=>{if(t.match(/^bytes(\d*)/))return(0,s.Dv)((0,s.Pw)(n));if(t.match(/^u?int/))return(0,a.yT)(n).toString();switch(t){case"address":return n.toLowerCase();case"bool":return!!n;case"string":return(0,o.en)("string"==typeof n,"invalid string","value",n),n}(0,o.en)(!1,"unsupported type","type",t)}))}}}}}]);
//# sourceMappingURL=9500-2fd06e6c3c47b2c9.js.map